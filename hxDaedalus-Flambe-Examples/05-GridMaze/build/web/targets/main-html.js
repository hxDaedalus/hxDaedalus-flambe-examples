/** Cooked with Flambe, https://getflambe.com */
'use strict';(function(){function C(a,b){function d(){}d.prototype=a;var e=new d,g;for(g in b)e[g]=b[g];b.toString!==Object.prototype.toString&&(e.toString=b.toString);return e}function Q(a,b){if(null==b)return null;null==b.__id__&&(b.__id__=xb++);var d;null==a.hx__closures__?a.hx__closures__={}:d=a.hx__closures__[b.__id__];null==d&&(d=function(){return d.method.apply(d.scope,arguments)},d.scope=a,d.method=b,a.hx__closures__[b.__id__]=d);return d}var Ra=function(a,b){b=b.split("u").join("");this.r=
RegExp(a,b)};Ra.__name__=!0;Ra.prototype={match:function(a){this.r.global&&(this.r.lastIndex=0);this.r.m=this.r.exec(a);this.r.s=a;return null!=this.r.m}};var o=function(){};o.__name__=!0;o.generate=function(a,b,d,e,g){null==g&&(g=7459);o.tileWidth=a/d|0;o.tileHeight=b/e|0;o.cols=d;o.rows=e;o.rng=new wa(g);o.makeGrid();o.traverseGrid();o.populateObject()};o.makeGrid=function(){o.grid=[];for(var a=0,b=o.cols;a<b;){var d=a++;o.grid[d]=[];for(var e=0,g=o.rows;e<g;){var f=e++,c=new mb(d,f);o.grid[d][f]=
c;var h=[d*o.tileWidth,f*o.tileHeight],i=[(d+1)*o.tileWidth,f*o.tileHeight],k=[d*o.tileWidth,(f+1)*o.tileHeight],l=[(d+1)*o.tileWidth,(f+1)*o.tileHeight];c.walls[0]=h.concat(i);c.walls[1]=i.concat(l);c.walls[2]=k.concat(l);if(0!=f||0!=d)c.walls[3]=h.concat(k)}}};o.traverseGrid=function(){for(var a=[0,1,0,-1],b=[-1,0,1,0],d=[2,3,0,1],e=o.rng.nextInRange(0,o.cols-1),g=o.rng.nextInRange(0,o.rows-1),e=[o.grid[e][g]];0<e.length;){var f=e.length-1,g=e[f];g.visited=!0;var c=[0,1,2,3];o.rng.shuffle(c);for(var h=
0;h<c.length;){var i=c[h];++h;var k=g.col+a[i],l=g.row+b[i];if(0<=k&&k<o.cols&&0<=l&&l<o.rows&&!o.grid[k][l].visited){f=o.grid[k][l];g.walls[i]=[];f.walls[d[i]]=[];f.visited=!0;e.push(f);f=-1;break}}0<=f&&e.splice(f,1)}};o.populateObject=function(){o.object=new ca;for(var a=[],b=0,d=o.cols;b<d;)for(var e=b++,g=0,f=o.rows;g<f;)for(var c=g++,h=0,c=o.grid[e][c].walls;h<c.length;){var i=c[h];++h;for(var k=0;k<i.length;){var l=i[k];++k;a.push(l)}}o.object.set_coordinates(a)};var mb=function(a,b){this.visited=
!1;this.col=a;this.row=b;for(var d=[],e=0;4>e;)e++,d.push([]);this.walls=d};mb.__name__=!0;var W=function(){};W.__name__=!0;W.cca=function(a,b){var d=a.charCodeAt(b);return d!=d?void 0:d};W.substr=function(a,b,d){if(null!=b&&0!=b&&null!=d&&0>d)return"";null==d&&(d=a.length);0>b?(b=a.length+b,0>b&&(b=0)):0>d&&(d=a.length+d-b);return a.substr(b,d)};W.remove=function(a,b){var d=a.indexOf(b);if(-1==d)return!1;a.splice(d,1);return!0};var ma=function(){};ma.__name__=!0;var A=function(){this._flags=0;this.owner=
this.next=null};A.__name__=!0;A.__interfaces__=[ma];A.prototype={onAdded:function(){},onRemoved:function(){},onStart:function(){},onStop:function(){},onUpdate:function(){},dispose:function(){null!=this.owner&&this.owner.remove(this)},get_name:function(){return null}};var da=function(){this.rows=this.cols=20;this.inited=this.newPath=!1;A.call(this);t.root.addChild((new R).add((new na(16777215,t._platform.getStage().get_width(),t._platform.getStage().get_height())).setXY(0,0)));var a=new oa;this.meshView=
new xa(a);t.root.addChild((new R).add(a));a=new oa;this.pathView=new xa(a);t.root.addChild((new R).add(a));this.meshView.constraintsWidth=4;this.entityAI=new Sa;this.pathfinder=new Ta;this.pathSampler=new pa;this.resetMaze(!0);this.inited=!0};da.__name__=!0;da.main=function(){t.init();t.root.addChild((new R).add(new da))};da.__super__=A;da.prototype=C(A.prototype,{get_name:function(){return"Main_0"},onAdded:function(){A.prototype.onAdded.call(this);t._platform.getPointer().down.connect(Q(this,this.onPointerDown));
t._platform.getPointer().up.connect(Q(this,this.onPointerUp));t._platform.getKeyboard().down.connect(Q(this,this.onKeyDown))},onPointerDown:function(){this.newPath=!0},onPointerUp:function(){this.newPath=!1},onKeyDown:function(a){a.key==c.Space?this.resetMaze(!0):a.key==c.Enter&&this.resetMaze(!1)},onUpdate:function(a){A.prototype.onUpdate.call(this,a);this.inited&&(this.newPath&&(this.pathView.graphics.graphics.clear(),this.pathfinder.findPath(t._platform.getPointer().get_x(),t._platform.getPointer().get_y(),
this.path),this.pathView.drawPath(this.path),this.pathSampler.reset(),this.pathView.drawEntity(this.entityAI)),this.pathSampler.get_hasNext()&&(this.pathSampler.next(),this.pathView.drawEntity(this.entityAI)))},resetMaze:function(a){null==a&&(a=!1);var b=S["int"](1E4*Math.random()+1E3);if(a){this.mesh=Ua.buildRectangle(600,600);var a=Math.ceil(600/this.cols),d=Math.ceil(600/this.rows);o.generate(600-2*a,600-2*d,this.cols-2,this.rows-2,b);o.object.set_x(o.tileWidth);o.object.set_y(o.tileHeight);this.mesh.insertObject(o.object);
this.meshView.drawMesh(this.mesh,!0)}this.entityAI.set_radius(0.27*o.tileWidth);this.entityAI.x=o.tileWidth/2;this.entityAI.y=o.tileHeight/2;this.pathView.drawEntity(this.entityAI,!0);this.pathfinder.entity=this.entityAI;this.pathfinder.set_mesh(this.mesh);this.path=[];this.pathSampler.set_path(this.path);this.pathSampler.entity=this.entityAI;this.pathSampler.set_samplingDistance(0.7*o.tileWidth)}});var Va=function(){};Va.__name__=!0;Math.__name__=!0;var qa=function(){};qa.__name__=!0;qa.field=function(a,
b){try{return a[b]}catch(d){return null}};var S=function(){};S.__name__=!0;S.string=function(a){return $.__string_rec(a,"")};S["int"]=function(a){return a|0};S.parseInt=function(a){var b=parseInt(a,10);if(0==b&&(120==W.cca(a,1)||88==W.cca(a,1)))b=parseInt(a);return isNaN(b)?null:b};var R=function(){this.parent=this.firstChild=this.next=this.firstComponent=null;this._compMap={}};R.__name__=!0;R.__interfaces__=[ma];R.prototype={add:function(a){null!=a.owner&&a.owner.remove(a);var b=a.get_name(),d=this._compMap[b];
null!=d&&this.remove(d);this._compMap[b]=a;b=null;for(d=this.firstComponent;null!=d;)b=d,d=d.next;null!=b?b.next=a:this.firstComponent=a;a.owner=this;a.next=null;a.onAdded();return this},remove:function(a){for(var b=null,d=this.firstComponent;null!=d;){var e=d.next;if(d==a)return null==b?this.firstComponent=e:(b.owner=this,b.next=e),delete this._compMap[d.get_name()],0!=(d._flags&1)&&(d.onStop(),d._flags&=-2),d.onRemoved(),d.owner=null,d.next=null,!0;b=d;d=e}return!1},addChild:function(a,b){null==
b&&(b=!0);null!=a.parent&&a.parent.removeChild(a);a.parent=this;if(b){for(var d=null,e=this.firstChild;null!=e;)d=e,e=e.next;null!=d?d.next=a:this.firstChild=a}else a.next=this.firstChild,this.firstChild=a;return this},removeChild:function(a){for(var b=null,d=this.firstChild;null!=d;){var e=d.next;if(d==a){null==b?this.firstChild=e:b.next=e;d.parent=null;d.next=null;break}b=d;d=e}},disposeChildren:function(){for(;null!=this.firstChild;)this.firstChild.dispose()},dispose:function(){for(null!=this.parent&&
this.parent.removeChild(this);null!=this.firstComponent;)this.firstComponent.dispose();this.disposeChildren()}};var Wa=function(){};Wa.__name__=!0;var nb=function(){};nb.__name__=!0;var ea=function(){};ea.__name__=!0;ea.__interfaces__=[nb];ea.prototype={init:function(){var a=this;s.fixAndroidMath();var b=null;try{b=window.flambe.canvas}catch(d){}b.setAttribute("tabindex","0");b.style.outlineStyle="none";b.style.webkitTapHighlightColor="transparent";b.setAttribute("moz-opaque","true");this._stage=
new fa(b);this._pointer=new G;this._mouse=new ya(this._pointer,b);this._renderer=this.createRenderer(b);this.mainLoop=new ga;this.musicPlaying=!1;this._canvas=b;this._container=b.parentElement;this._container.style.overflow="hidden";this._container.style.position="relative";this._container.style.msTouchAction="none";var e=0,g=function(d){if(!(1E3>d.timeStamp-e)){var g=b.getBoundingClientRect(),f=a.getX(d,g),g=a.getY(d,g);switch(d.type){case "mousedown":d.target==b&&(d.preventDefault(),a._mouse.submitDown(f,
g,d.button),b.focus());break;case "mousemove":a._mouse.submitMove(f,g);break;case "mouseup":a._mouse.submitUp(f,g,d.button);break;case "mousewheel":case "DOMMouseScroll":a._mouse.submitScroll(f,g,"mousewheel"==d.type?d.wheelDelta/40:-d.detail)&&d.preventDefault()}}};window.addEventListener("mousedown",g,!1);window.addEventListener("mousemove",g,!1);window.addEventListener("mouseup",g,!1);b.addEventListener("mousewheel",g,!1);b.addEventListener("DOMMouseScroll",g,!1);b.addEventListener("contextmenu",
function(a){a.preventDefault()},!1);var f="undefined"!=typeof window.ontouchstart,g="msMaxTouchPoints"in window.navigator&&1<window.navigator.msMaxTouchPoints;if(f||g){var c=new za(this._pointer,f?4:window.navigator.msMaxTouchPoints);this._touch=c;g=function(b){var d;d=f?b.changedTouches:[b];var g=b.target.getBoundingClientRect();e=b.timeStamp;switch(b.type){case "touchstart":case "MSPointerDown":case "pointerdown":b.preventDefault();s.SHOULD_HIDE_MOBILE_BROWSER&&s.hideMobileBrowser();for(b=0;b<d.length;){var h=
d[b];++b;var i=a.getX(h,g),j=a.getY(h,g);c.submitDown((f?h.identifier:h.pointerId)|0,i,j)}break;case "touchmove":case "MSPointerMove":case "pointermove":b.preventDefault();for(b=0;b<d.length;)h=d[b],++b,i=a.getX(h,g),j=a.getY(h,g),c.submitMove((f?h.identifier:h.pointerId)|0,i,j);break;case "touchend":case "touchcancel":case "MSPointerUp":case "pointerup":for(b=0;b<d.length;)h=d[b],++b,i=a.getX(h,g),j=a.getY(h,g),c.submitUp((f?h.identifier:h.pointerId)|0,i,j)}};f?(b.addEventListener("touchstart",g,
!1),b.addEventListener("touchmove",g,!1),b.addEventListener("touchend",g,!1),b.addEventListener("touchcancel",g,!1)):(b.addEventListener("MSPointerDown",g,!1),b.addEventListener("MSPointerMove",g,!1),b.addEventListener("MSPointerUp",g,!1))}else this._touch=new Xa;var h=window.onerror;window.onerror=function(a,b,d){t.uncaughtError.emit(a);return null!=h?h(a,b,d):!1};var i=s.loadExtension("hidden",window.document);null!=i.value?(g=function(){t.hidden.set__(qa.field(window.document,i.field))},g(null),
window.document.addEventListener(i.prefix+"visibilitychange",g,!1)):(g=function(a){t.hidden.set__("pagehide"==a.type)},window.addEventListener("pageshow",g,!1),window.addEventListener("pagehide",g,!1));t.hidden.get_changed().connect(function(b){b||(a._skipFrame=!0)});this._skipFrame=!1;this._lastUpdate=Date.now();var k=s.loadExtension("requestAnimationFrame").value;if(null!=k){var l=window.performance,j=null!=l&&s.polyfill("now",l);j?this._lastUpdate=l.now():null;var p=null,p=function(d){a.update(j?
l.now():d);k(p,b)};k(p,b)}else window.setInterval(function(){a.update(Date.now())},16);ra.info("Initialized HTML platform",["renderer",this._renderer.get_type()])},getStage:function(){return this._stage},update:function(a){var b=(a-this._lastUpdate)/1E3;this._lastUpdate=a;t.hidden._value||(this._skipFrame?this._skipFrame=!1:(this.mainLoop.update(b),this.mainLoop.render(this._renderer)))},getPointer:function(){return this._pointer},getKeyboard:function(){var a=this;if(null==this._keyboard){this._keyboard=
new N;var b=function(b){switch(b.type){case "keydown":a._keyboard.submitDown(b.keyCode)&&b.preventDefault();break;case "keyup":a._keyboard.submitUp(b.keyCode)}};this._canvas.addEventListener("keydown",b,!1);this._canvas.addEventListener("keyup",b,!1)}return this._keyboard},getX:function(a,b){return(a.clientX-b.left)*this._stage.get_width()/b.width},getY:function(a,b){return(a.clientY-b.top)*this._stage.get_height()/b.height},createRenderer:function(a){try{var b=Ya.getContextWebGL(a,{alpha:!1,depth:!1,
failIfMajorPerformanceCaveat:!0});if(null!=b)if(s.detectSlowDriver(b))null;else return new Aa(this._stage,b)}catch(d){}return new Ba(a)}};var M=function(a,b){this._value=a;this._changed=null!=b?new sa(b):null};M.__name__=!0;M.prototype={set__:function(a){var b=this._value;a!=b&&(this._value=a,null!=this._changed&&this._changed.emit(a,b));return a},get_changed:function(){null==this._changed&&(this._changed=new sa);return this._changed}};var ha=function(a,b){this._next=null;this._signal=a;this._listener=
b;this.stayInList=!0};ha.__name__=!0;ha.__interfaces__=[ma];ha.prototype={dispose:function(){null!=this._signal&&(this._signal.disconnect(this),this._signal=null)}};var B=function(a){this._head=null!=a?new ha(this,a):null;this._deferredTasks=null};B.__name__=!0;B.prototype={connectImpl:function(a,b){var d=this,e=new ha(this,a);this._head==B.DISPATCHING_SENTINEL?this.defer(function(){d.listAdd(e,b)}):this.listAdd(e,b);return e},disconnect:function(a){var b=this;this._head==B.DISPATCHING_SENTINEL?this.defer(function(){b.listRemove(a)}):
this.listRemove(a)},defer:function(a){for(var b=null,d=this._deferredTasks;null!=d;)b=d,d=d.next;a=new ob(a);null!=b?b.next=a:this._deferredTasks=a},willEmit:function(){var a=this._head;this._head=B.DISPATCHING_SENTINEL;return a},didEmit:function(a){this._head=a;a=this._deferredTasks;for(this._deferredTasks=null;null!=a;)a.fn(),a=a.next},listAdd:function(a,b){if(b)a._next=this._head,this._head=a;else{for(var d=null,e=this._head;null!=e;)d=e,e=e._next;null!=d?d._next=a:this._head=a}},listRemove:function(a){for(var b=
null,d=this._head;null!=d;){if(d==a){a=d._next;null==b?this._head=a:b._next=a;break}b=d;d=d._next}}};var sa=function(a){B.call(this,a)};sa.__name__=!0;sa.__super__=B;sa.prototype=C(B.prototype,{connect:function(a,b){null==b&&(b=!1);return this.connectImpl(a,b)},emit:function(a,b){var d=this;this._head==B.DISPATCHING_SENTINEL?this.defer(function(){d.emitImpl(a,b)}):this.emitImpl(a,b)},emitImpl:function(a,b){for(var d=this.willEmit(),e=d;null!=e;)e._listener(a,b),e.stayInList||e.dispose(),e=e._next;
this.didEmit(d)}});var y=function(a){B.call(this,a)};y.__name__=!0;y.__super__=B;y.prototype=C(B.prototype,{connect:function(a,b){null==b&&(b=!1);return this.connectImpl(a,b)},emit:function(a){var b=this;this._head==B.DISPATCHING_SENTINEL?this.defer(function(){b.emitImpl(a)}):this.emitImpl(a)},emitImpl:function(a){for(var b=this.willEmit(),d=b;null!=d;)d._listener(a),d.stayInList||d.dispose(),d=d._next;this.didEmit(b)}});var H=function(a,b){this._behavior=null;M.call(this,a,b)};H.__name__=!0;H.__super__=
M;H.prototype=C(M.prototype,{set__:function(a){this._behavior=null;return M.prototype.set__.call(this,a)},update:function(a){null!=this._behavior&&(M.prototype.set__.call(this,this._behavior.update(a)),this._behavior.isComplete()&&(this._behavior=null))}});var t=function(){};t.__name__=!0;t.init=function(){t._calledInit||(t._platform.init(),t._calledInit=!0)};var ra=function(){};ra.__name__=!0;ra.info=function(){null};ra.__super__=Wa;ra.prototype=C(Wa.prototype,{});C(A.prototype,{get_name:function(){return"SpeedAdjuster_4"},
onUpdate:function(a){0<this._realDt&&(a=this._realDt,this._realDt=0);this.scale.update(a)}});var Ca=function(){};Ca.__name__=!0;Ca.__interfaces__=[ma];var q={__ename__:!0,__constructs__:"WEBP,JXR,PNG,JPG,GIF,DDS,PVR,PKM,MP3,M4A,OPUS,OGG,WAV,Data".split(","),WEBP:["WEBP",0]};q.WEBP.__enum__=q;q.JXR=["JXR",1];q.JXR.__enum__=q;q.PNG=["PNG",2];q.PNG.__enum__=q;q.JPG=["JPG",3];q.JPG.__enum__=q;q.GIF=["GIF",4];q.GIF.__enum__=q;q.DDS=["DDS",5];q.DDS.__enum__=q;q.PVR=["PVR",6];q.PVR.__enum__=q;q.PKM=["PKM",
7];q.PKM.__enum__=q;q.MP3=["MP3",8];q.MP3.__enum__=q;q.M4A=["M4A",9];q.M4A.__enum__=q;q.OPUS=["OPUS",10];q.OPUS.__enum__=q;q.OGG=["OGG",11];q.OGG.__enum__=q;q.WAV=["WAV",12];q.WAV.__enum__=q;q.Data=["Data",13];q.Data.__enum__=q;var E={__ename__:!0,__constructs__:"Normal,Add,Multiply,Screen,Mask,Copy".split(","),Normal:["Normal",0]};E.Normal.__enum__=E;E.Add=["Add",1];E.Add.__enum__=E;E.Multiply=["Multiply",2];E.Multiply.__enum__=E;E.Screen=["Screen",3];E.Screen.__enum__=E;E.Mask=["Mask",4];E.Mask.__enum__=
E;E.Copy=["Copy",5];E.Copy.__enum__=E;var pb=function(a,b){null==b&&(b=0);null==a&&(a=0);this.x=a;this.y=b};pb.__name__=!0;var u=function(){this.blendMode=this.scissor=null;var a=this;A.call(this);this._flags|=54;this._localMatrix=new T;var b=function(){a._flags|=24};this.x=new H(0,b);this.y=new H(0,b);this.rotation=new H(0,b);this.scaleX=new H(1,b);this.scaleY=new H(1,b);this.anchorX=new H(0,b);this.anchorY=new H(0,b);this.alpha=new H(1)};u.__name__=!0;u.hitTest=function(a,b,d){var e=a._compMap.Sprite_2;
if(null!=e){if(6!=(e._flags&6))return null;e.getLocalMatrix().inverseTransform(b,d,u._scratchPoint)&&(b=u._scratchPoint.x,d=u._scratchPoint.y);var g=e.scissor;if(null!=g&&!g.contains(b,d))return null}a=u.hitTestBackwards(a.firstChild,b,d);return null!=a?a:null!=e&&e.containsLocal(b,d)?e:null};u.render=function(a,b){var d=a._compMap.Sprite_2;if(null!=d){var e=d.alpha._value;if(0==(d._flags&2)||0>=e)return;b.save();1>e&&b.multiplyAlpha(e);null!=d.blendMode&&b.setBlendMode(d.blendMode);var e=d.getLocalMatrix(),
g=e.m02,f=e.m12;0!=(d._flags&32)&&(g=Math.round(g),f=Math.round(f));b.transform(e.m00,e.m10,e.m01,e.m11,g,f);e=d.scissor;null!=e&&b.applyScissor(e.x,e.y,e.width,e.height);d.draw(b)}e=a._compMap.Director_3;if(null!=e){e=e.occludedScenes;for(g=0;g<e.length;)f=e[g],++g,u.render(f,b)}for(e=a.firstChild;null!=e;)g=e.next,u.render(e,b),e=g;null!=d&&b.restore()};u.hitTestBackwards=function(a,b,d){if(null!=a){var e=u.hitTestBackwards(a.next,b,d);return null!=e?e:u.hitTest(a,b,d)}return null};u.__super__=
A;u.prototype=C(A.prototype,{get_name:function(){return"Sprite_2"},getNaturalWidth:function(){return 0},getNaturalHeight:function(){return 0},containsLocal:function(a,b){return 0<=a&&a<this.getNaturalWidth()&&0<=b&&b<this.getNaturalHeight()},getLocalMatrix:function(){0!=(this._flags&8)&&(this._flags&=-9,this._localMatrix.compose(this.x._value,this.y._value,this.scaleX._value,this.scaleY._value,3.141592653589793*this.rotation._value/180),this._localMatrix.translate(-this.anchorX._value,-this.anchorY._value));
return this._localMatrix},setAnchor:function(a,b){this.anchorX.set__(a);this.anchorY.set__(b);return this},setXY:function(a,b){this.x.set__(a);this.y.set__(b);return this},setAlpha:function(a){this.alpha.set__(a);return this},setRotation:function(a){this.rotation.set__(a);return this},onAdded:function(){0!=(this._flags&64)&&this.connectHover()},onRemoved:function(){null!=this._hoverConnection&&(this._hoverConnection.dispose(),this._hoverConnection=null)},onUpdate:function(a){this.x.update(a);this.y.update(a);
this.rotation.update(a);this.scaleX.update(a);this.scaleY.update(a);this.alpha.update(a);this.anchorX.update(a);this.anchorY.update(a)},draw:function(){},getParentSprite:function(){if(null==this.owner)return null;for(var a=this.owner.parent;null!=a;){var b=a._compMap.Sprite_2;if(null!=b)return b;a=a.parent}return null},connectHover:function(){var a=this;null==this._hoverConnection&&(this._hoverConnection=t._platform.getPointer().move.connect(function(b){for(var d=b.hit;null!=d;){if(d==a)return;d=
d.getParentSprite()}null!=a._pointerOut&&0!=(a._flags&64)&&a._pointerOut.emit(b);a._flags&=-65;a._hoverConnection.dispose();a._hoverConnection=null}))},set_pointerEnabled:function(a){this._flags=Da.set(this._flags,4,a);return a},set_pixelSnapping:function(a){this._flags=Da.set(this._flags,32,a);return a},onPointerDown:function(a){this.onHover(a);null!=this._pointerDown&&this._pointerDown.emit(a)},onPointerMove:function(a){this.onHover(a);null!=this._pointerMove&&this._pointerMove.emit(a)},onHover:function(a){if(0==
(this._flags&64)&&(this._flags|=64,null!=this._pointerIn||null!=this._pointerOut))null!=this._pointerIn&&this._pointerIn.emit(a),this.connectHover()},onPointerUp:function(a){switch(a.source[1]){case 1:null!=this._pointerOut&&0!=(this._flags&64)&&this._pointerOut.emit(a),this._flags&=-65,null!=this._hoverConnection&&(this._hoverConnection.dispose(),this._hoverConnection=null)}null!=this._pointerUp&&this._pointerUp.emit(a)}});var na=function(a,b,d){u.call(this);this.color=a;this.width=new H(b);this.height=
new H(d)};na.__name__=!0;na.__super__=u;na.prototype=C(u.prototype,{draw:function(a){a.fillRect(this.color,0,0,this.width._value,this.height._value)},getNaturalWidth:function(){return this.width._value},getNaturalHeight:function(){return this.height._value},onUpdate:function(a){u.prototype.onUpdate.call(this,a);this.width.update(a);this.height.update(a)}});var qb=function(){};qb.__name__=!0;var aa={__ename__:!0,__constructs__:["Portrait","Landscape"],Portrait:["Portrait",0]};aa.Portrait.__enum__=
aa;aa.Landscape=["Landscape",1];aa.Landscape.__enum__=aa;var Za=function(){};Za.__name__=!0;Za.__interfaces__=[Ca];var $a=function(){};$a.__name__=!0;$a.__interfaces__=[Za];var c={__ename__:!0,__constructs__:"A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,Number0,Number1,Number2,Number3,Number4,Number5,Number6,Number7,Number8,Number9,Numpad0,Numpad1,Numpad2,Numpad3,Numpad4,Numpad5,Numpad6,Numpad7,Numpad8,Numpad9,NumpadAdd,NumpadDecimal,NumpadDivide,NumpadEnter,NumpadMultiply,NumpadSubtract,F1,F2,F3,F4,F5,F6,F7,F8,F9,F10,F11,F12,F13,F14,F15,Left,Up,Right,Down,Alt,Backquote,Backslash,Backspace,CapsLock,Comma,Command,Control,Delete,End,Enter,Equals,Escape,Home,Insert,LeftBracket,Minus,PageDown,PageUp,Period,Quote,RightBracket,Semicolon,Shift,Slash,Space,Tab,Menu,Search,Unknown".split(","),
A:["A",0]};c.A.__enum__=c;c.B=["B",1];c.B.__enum__=c;c.C=["C",2];c.C.__enum__=c;c.D=["D",3];c.D.__enum__=c;c.E=["E",4];c.E.__enum__=c;c.F=["F",5];c.F.__enum__=c;c.G=["G",6];c.G.__enum__=c;c.H=["H",7];c.H.__enum__=c;c.I=["I",8];c.I.__enum__=c;c.J=["J",9];c.J.__enum__=c;c.K=["K",10];c.K.__enum__=c;c.L=["L",11];c.L.__enum__=c;c.M=["M",12];c.M.__enum__=c;c.N=["N",13];c.N.__enum__=c;c.O=["O",14];c.O.__enum__=c;c.P=["P",15];c.P.__enum__=c;c.Q=["Q",16];c.Q.__enum__=c;c.R=["R",17];c.R.__enum__=c;c.S=["S",
18];c.S.__enum__=c;c.T=["T",19];c.T.__enum__=c;c.U=["U",20];c.U.__enum__=c;c.V=["V",21];c.V.__enum__=c;c.W=["W",22];c.W.__enum__=c;c.X=["X",23];c.X.__enum__=c;c.Y=["Y",24];c.Y.__enum__=c;c.Z=["Z",25];c.Z.__enum__=c;c.Number0=["Number0",26];c.Number0.__enum__=c;c.Number1=["Number1",27];c.Number1.__enum__=c;c.Number2=["Number2",28];c.Number2.__enum__=c;c.Number3=["Number3",29];c.Number3.__enum__=c;c.Number4=["Number4",30];c.Number4.__enum__=c;c.Number5=["Number5",31];c.Number5.__enum__=c;c.Number6=
["Number6",32];c.Number6.__enum__=c;c.Number7=["Number7",33];c.Number7.__enum__=c;c.Number8=["Number8",34];c.Number8.__enum__=c;c.Number9=["Number9",35];c.Number9.__enum__=c;c.Numpad0=["Numpad0",36];c.Numpad0.__enum__=c;c.Numpad1=["Numpad1",37];c.Numpad1.__enum__=c;c.Numpad2=["Numpad2",38];c.Numpad2.__enum__=c;c.Numpad3=["Numpad3",39];c.Numpad3.__enum__=c;c.Numpad4=["Numpad4",40];c.Numpad4.__enum__=c;c.Numpad5=["Numpad5",41];c.Numpad5.__enum__=c;c.Numpad6=["Numpad6",42];c.Numpad6.__enum__=c;c.Numpad7=
["Numpad7",43];c.Numpad7.__enum__=c;c.Numpad8=["Numpad8",44];c.Numpad8.__enum__=c;c.Numpad9=["Numpad9",45];c.Numpad9.__enum__=c;c.NumpadAdd=["NumpadAdd",46];c.NumpadAdd.__enum__=c;c.NumpadDecimal=["NumpadDecimal",47];c.NumpadDecimal.__enum__=c;c.NumpadDivide=["NumpadDivide",48];c.NumpadDivide.__enum__=c;c.NumpadEnter=["NumpadEnter",49];c.NumpadEnter.__enum__=c;c.NumpadMultiply=["NumpadMultiply",50];c.NumpadMultiply.__enum__=c;c.NumpadSubtract=["NumpadSubtract",51];c.NumpadSubtract.__enum__=c;c.F1=
["F1",52];c.F1.__enum__=c;c.F2=["F2",53];c.F2.__enum__=c;c.F3=["F3",54];c.F3.__enum__=c;c.F4=["F4",55];c.F4.__enum__=c;c.F5=["F5",56];c.F5.__enum__=c;c.F6=["F6",57];c.F6.__enum__=c;c.F7=["F7",58];c.F7.__enum__=c;c.F8=["F8",59];c.F8.__enum__=c;c.F9=["F9",60];c.F9.__enum__=c;c.F10=["F10",61];c.F10.__enum__=c;c.F11=["F11",62];c.F11.__enum__=c;c.F12=["F12",63];c.F12.__enum__=c;c.F13=["F13",64];c.F13.__enum__=c;c.F14=["F14",65];c.F14.__enum__=c;c.F15=["F15",66];c.F15.__enum__=c;c.Left=["Left",67];c.Left.__enum__=
c;c.Up=["Up",68];c.Up.__enum__=c;c.Right=["Right",69];c.Right.__enum__=c;c.Down=["Down",70];c.Down.__enum__=c;c.Alt=["Alt",71];c.Alt.__enum__=c;c.Backquote=["Backquote",72];c.Backquote.__enum__=c;c.Backslash=["Backslash",73];c.Backslash.__enum__=c;c.Backspace=["Backspace",74];c.Backspace.__enum__=c;c.CapsLock=["CapsLock",75];c.CapsLock.__enum__=c;c.Comma=["Comma",76];c.Comma.__enum__=c;c.Command=["Command",77];c.Command.__enum__=c;c.Control=["Control",78];c.Control.__enum__=c;c.Delete=["Delete",79];
c.Delete.__enum__=c;c.End=["End",80];c.End.__enum__=c;c.Enter=["Enter",81];c.Enter.__enum__=c;c.Equals=["Equals",82];c.Equals.__enum__=c;c.Escape=["Escape",83];c.Escape.__enum__=c;c.Home=["Home",84];c.Home.__enum__=c;c.Insert=["Insert",85];c.Insert.__enum__=c;c.LeftBracket=["LeftBracket",86];c.LeftBracket.__enum__=c;c.Minus=["Minus",87];c.Minus.__enum__=c;c.PageDown=["PageDown",88];c.PageDown.__enum__=c;c.PageUp=["PageUp",89];c.PageUp.__enum__=c;c.Period=["Period",90];c.Period.__enum__=c;c.Quote=
["Quote",91];c.Quote.__enum__=c;c.RightBracket=["RightBracket",92];c.RightBracket.__enum__=c;c.Semicolon=["Semicolon",93];c.Semicolon.__enum__=c;c.Shift=["Shift",94];c.Shift.__enum__=c;c.Slash=["Slash",95];c.Slash.__enum__=c;c.Space=["Space",96];c.Space.__enum__=c;c.Tab=["Tab",97];c.Tab.__enum__=c;c.Menu=["Menu",98];c.Menu.__enum__=c;c.Search=["Search",99];c.Search.__enum__=c;c.Unknown=function(a){a=["Unknown",100,a];a.__enum__=c;return a};var ab=function(){this.init(0,null)};ab.__name__=!0;ab.prototype=
{init:function(a,b){this.id=a;this.key=b}};var J={__ename__:!0,__constructs__:["Left","Middle","Right","Unknown"],Left:["Left",0]};J.Left.__enum__=J;J.Middle=["Middle",1];J.Middle.__enum__=J;J.Right=["Right",2];J.Right.__enum__=J;J.Unknown=function(a){a=["Unknown",3,a];a.__enum__=J;return a};var X={__ename__:!0,__constructs__:["Default","Button","None"],Default:["Default",0]};X.Default.__enum__=X;X.Button=["Button",1];X.Button.__enum__=X;X.None=["None",2];X.None.__enum__=X;var bb=function(){this.init(0,
0,0,null)};bb.__name__=!0;bb.prototype={init:function(a,b,d,e){this.id=a;this.viewX=b;this.viewY=d;this.button=e}};var ia={__ename__:!0,__constructs__:["Mouse","Touch"]};ia.Mouse=function(a){a=["Mouse",0,a];a.__enum__=ia;return a};ia.Touch=function(a){a=["Touch",1,a];a.__enum__=ia;return a};var cb=function(){this.init(0,0,0,null,null)};cb.__name__=!0;cb.prototype={init:function(a,b,d,e,g){this.id=a;this.viewX=b;this.viewY=d;this.hit=e;this.source=g;this._stopped=!1}};var db=function(a){this.id=a;
this._source=ia.Touch(this)};db.__name__=!0;db.prototype={init:function(a,b){this.viewX=a;this.viewY=b}};var ba=function(){};ba.__name__=!0;ba.max=function(a,b){return a>b?a:b};ba.min=function(a,b){return a<b?a:b};var T=function(){this.identity()};T.__name__=!0;T.multiply=function(a,b,d){null==d&&(d=new T);var e=a.m00*b.m00+a.m01*b.m10,g=a.m00*b.m01+a.m01*b.m11,f=a.m00*b.m02+a.m01*b.m12+a.m02;d.m00=e;d.m01=g;d.m02=f;e=a.m10*b.m00+a.m11*b.m10;g=a.m10*b.m01+a.m11*b.m11;f=a.m10*b.m02+a.m11*b.m12+a.m12;
d.m10=e;d.m11=g;d.m12=f;return d};T.prototype={set:function(a,b,d,e,g,f){this.m00=a;this.m01=d;this.m02=g;this.m10=b;this.m11=e;this.m12=f},identity:function(){this.set(1,0,0,1,0,0)},compose:function(a,b,d,e,g){var f=Math.sin(g),g=Math.cos(g);this.set(g*d,f*d,-f*e,g*e,a,b)},translate:function(a,b){this.m02+=this.m00*a+this.m01*b;this.m12+=this.m11*b+this.m10*a},invert:function(){var a=this.determinant();if(0==a)return!1;this.set(this.m11/a,-this.m01/a,-this.m10/a,this.m00/a,(this.m01*this.m12-this.m11*
this.m02)/a,(this.m10*this.m02-this.m00*this.m12)/a);return!0},transformArray:function(a,b,d){for(var e=0;e<b;){var g=a[e],f=a[e+1];d[e++]=g*this.m00+f*this.m01+this.m02;d[e++]=g*this.m10+f*this.m11+this.m12}},determinant:function(){return this.m00*this.m11-this.m01*this.m10},inverseTransform:function(a,b,d){var e=this.determinant();if(0==e)return!1;a-=this.m02;b-=this.m12;d.x=(a*this.m11-b*this.m01)/e;d.y=(b*this.m00-a*this.m10)/e;return!0},clone:function(a){null==a&&(a=new T);a.set(this.m00,this.m10,
this.m01,this.m11,this.m02,this.m12);return a}};var Ea=function(a,b,d,e){null==e&&(e=0);null==d&&(d=0);null==b&&(b=0);null==a&&(a=0);this.set(a,b,d,e)};Ea.__name__=!0;Ea.prototype={set:function(a,b,d,e){this.x=a;this.y=b;this.width=d;this.height=e},contains:function(a,b){a-=this.x;if(0<=this.width){if(0>a||a>this.width)return!1}else if(0<a||a<this.width)return!1;b-=this.y;if(0<=this.height){if(0>b||b>this.height)return!1}else if(0<b||b<this.height)return!1;return!0},clone:function(a){null==a&&(a=
new Ea);a.set(this.x,this.y,this.width,this.height);return a},equals:function(a){return this.x==a.x&&this.y==a.y&&this.width==a.width&&this.height==a.height}};var ta=function(){};ta.__name__=!0;ta.__interfaces__=[Ca];var rb=function(){};rb.__name__=!0;var N=function(){this.down=new y;this.up=new y;this.backButton=new ua;this._keyStates=new ja};N.__name__=!0;N.__interfaces__=[rb];N.prototype={submitDown:function(a){if(16777238==a)return null!=this.backButton._head?(this.backButton.emit(),!0):!1;this._keyStates.exists(a)||
(this._keyStates.set(a,!0),N._sharedEvent.init(N._sharedEvent.id+1,Fa.toKey(a)),this.down.emit(N._sharedEvent));return!0},submitUp:function(a){this._keyStates.exists(a)&&(this._keyStates.remove(a),N._sharedEvent.init(N._sharedEvent.id+1,Fa.toKey(a)),this.up.emit(N._sharedEvent))}};var sb=function(){};sb.__name__=!0;var L=function(a){this._pointer=a;this._source=ia.Mouse(L._sharedEvent);this.down=new y;this.move=new y;this.up=new y;this.scroll=new y;this._y=this._x=0;this._cursor=X.Default;this._buttonStates=
new ja};L.__name__=!0;L.__interfaces__=[sb];L.prototype={submitDown:function(a,b,d){this._buttonStates.exists(d)||(this._buttonStates.set(d,!0),this.prepare(a,b,Ga.toButton(d)),this._pointer.submitDown(a,b,this._source),this.down.emit(L._sharedEvent))},submitMove:function(a,b){this.prepare(a,b,null);this._pointer.submitMove(a,b,this._source);this.move.emit(L._sharedEvent)},submitUp:function(a,b,d){this._buttonStates.exists(d)&&(this._buttonStates.remove(d),this.prepare(a,b,Ga.toButton(d)),this._pointer.submitUp(a,
b,this._source),this.up.emit(L._sharedEvent))},submitScroll:function(a,b,d){this._x=a;this._y=b;if(null==this.scroll._head)return!1;this.scroll.emit(d);return!0},prepare:function(a,b,d){this._x=a;this._y=b;L._sharedEvent.init(L._sharedEvent.id+1,a,b,d)}};var tb=function(){};tb.__name__=!0;var G=function(a,b,d){null==d&&(d=!1);null==b&&(b=0);null==a&&(a=0);this.down=new y;this.move=new y;this.up=new y;this._x=a;this._y=b;this._isDown=d};G.__name__=!0;G.__interfaces__=[tb];G.prototype={get_x:function(){return this._x},
get_y:function(){return this._y},submitDown:function(a,b,d){if(!this._isDown){this.submitMove(a,b,d);this._isDown=!0;var e=[],g=u.hitTest(t.root,a,b);if(null!=g){var f=g.owner;do{var c=f._compMap.Sprite_2;null!=c&&e.push(c);f=f.parent}while(null!=f)}this.prepare(a,b,g,d);for(a=0;a<e.length;)if(b=e[a],++a,b.onPointerDown(G._sharedEvent),G._sharedEvent._stopped)return;this.down.emit(G._sharedEvent)}},submitMove:function(a,b,d){if(!(a==this._x&&b==this._y)){var e=[],g=u.hitTest(t.root,a,b);if(null!=
g){var f=g.owner;do{var c=f._compMap.Sprite_2;null!=c&&e.push(c);f=f.parent}while(null!=f)}this.prepare(a,b,g,d);for(a=0;a<e.length;)if(b=e[a],++a,b.onPointerMove(G._sharedEvent),G._sharedEvent._stopped)return;this.move.emit(G._sharedEvent)}},submitUp:function(a,b,d){if(this._isDown){this.submitMove(a,b,d);this._isDown=!1;var e=[],g=u.hitTest(t.root,a,b);if(null!=g){var f=g.owner;do{var c=f._compMap.Sprite_2;null!=c&&e.push(c);f=f.parent}while(null!=f)}this.prepare(a,b,g,d);for(a=0;a<e.length;)if(b=
e[a],++a,b.onPointerUp(G._sharedEvent),G._sharedEvent._stopped)return;this.up.emit(G._sharedEvent)}},prepare:function(a,b,d,e){this._x=a;this._y=b;G._sharedEvent.init(G._sharedEvent.id+1,a,b,d,e)}};var va=function(){this.rootX=this.rootY=0};va.__name__=!0;va.__interfaces__=[$a];va.__super__=ta;va.prototype=C(ta.prototype,{});var eb=function(){};eb.__name__=!0;var za=function(a,b){null==b&&(b=4);this._pointer=a;this._maxPoints=b;this._pointMap=new ja;this._points=[];this.down=new y;this.move=new y;
this.up=new y};za.__name__=!0;za.__interfaces__=[eb];za.prototype={submitDown:function(a,b,d){if(!this._pointMap.exists(a)){var e=new db(a);e.init(b,d);this._pointMap.set(a,e);this._points.push(e);null==this._pointerTouch&&(this._pointerTouch=e,this._pointer.submitDown(b,d,e._source));this.down.emit(e)}},submitMove:function(a,b,d){a=this._pointMap.get(a);null!=a&&(a.init(b,d),this._pointerTouch==a&&this._pointer.submitMove(b,d,a._source),this.move.emit(a))},submitUp:function(a,b,d){var e=this._pointMap.get(a);
null!=e&&(e.init(b,d),this._pointMap.remove(a),W.remove(this._points,e),this._pointerTouch==e&&(this._pointerTouch=null,this._pointer.submitUp(b,d,e._source)),this.up.emit(e))}};var Xa=function(){this.down=new y;this.move=new y;this.up=new y};Xa.__name__=!0;Xa.__interfaces__=[eb];var Ha=function(){};Ha.__name__=!0;Ha.__interfaces__=[qb];var ub=function(){};ub.__name__=!0;var Ia=function(){};Ia.__name__=!0;Ia.__interfaces__=[ub];var Fa=function(){};Fa.__name__=!0;Fa.toKey=function(a){switch(a){case 65:return c.A;
case 66:return c.B;case 67:return c.C;case 68:return c.D;case 69:return c.E;case 70:return c.F;case 71:return c.G;case 72:return c.H;case 73:return c.I;case 74:return c.J;case 75:return c.K;case 76:return c.L;case 77:return c.M;case 78:return c.N;case 79:return c.O;case 80:return c.P;case 81:return c.Q;case 82:return c.R;case 83:return c.S;case 84:return c.T;case 85:return c.U;case 86:return c.V;case 87:return c.W;case 88:return c.X;case 89:return c.Y;case 90:return c.Z;case 48:return c.Number0;case 49:return c.Number1;
case 50:return c.Number2;case 51:return c.Number3;case 52:return c.Number4;case 53:return c.Number5;case 54:return c.Number6;case 55:return c.Number7;case 56:return c.Number8;case 57:return c.Number9;case 96:return c.Numpad0;case 97:return c.Numpad1;case 98:return c.Numpad2;case 99:return c.Numpad3;case 100:return c.Numpad4;case 101:return c.Numpad5;case 102:return c.Numpad6;case 103:return c.Numpad7;case 104:return c.Numpad8;case 105:return c.Numpad9;case 107:return c.NumpadAdd;case 110:return c.NumpadDecimal;
case 111:return c.NumpadDivide;case 108:return c.NumpadEnter;case 106:return c.NumpadMultiply;case 109:return c.NumpadSubtract;case 112:return c.F1;case 113:return c.F2;case 114:return c.F3;case 115:return c.F4;case 116:return c.F5;case 117:return c.F6;case 118:return c.F7;case 119:return c.F8;case 120:return c.F9;case 121:return c.F10;case 122:return c.F11;case 123:return c.F12;case 37:return c.Left;case 38:return c.Up;case 39:return c.Right;case 40:return c.Down;case 18:return c.Alt;case 192:return c.Backquote;
case 220:return c.Backslash;case 8:return c.Backspace;case 20:return c.CapsLock;case 188:return c.Comma;case 15:return c.Command;case 17:return c.Control;case 46:return c.Delete;case 35:return c.End;case 13:return c.Enter;case 187:return c.Equals;case 27:return c.Escape;case 36:return c.Home;case 45:return c.Insert;case 219:return c.LeftBracket;case 189:return c.Minus;case 34:return c.PageDown;case 33:return c.PageUp;case 190:return c.Period;case 222:return c.Quote;case 221:return c.RightBracket;
case 186:return c.Semicolon;case 16:return c.Shift;case 191:return c.Slash;case 32:return c.Space;case 9:return c.Tab;case 16777234:return c.Menu;case 16777247:return c.Search}return c.Unknown(a)};var ga=function(){this._tickables=[]};ga.__name__=!0;ga.updateEntity=function(a,b){var d=a._compMap.SpeedAdjuster_4;if(null!=d&&(d._realDt=b,b*=d.scale._value,0>=b)){d.onUpdate(b);return}for(d=a.firstComponent;null!=d;){var e=d.next;0==(d._flags&1)&&(d._flags|=1,d.onStart());d.onUpdate(b);d=e}for(d=a.firstChild;null!=
d;)e=d.next,ga.updateEntity(d,b),d=e};ga.prototype={update:function(a){if(!(0>=a)){1<a&&(a=1);for(var b=0;b<this._tickables.length;){var d=this._tickables[b];null==d||d.update(a)?this._tickables.splice(b,1):++b}t.volume.update(a);ga.updateEntity(t.root,a)}},render:function(a){var b=a.graphics;null!=b&&(a.willRender(),u.render(t.root,b),a.didRender())}};var Ga=function(){};Ga.__name__=!0;Ga.toButton=function(a){switch(a){case 0:return J.Left;case 1:return J.Middle;case 2:return J.Right}return J.Unknown(a)};
var Ja=function(a,b){this._firstDraw=!1;this._canvasCtx=a.getContext("2d",{alpha:b})};Ja.__name__=!0;Ja.__interfaces__=[Ha];Ja.prototype={save:function(){this._canvasCtx.save()},transform:function(a,b,d,e,g,f){this._canvasCtx.transform(a,b,d,e,g,f)},restore:function(){this._canvasCtx.restore()},fillRect:function(a,b,d,e,g){if(this._firstDraw)this._firstDraw=!1,this._canvasCtx.globalCompositeOperation="copy",this.fillRect(a,b,d,e,g),this._canvasCtx.globalCompositeOperation="source-over";else{for(a=
(16777215&a).toString(16);6>a.length;)a="0"+S.string(a);this._canvasCtx.fillStyle="#"+S.string(a);this._canvasCtx.fillRect(b|0,d|0,e|0,g|0)}},multiplyAlpha:function(a){this._canvasCtx.globalAlpha*=a},setBlendMode:function(a){var b;switch(a[1]){case 0:b="source-over";break;case 1:b="lighter";break;case 2:b="multiply";break;case 3:b="screen";break;case 4:b="destination-in";break;case 5:b="copy"}this._canvasCtx.globalCompositeOperation=b},applyScissor:function(a,b,d,e){this._canvasCtx.beginPath();this._canvasCtx.rect(a|
0,b|0,d|0,e|0);this._canvasCtx.clip()},willRender:function(){this._firstDraw=!0},didRender:function(){},onResize:function(){}};var Ba=function(a){this.graphics=new Ja(a,!1);this._hasGPU=new M(!0)};Ba.__name__=!0;Ba.__interfaces__=[Ia];Ba.prototype={get_type:function(){return U.Canvas},willRender:function(){this.graphics.willRender()},didRender:function(){this.graphics.didRender()}};var ya=function(a,b){L.call(this,a);this._canvas=b};ya.__name__=!0;ya.__super__=L;ya.prototype=C(L.prototype,{});var vb=
function(){};vb.__name__=!0;var fa=function(a){var b=this;this._canvas=a;this.resize=new ua;this.scaleFactor=fa.computeScaleFactor();1!=this.scaleFactor&&(s.setVendorStyle(this._canvas,"transform-origin","top left"),s.setVendorStyle(this._canvas,"transform","scale("+1/this.scaleFactor+")"));s.SHOULD_HIDE_MOBILE_BROWSER&&(window.addEventListener("orientationchange",function(){s.callLater(Q(b,b.hideMobileBrowser),200)},!1),this.hideMobileBrowser());window.addEventListener("resize",Q(this,this.onWindowResize),
!1);this.onWindowResize(null);this.orientation=new M(null);null!=window.orientation&&(window.addEventListener("orientationchange",Q(this,this.onOrientationChange),!1),this.onOrientationChange(null));this.fullscreen=new M(!1);s.addVendorListener(window.document,"fullscreenchange",function(){b.updateFullscreen()},!1);this.updateFullscreen()};fa.__name__=!0;fa.__interfaces__=[vb];fa.computeScaleFactor=function(){var a=window.devicePixelRatio;null==a&&(a=1);var b=window.document.createElement("canvas").getContext("2d"),
b=s.loadExtension("backingStorePixelRatio",b).value;null==b&&(b=1);a/=b;b=window.screen.height;return 1136<a*window.screen.width||1136<a*b?1:a};fa.prototype={get_width:function(){return this._canvas.width},get_height:function(){return this._canvas.height},onWindowResize:function(){var a=this._canvas.parentElement.getBoundingClientRect();this.resizeCanvas(a.width,a.height)},resizeCanvas:function(a,b){var d=this.scaleFactor*a,e=this.scaleFactor*b;if(this._canvas.width==d&&this._canvas.height==e)return!1;
this._canvas.width=d|0;this._canvas.height=e|0;this.resize.emit();return!0},hideMobileBrowser:function(){var a=this,b=window.document.documentElement.style;b.height=window.innerHeight+100+"px";b.width=window.innerWidth+"px";b.overflow="visible";s.callLater(function(){s.hideMobileBrowser();s.callLater(function(){b.height=window.innerHeight+"px";a.onWindowResize(null)},100)})},onOrientationChange:function(){this.orientation.set__(s.orientation(window.orientation))},updateFullscreen:function(){this.fullscreen.set__(!0==
s.loadFirstExtension(["fullscreen","fullScreen","isFullScreen"],window.document).value)}};var s=function(){};s.__name__=!0;s.callLater=function(a,b){null==b&&(b=0);window.setTimeout(a,b)};s.hideMobileBrowser=function(){window.scrollTo(1,0)};s.loadExtension=function(a,b){null==b&&(b=window);var d=qa.field(b,a);if(null!=d)return{prefix:"",field:a,value:d};for(var d=a.charAt(0).toUpperCase()+W.substr(a,1,null),e=0,g=s.VENDOR_PREFIXES;e<g.length;){var f=g[e];++e;var c=f+d,h=qa.field(b,c);if(null!=h)return{prefix:f,
field:c,value:h}}return{prefix:null,field:null,value:null}};s.loadFirstExtension=function(a,b){for(var d=0;d<a.length;){var e=a[d];++d;e=s.loadExtension(e,b);if(null!=e.field)return e}return{prefix:null,field:null,value:null}};s.polyfill=function(a,b){null==b&&(b=window);var d=s.loadExtension(a,b).value;if(null==d)return!1;b[a]=d;return!0};s.setVendorStyle=function(a,b,d){for(var a=a.style,e=0,g=s.VENDOR_PREFIXES;e<g.length;){var f=g[e];++e;a.setProperty("-"+f+"-"+b,d)}a.setProperty(b,d)};s.addVendorListener=
function(a,b,d,e){for(var g=0,f=s.VENDOR_PREFIXES;g<f.length;){var c=f[g];++g;a.addEventListener(c+b,d,e)}a.addEventListener(b,d,e)};s.orientation=function(a){switch(a){case -90:case 90:return aa.Landscape;default:return aa.Portrait}};s.detectSlowDriver=function(a){if(0<=window.navigator.platform.indexOf("Win")&&null!=window.chrome){for(var b=0,a=a.getSupportedExtensions();b<a.length;){var d=a[b];++b;if(0<=d.indexOf("WEBGL_compressed_texture"))return!1}return!0}return!1};s.fixAndroidMath=function(){if(0<=
window.navigator.userAgent.indexOf("Linux; U; Android 4")){var a=Math.sin,b=Math.cos;Math.sin=function(b){return 0==b?0:a(b)};Math.cos=function(a){return 0==a?1:b(a)}}};var fb=function(a){this._quads=this._maxQuads=this._dataOffset=this._backbufferWidth=this._backbufferHeight=0;this._pendingSetScissor=!1;this._lastBlendMode=this._lastRenderTarget=this._lastShader=this._lastTexture=this._lastScissor=this._currentBlendMode=this._currentShader=this._currentTexture=this._currentRenderTarget=null;this._gl=
a;a.clearColor(0,0,0,0);a.enable(3042);a.pixelStorei(37441,1);this._vertexBuffer=a.createBuffer();a.bindBuffer(34962,this._vertexBuffer);this._quadIndexBuffer=a.createBuffer();a.bindBuffer(34963,this._quadIndexBuffer);this._drawTextureShader=new Ka(a);this._drawPatternShader=new La(a);this._fillRectShader=new Ma(a);this.resize(16)};fb.__name__=!0;fb.prototype={resizeBackbuffer:function(a,b){this._gl.viewport(0,0,a,b);this._backbufferWidth=a;this._backbufferHeight=b},willRender:function(){},didRender:function(){this.flush()},
prepareFillRect:function(a,b,d){return this.prepareQuad(6,a,b,d,this._fillRectShader)},prepareQuad:function(a,b,d,e,g){b!=this._lastRenderTarget&&(this.flush(),this._lastRenderTarget=b);d!=this._lastBlendMode&&(this.flush(),this._lastBlendMode=d);g!=this._lastShader&&(this.flush(),this._lastShader=g);if(null!=e||null!=this._lastScissor)if(null==e||null==this._lastScissor||!this._lastScissor.equals(e))this.flush(),this._lastScissor=null!=e?e.clone(this._lastScissor):null,this._pendingSetScissor=!0;
this._quads>=this._maxQuads&&this.resize(2*this._maxQuads);++this._quads;b=this._dataOffset;this._dataOffset+=4*a;return b},flush:function(){if(!(1>this._quads)){this._lastRenderTarget!=this._currentRenderTarget&&this.bindRenderTarget(this._lastRenderTarget);if(this._lastBlendMode!=this._currentBlendMode){switch(this._lastBlendMode[1]){case 0:this._gl.blendFunc(1,771);break;case 1:this._gl.blendFunc(1,1);break;case 2:this._gl.blendFunc(774,771);break;case 3:this._gl.blendFunc(1,769);break;case 4:this._gl.blendFunc(0,
770);break;case 5:this._gl.blendFunc(1,0)}this._currentBlendMode=this._lastBlendMode}this._pendingSetScissor&&(null!=this._lastScissor?(this._gl.enable(3089),this._gl.scissor(this._lastScissor.x|0,this._lastScissor.y|0,this._lastScissor.width|0,this._lastScissor.height|0)):this._gl.disable(3089),this._pendingSetScissor=!1);this._lastTexture!=this._currentTexture&&(this._gl.bindTexture(3553,this._lastTexture.root.nativeTexture),this._currentTexture=this._lastTexture);this._lastShader!=this._currentShader&&
(this._lastShader.useProgram(),this._lastShader.prepare(),this._currentShader=this._lastShader);if(this._lastShader==this._drawPatternShader){var a=this._lastTexture,b=a.root;this._drawPatternShader.setRegion(a.rootX/b.width,a.rootY/b.height,a._width/b.width,a._height/b.height)}this._gl.bufferData(34962,this.data.subarray(0,this._dataOffset),35040);this._gl.drawElements(4,6*this._quads,5123,0);this._dataOffset=this._quads=0}},resize:function(a){this.flush();if(!(1024<a)){this._maxQuads=a;this.data=
new Float32Array(24*a);this._gl.bufferData(34962,4*this.data.length,35040);for(var b=new Uint16Array(6*a),d=0;d<a;){var e=d++;b[6*e]=4*e;b[6*e+1]=4*e+1;b[6*e+2]=4*e+2;b[6*e+3]=4*e+2;b[6*e+4]=4*e+3;b[6*e+5]=4*e}this._gl.bufferData(34963,b,35044)}},bindRenderTarget:function(a){null!=a?(this._gl.bindFramebuffer(36160,a.framebuffer),this._gl.viewport(0,0,a.width,a.height)):(this._gl.bindFramebuffer(36160,null),this._gl.viewport(0,0,this._backbufferWidth,this._backbufferHeight));this._lastRenderTarget=
this._currentRenderTarget=a}};var O=function(a,b){this._inverseProjection=this._stateList=null;null==O._scratchQuadArray&&(O._scratchQuadArray=new Float32Array(8));this._batcher=a;this._renderTarget=b};O.__name__=!0;O.__interfaces__=[Ha];O.prototype={save:function(){var a=this._stateList,b=this._stateList.next;null==b&&(b=new Na,b.prev=a,a.next=b);a.matrix.clone(b.matrix);b.alpha=a.alpha;b.blendMode=a.blendMode;b.scissor=null!=a.scissor?a.scissor.clone(b.scissor):null;this._stateList=b},transform:function(a,
b,d,e,g,f){var c=this._stateList;O._scratchMatrix.set(a,b,d,e,g,f);T.multiply(c.matrix,O._scratchMatrix,c.matrix)},restore:function(){this._stateList=this._stateList.prev},fillRect:function(a,b,d,e,g){var f=this._stateList,b=this.transformQuad(b,d,e,g),d=(a&16711680)/16711680,e=(a&65280)/65280,a=(a&255)/255,g=f.alpha,f=this._batcher.prepareFillRect(this._renderTarget,f.blendMode,f.scissor),c=this._batcher.data;c[f]=b[0];c[++f]=b[1];c[++f]=d;c[++f]=e;c[++f]=a;c[++f]=g;c[++f]=b[2];c[++f]=b[3];c[++f]=
d;c[++f]=e;c[++f]=a;c[++f]=g;c[++f]=b[4];c[++f]=b[5];c[++f]=d;c[++f]=e;c[++f]=a;c[++f]=g;c[++f]=b[6];c[++f]=b[7];c[++f]=d;c[++f]=e;c[++f]=a;c[++f]=g},multiplyAlpha:function(a){this._stateList.alpha*=a},setBlendMode:function(a){this._stateList.blendMode=a},applyScissor:function(a,b,d,e){var g=this._stateList,f=O._scratchQuadArray;f[0]=a;f[1]=b;f[2]=a+d;f[3]=b+e;g.matrix.transformArray(f,4,f);this._inverseProjection.transformArray(f,4,f);a=f[0];b=f[1];d=f[2]-a;e=f[3]-b;0>d&&(a+=d,d=-d);0>e&&(b+=e,e=
-e);g.applyScissor(a,b,d,e)},willRender:function(){this._batcher.willRender()},didRender:function(){this._batcher.didRender()},onResize:function(a,b){this._stateList=new Na;var d;d=null!=this._renderTarget?-1:1;this._stateList.matrix.set(2/a,0,0,-2*d/b,-1,d);this._inverseProjection=new T;this._inverseProjection.set(2/a,0,0,2/b,-1,-1);this._inverseProjection.invert()},transformQuad:function(a,b,d,e){var d=a+d,e=b+e,g=O._scratchQuadArray;g[0]=a;g[1]=b;g[2]=d;g[3]=b;g[4]=d;g[5]=e;g[6]=a;g[7]=e;this._stateList.matrix.transformArray(g,
8,g);return g}};var Na=function(){this.scissor=this.prev=this.next=null;this.matrix=new T;this.alpha=1;this.blendMode=E.Normal};Na.__name__=!0;Na.prototype={applyScissor:function(a,b,d,e){if(null!=this.scissor)var g=ba.max(this.scissor.x,a),f=ba.max(this.scissor.y,b),d=ba.min(this.scissor.x+this.scissor.width,a+d),e=ba.min(this.scissor.y+this.scissor.height,b+e),a=g,b=f,d=d-g,e=e-f;else this.scissor=new Ea;this.scissor.set(Math.round(a),Math.round(b),Math.round(d),Math.round(e))}};var Aa=function(a,
b){var d=this;this._hasGPU=new M(!0);this.gl=b;b.canvas.addEventListener("webglcontextlost",function(a){a.preventDefault();d._hasGPU.set__(!1)},!1);b.canvas.addEventListener("webglcontextrestore",function(){d.init();d._hasGPU.set__(!0)},!1);a.resize.connect(Q(this,this.onResize));this.init()};Aa.__name__=!0;Aa.__interfaces__=[Ia];Aa.prototype={get_type:function(){return U.WebGL},willRender:function(){this.graphics.willRender()},didRender:function(){this.graphics.didRender()},onResize:function(){var a=
this.gl.canvas.width,b=this.gl.canvas.height;this.batcher.resizeBackbuffer(a,b);this.graphics.onResize(a,b)},init:function(){this.batcher=new fb(this.gl);this.graphics=new O(this.batcher,null);this.onResize()}};C(va.prototype,{});C(ta.prototype,{});var K=function(a,b,d){d="#ifdef GL_ES\nprecision mediump float;\n#endif\n"+d;this._gl=a;this._program=a.createProgram();a.attachShader(this._program,K.createShader(a,35633,b));a.attachShader(this._program,K.createShader(a,35632,d));a.linkProgram(this._program);
a.useProgram(this._program)};K.__name__=!0;K.createShader=function(a,b,d){b=a.createShader(b);a.shaderSource(b,d);a.compileShader(b);return b};K.prototype={useProgram:function(){this._gl.useProgram(this._program)},prepare:function(){null},getAttribLocation:function(a){return this._gl.getAttribLocation(this._program,a)},getUniformLocation:function(a){return this._gl.getUniformLocation(this._program,a)}};var La=function(a){K.call(this,a,"attribute highp vec2 a_pos;\nattribute mediump vec2 a_uv;\nattribute lowp float a_alpha;\nvarying mediump vec2 v_uv;\nvarying lowp float v_alpha;\nvoid main (void) {\nv_uv = a_uv;\nv_alpha = a_alpha;\ngl_Position = vec4(a_pos, 0, 1);\n}",
"varying mediump vec2 v_uv;\nvarying lowp float v_alpha;\nuniform lowp sampler2D u_texture;\nuniform mediump vec4 u_region;\nvoid main (void) {\ngl_FragColor = texture2D(u_texture, u_region.xy + mod(v_uv, u_region.zw)) * v_alpha;\n}");this.a_pos=this.getAttribLocation("a_pos");this.a_uv=this.getAttribLocation("a_uv");this.a_alpha=this.getAttribLocation("a_alpha");this.u_texture=this.getUniformLocation("u_texture");this.u_region=this.getUniformLocation("u_region");this.setTexture(0)};La.__name__=!0;
La.__super__=K;La.prototype=C(K.prototype,{setTexture:function(a){this._gl.uniform1i(this.u_texture,a)},setRegion:function(a,b,d,e){this._gl.uniform4f(this.u_region,a,b,d,e)},prepare:function(){this._gl.enableVertexAttribArray(this.a_pos);this._gl.enableVertexAttribArray(this.a_uv);this._gl.enableVertexAttribArray(this.a_alpha);this._gl.vertexAttribPointer(this.a_pos,2,5126,!1,20,0);this._gl.vertexAttribPointer(this.a_uv,2,5126,!1,20,8);this._gl.vertexAttribPointer(this.a_alpha,1,5126,!1,20,16)}});
var Ka=function(a){K.call(this,a,"attribute highp vec2 a_pos;\nattribute mediump vec2 a_uv;\nattribute lowp float a_alpha;\nvarying mediump vec2 v_uv;\nvarying lowp float v_alpha;\nvoid main (void) {\nv_uv = a_uv;\nv_alpha = a_alpha;\ngl_Position = vec4(a_pos, 0, 1);\n}","varying mediump vec2 v_uv;\nvarying lowp float v_alpha;\nuniform lowp sampler2D u_texture;\nvoid main (void) {\ngl_FragColor = texture2D(u_texture, v_uv) * v_alpha;\n}");this.a_pos=this.getAttribLocation("a_pos");this.a_uv=this.getAttribLocation("a_uv");
this.a_alpha=this.getAttribLocation("a_alpha");this.u_texture=this.getUniformLocation("u_texture");this.setTexture(0)};Ka.__name__=!0;Ka.__super__=K;Ka.prototype=C(K.prototype,{setTexture:function(a){this._gl.uniform1i(this.u_texture,a)},prepare:function(){this._gl.enableVertexAttribArray(this.a_pos);this._gl.enableVertexAttribArray(this.a_uv);this._gl.enableVertexAttribArray(this.a_alpha);this._gl.vertexAttribPointer(this.a_pos,2,5126,!1,20,0);this._gl.vertexAttribPointer(this.a_uv,2,5126,!1,20,
8);this._gl.vertexAttribPointer(this.a_alpha,1,5126,!1,20,16)}});var Ma=function(a){K.call(this,a,"attribute highp vec2 a_pos;\nattribute lowp vec3 a_rgb;\nattribute lowp float a_alpha;\nvarying lowp vec4 v_color;\nvoid main (void) {\nv_color = vec4(a_rgb*a_alpha, a_alpha);\ngl_Position = vec4(a_pos, 0, 1);\n}","varying lowp vec4 v_color;\nvoid main (void) {\ngl_FragColor = v_color;\n}");this.a_pos=this.getAttribLocation("a_pos");this.a_rgb=this.getAttribLocation("a_rgb");this.a_alpha=this.getAttribLocation("a_alpha")};
Ma.__name__=!0;Ma.__super__=K;Ma.prototype=C(K.prototype,{prepare:function(){this._gl.enableVertexAttribArray(this.a_pos);this._gl.enableVertexAttribArray(this.a_rgb);this._gl.enableVertexAttribArray(this.a_alpha);this._gl.vertexAttribPointer(this.a_pos,2,5126,!1,24,0);this._gl.vertexAttribPointer(this.a_rgb,3,5126,!1,24,8);this._gl.vertexAttribPointer(this.a_alpha,1,5126,!1,24,20)}});C(A.prototype,{get_name:function(){return"Director_3"},onAdded:function(){this.owner.addChild(this._root)},onRemoved:function(){this.completeTransition();
for(var a=0,b=this.scenes;a<b.length;){var d=b[a];++a;d.dispose()}this.scenes=[];this.occludedScenes=[];this._root.dispose()},onUpdate:function(a){null!=this._transitor&&this._transitor.update(a)&&this.completeTransition()},get_topScene:function(){var a=this.scenes.length;return 0<a?this.scenes[a-1]:null},show:function(a){a=a._compMap.Scene_5;null!=a&&a.shown.emit()},invalidateVisibility:function(){for(var a=this.scenes.length;0<a;){var b=this.scenes[--a]._compMap.Scene_5;if(null==b||b.opaque)break}this.occludedScenes=
0<this.scenes.length?this.scenes.slice(a,this.scenes.length-1):[];a=this.get_topScene();null!=a&&this.show(a)},completeTransition:function(){null!=this._transitor&&(this._transitor.complete(),this._transitor=null,this.invalidateVisibility())}});C(A.prototype,{get_name:function(){return"Scene_5"}});var U={__ename__:!0,__constructs__:["Stage3D","WebGL","Canvas"],Stage3D:["Stage3D",0]};U.Stage3D.__enum__=U;U.WebGL=["WebGL",1];U.WebGL.__enum__=U;U.Canvas=["Canvas",2];U.Canvas.__enum__=U;var Da=function(){};
Da.__name__=!0;Da.set=function(a,b,d){return d?a|b:a&~b};var ua=function(a){B.call(this,a)};ua.__name__=!0;ua.__super__=B;ua.prototype=C(B.prototype,{connect:function(a,b){null==b&&(b=!1);return this.connectImpl(a,b)},emit:function(){var a=this;this._head==B.DISPATCHING_SENTINEL?this.defer(function(){a.emitImpl()}):this.emitImpl()},emitImpl:function(){for(var a=this.willEmit(),b=a;null!=b;)b._listener(),b.stayInList||b.dispose(),b=b._next;this.didEmit(a)}});var ob=function(a){this.next=null;this.fn=
a};ob.__name__=!0;var ja=function(){this.h={}};ja.__name__=!0;ja.__interfaces__=[Va];ja.prototype={set:function(a,b){this.h[a]=b},get:function(a){return this.h[a]},exists:function(a){return this.h.hasOwnProperty(a)},remove:function(a){if(!this.h.hasOwnProperty(a))return!1;delete this.h[a];return!0}};var v=function(){this.h={};this.h.__keys__={}};v.__name__=!0;v.__interfaces__=[Va];v.prototype={set:function(a,b){var d=a.__id__||(a.__id__=++v.count);this.h[d]=b;this.h.__keys__[d]=a}};var gb=function(){this.iterEdge=
new Oa};gb.__name__=!0;gb.prototype={set_radius:function(a){this._radius=a;this.radiusSquared=this._radius*this._radius;this.diameter=2*this._radius;this.diameterSquared=this.diameter*this.diameter;return a},set_mesh:function(a){return this._mesh=a},findPath:function(a,b,d,e,g,f){this.closedFaces=new v;this.sortedOpenedFaces=[];this.openedFaces=new v;this.entryEdges=new v;this.entryX=new v;this.entryY=new v;this.scoreF=new v;this.scoreG=new v;this.scoreH=new v;this.predecessor=new v;var c;c=n.locatePosition(a,
b,this._mesh);switch(c[1]){case 0:return;case 1:c=c[2];if(c.get_isConstrained())return;this.fromFace=c.get_leftFace();break;case 2:this.fromFace=c[2]}c=n.locatePosition(d,e,this._mesh);switch(c[1]){case 0:c=c[2];this.toFace=c.get_edge().get_leftFace();break;case 1:c=c[2];this.toFace=c.get_leftFace();break;case 2:this.toFace=c[2]}this.sortedOpenedFaces.push(this.fromFace);this.entryEdges.set(this.fromFace,null);null;this.entryX.set(this.fromFace,a);a;this.entryY.set(this.fromFace,b);b;this.scoreG.set(this.fromFace,
0);0;a=Math.sqrt((d-a)*(d-a)+(e-b)*(e-b));this.scoreH.set(this.fromFace,a);a;this.scoreF.set(this.fromFace,a);a;var h,i,k,l,b=new F;c=new F;for(var j=new F,p;;){if(0==this.sortedOpenedFaces.length){this.curFace=null;break}this.curFace=this.sortedOpenedFaces.pop();if(this.curFace==this.toFace)break;for(this.iterEdge.set_fromFace(this.curFace);null!=(h=this.iterEdge.next());)h.get_isConstrained()||(a=h.get_rightFace(),!this.closedFaces.h[a.__id__]&&!(this.curFace!=this.fromFace&&0<this._radius&&!this.isWalkableByRadius(this.entryEdges.h[this.curFace.__id__],
this.curFace,h))&&(b.x=this.entryX.h[this.curFace.__id__],b.y=this.entryY.h[this.curFace.__id__],c.x=(h.get_originVertex().get_pos().x+h.get_destinationVertex().get_pos().x)/2,c.y=(h.get_originVertex().get_pos().y+h.get_destinationVertex().get_pos().y)/2,j.x=c.x-d,j.y=c.y-e,l=j.get_length(),j.x=b.x-c.x,j.y=b.y-c.y,k=this.scoreG.h[this.curFace.__id__]+j.get_length(),i=l+k,p=!1,null==this.openedFaces.h[a.__id__]||!this.openedFaces.h[a.__id__]?(this.sortedOpenedFaces.push(a),this.openedFaces.set(a,!0),
!0,p=!0):this.scoreF.h[a.__id__]>i&&(p=!0),p&&(this.entryEdges.set(a,h),h,h=c.x,this.entryX.set(a,h),h,h=c.y,this.entryY.set(a,h),h,this.scoreF.set(a,i),i,this.scoreG.set(a,k),k,this.scoreH.set(a,l),l,i=this.curFace,this.predecessor.set(a,i),i)));this.openedFaces.set(this.curFace,!1);!1;this.closedFaces.set(this.curFace,!0);!0;this.sortedOpenedFaces.sort(Q(this,this.sortingFaces))}if(null!=this.curFace)for(g.push(this.curFace);this.curFace!=this.fromFace;)f.unshift(this.entryEdges.h[this.curFace.__id__]),
this.curFace=this.predecessor.h[this.curFace.__id__],g.unshift(this.curFace)},sortingFaces:function(a,b){return this.scoreF.h[a.__id__]==this.scoreF.h[b.__id__]?0:this.scoreF.h[a.__id__]<this.scoreF.h[b.__id__]?1:-1},isWalkableByRadius:function(a,b,d){var e=null,g=null,f=null;a.get_originVertex()==d.get_originVertex()?(e=a.get_destinationVertex(),g=d.get_destinationVertex(),f=a.get_originVertex()):a.get_destinationVertex()==d.get_destinationVertex()?(e=a.get_originVertex(),g=d.get_originVertex(),
f=a.get_destinationVertex()):a.get_originVertex()==d.get_destinationVertex()?(e=a.get_destinationVertex(),g=d.get_originVertex(),f=a.get_originVertex()):a.get_destinationVertex()==d.get_originVertex()&&(e=a.get_originVertex(),g=d.get_destinationVertex(),f=a.get_destinationVertex());var c;c=(f.get_pos().x-e.get_pos().x)*(g.get_pos().x-e.get_pos().x)+(f.get_pos().y-e.get_pos().y)*(g.get_pos().y-e.get_pos().y);if(0>=c)return f=(f.get_pos().x-e.get_pos().x)*(f.get_pos().x-e.get_pos().x)+(f.get_pos().y-
e.get_pos().y)*(f.get_pos().y-e.get_pos().y),f>=this.diameterSquared?!0:!1;c=(f.get_pos().x-g.get_pos().x)*(e.get_pos().x-g.get_pos().x)+(f.get_pos().y-g.get_pos().y)*(e.get_pos().y-g.get_pos().y);if(0>=c)return f=(f.get_pos().x-g.get_pos().x)*(f.get_pos().x-g.get_pos().x)+(f.get_pos().y-g.get_pos().y)*(f.get_pos().y-g.get_pos().y),f>=this.diameterSquared?!0:!1;d=b.get_edge()!=a&&b.get_edge().get_oppositeEdge()!=a&&b.get_edge()!=d&&b.get_edge().get_oppositeEdge()!=d?b.get_edge():b.get_edge().get_nextLeftEdge()!=
a&&b.get_edge().get_nextLeftEdge().get_oppositeEdge()!=a&&b.get_edge().get_nextLeftEdge()!=d&&b.get_edge().get_nextLeftEdge().get_oppositeEdge()!=d?b.get_edge().get_nextLeftEdge():b.get_edge().get_prevLeftEdge();if(d.get_isConstrained()){if(g=new F(f.get_pos().x,f.get_pos().y),n.projectOrthogonaly(g,d),f=(g.x-f.get_pos().x)*(g.x-f.get_pos().x)+(g.y-f.get_pos().y)*(g.y-f.get_pos().y),!(f>=this.diameterSquared))return!1}else{e=(f.get_pos().x-e.get_pos().x)*(f.get_pos().x-e.get_pos().x)+(f.get_pos().y-
e.get_pos().y)*(f.get_pos().y-e.get_pos().y);g=(f.get_pos().x-g.get_pos().x)*(f.get_pos().x-g.get_pos().x)+(f.get_pos().y-g.get_pos().y)*(f.get_pos().y-g.get_pos().y);if(e<this.diameterSquared||g<this.diameterSquared)return!1;g=[];e=[];a=new v;e.push(d);d.get_leftFace()==b?(g.push(d.get_rightFace()),b=d.get_rightFace()):(g.push(d.get_leftFace()),b=d.get_leftFace());a.set(b,!0);!0;for(var h;0<g.length;){b=g.shift();d=e.shift();b.get_edge()==d||b.get_edge()==d.get_oppositeEdge()?(d=b.get_edge().get_nextLeftEdge(),
h=b.get_edge().get_nextLeftEdge().get_nextLeftEdge()):b.get_edge().get_nextLeftEdge()==d||b.get_edge().get_nextLeftEdge()==d.get_oppositeEdge()?(d=b.get_edge(),h=b.get_edge().get_nextLeftEdge().get_nextLeftEdge()):(d=b.get_edge(),h=b.get_edge().get_nextLeftEdge());c=d.get_leftFace()==b?d.get_rightFace():d.get_leftFace();b=h.get_leftFace()==b?h.get_rightFace():h.get_leftFace();if(!a.h[c.__id__]&&n.distanceSquaredVertexToEdge(f,d)<this.diameterSquared){if(d.get_isConstrained())return!1;g.push(c);e.push(d);
a.set(c,!0);!0}if(!a.h[b.__id__]&&n.distanceSquaredVertexToEdge(f,h)<this.diameterSquared){if(h.get_isConstrained())return!1;g.push(b);e.push(h);a.set(b,!0);!0}}}return!0}};var Sa=function(){this._radius=10;this.x=this.y=0;this.dirNormX=1;this.dirNormY=0};Sa.__name__=!0;Sa.prototype={get_radius:function(){return this._radius},set_radius:function(a){this._radius=a;this._radiusSquared=this._radius*this._radius;return a}};var hb=function(){this._currPoolPointsIndex=0;this._poolPointsSize=3E3;this._numSamplesCircle=
16;this._radius=this._radiusSquared=0;this._poolPoints=[];for(var a=0,b=this._poolPointsSize;a<b;)a++,this._poolPoints.push(new F)};hb.__name__=!0;hb.prototype={getPoint:function(a,b){null==b&&(b=0);null==a&&(a=0);this.__point=this._poolPoints[this._currPoolPointsIndex];this.__point.setXY(a,b);this._currPoolPointsIndex++;this._currPoolPointsIndex==this._poolPointsSize&&(this._poolPoints.push(new F),this._poolPointsSize++);return this.__point},getCopyPoint:function(a){return this.getPoint(a.x,a.y)},
get_radius:function(){return this._radius},set_radius:function(a){this._radius=Math.max(0,a);this._radiusSquared=this._radius*this._radius;this._sampleCircle=[];if(0==this.get_radius())return 0;for(var a=0,b=this._numSamplesCircle;a<b;){var d=a++;this._sampleCircle.push(new F(this._radius*Math.cos(-2*Math.PI*d/this._numSamplesCircle),this._radius*Math.sin(-2*Math.PI*d/this._numSamplesCircle)))}this._sampleCircleDistanceSquared=(this._sampleCircle[0].x-this._sampleCircle[1].x)*(this._sampleCircle[0].x-
this._sampleCircle[1].x)+(this._sampleCircle[0].y-this._sampleCircle[1].y)*(this._sampleCircle[0].y-this._sampleCircle[1].y);return this._radius},findPath:function(a,b,d,e,g,c,m){this._currPoolPointsIndex=0;if(0<this._radius){var h=g[0],i,k,l;k=h.get_edge().get_originVertex().get_pos();l=h.get_edge().get_destinationVertex().get_pos();h=h.get_edge().get_nextLeftEdge().get_destinationVertex().get_pos();i=(k.x-a)*(k.x-a)+(k.y-b)*(k.y-b);i<=this._radiusSquared?(i=Math.sqrt(i),a=1.01*this._radius*((a-
k.x)/i)+k.x,b=1.01*this._radius*((b-k.y)/i)+k.y):(i=(l.x-a)*(l.x-a)+(l.y-b)*(l.y-b),i<=this._radiusSquared?(i=Math.sqrt(i),a=1.01*this._radius*((a-l.x)/i)+l.x,b=1.01*this._radius*((b-l.y)/i)+l.y):(i=(h.x-a)*(h.x-a)+(h.y-b)*(h.y-b),i<=this._radiusSquared&&(i=Math.sqrt(i),a=1.01*this._radius*((a-h.x)/i)+h.x,b=1.01*this._radius*((b-h.y)/i)+h.y)));h=g[g.length-1];k=h.get_edge().get_originVertex().get_pos();l=h.get_edge().get_destinationVertex().get_pos();h=h.get_edge().get_nextLeftEdge().get_destinationVertex().get_pos();
i=(k.x-d)*(k.x-d)+(k.y-e)*(k.y-e);i<=this._radiusSquared?(i=Math.sqrt(i),d=1.01*this._radius*((d-k.x)/i)+k.x,e=1.01*this._radius*((e-k.y)/i)+k.y):(i=(l.x-d)*(l.x-d)+(l.y-e)*(l.y-e),i<=this._radiusSquared?(i=Math.sqrt(i),d=1.01*this._radius*((d-l.x)/i)+l.x,e=1.01*this._radius*((e-l.y)/i)+l.y):(i=(h.x-d)*(h.x-d)+(h.y-e)*(h.y-e),i<=this._radiusSquared&&(i=Math.sqrt(i),d=1.01*this._radius*((d-h.x)/i)+h.x,e=1.01*this._radius*((e-h.y)/i)+h.y)))}var j;j=new F(a,b);k=new F(d,e);if(1==g.length)m.push(j.x),
m.push(j.y),m.push(k.x),m.push(k.y);else{var p=null,z=null;l=n.isInFace(a,b,g[0]);switch(l[1]){case 1:c[0]==l[2]&&(c.shift(),g.shift())}h=[];i=[];h.push(j);i.push(j);var D=new v,o=[],g=new v;l=new v;g.set(j,0);0;var p=c[0],r=n.getRelativePosition2(a,b,p),q,b=this.getCopyPoint(p.get_destinationVertex().get_pos());q=this.getCopyPoint(p.get_originVertex().get_pos());o.push(b);o.push(q);l.set(j,b);b;l.set(b,q);q;a=q;1==r?(g.set(b,1),1,g.set(q,-1),-1,b=p.get_destinationVertex(),D.set(b,1),1,p=p.get_originVertex(),
D.set(p,-1),-1):-1==r&&(g.set(b,-1),-1,g.set(q,1),1,b=p.get_destinationVertex(),D.set(b,-1),-1,p=p.get_originVertex(),D.set(p,1),1);r=c[0].get_originVertex();b=c[0].get_destinationVertex();q=1;for(var x=c.length;q<x;)p=q++,p=c[p],p.get_originVertex()==r?z=p.get_destinationVertex():p.get_destinationVertex()==r?z=p.get_originVertex():p.get_originVertex()==b?(z=p.get_destinationVertex(),r=b):p.get_destinationVertex()==b?(z=p.get_originVertex(),r=b):null,b=this.getCopyPoint(z.get_pos()),o.push(b),p=-D.h[r.__id__],
g.set(b,p),p,l.set(a,b),b,D.set(z,p),p,a=b,b=r,r=z;l.set(a,k);k;g.set(k,0);0;c=[];z=new v;c.push(j);z.set(j,0);0;D=0;for(a=o.length;D<a;)if(j=D++,b=o[j],-1==g.h[b.__id__]){for(j=h.length-2;0<=j;){p=n.getDirection(h[j].x,h[j].y,h[j+1].x,h[j+1].y,b.x,b.y);if(-1!=p){h.shift();for(p=0;p<j;)p++,c.push(h[0]),z.set(h[0],1),1,h.shift();c.push(h[0]);z.set(h[0],1);1;i.splice(0,i.length);i.push(h[0]);i.push(b);break}j--}i.push(b);for(j=i.length-3;0<=j;){p=n.getDirection(i[j].x,i[j].y,i[j+1].x,i[j+1].y,b.x,b.y);
if(-1==p)break;else i.splice(j+1,1);j--}}else{for(j=i.length-2;0<=j;){p=n.getDirection(i[j].x,i[j].y,i[j+1].x,i[j+1].y,b.x,b.y);if(1!=p){i.shift();for(p=0;p<j;)p++,c.push(i[0]),z.set(i[0],-1),-1,i.shift();c.push(i[0]);z.set(i[0],-1);-1;h.splice(0,h.length);h.push(i[0]);h.push(b);break}j--}h.push(b);for(j=h.length-3;0<=j;){p=n.getDirection(h[j].x,h[j].y,h[j+1].x,h[j+1].y,b.x,b.y);if(1==p)break;else h.splice(j+1,1);j--}}o=!1;for(j=i.length-2;0<=j;){p=n.getDirection(i[j].x,i[j].y,i[j+1].x,i[j+1].y,d,
e);if(1!=p){i.shift();o=0;for(j+=1;o<j;)o++,c.push(i[0]),z.set(i[0],-1),-1,i.shift();c.push(k);z.set(k,0);0;o=!0;break}j--}if(!o)for(j=h.length-2;0<=j;){p=n.getDirection(h[j].x,h[j].y,h[j+1].x,h[j+1].y,d,e);if(-1!=p){h.shift();d=0;for(e=j+1;d<e;)d++,c.push(h[0]),z.set(h[0],1),1,h.shift();c.push(k);z.set(k,0);0;o=!0;break}j--}o||(c.push(k),z.set(k,0),0);d=[];if(0<this.get_radius()){e=[];if(2==c.length)this.adjustWithTangents(c[0],!1,c[1],!1,g,l,e,d);else if(2<c.length){this.adjustWithTangents(c[0],
!1,c[1],!0,g,l,e,d);if(3<c.length){h=1;for(i=c.length-3+1;h<i;)o=h++,this.adjustWithTangents(c[o],!0,c[o+1],!0,g,l,e,d)}h=c.length;this.adjustWithTangents(c[h-2],!0,c[h-1],!1,g,l,e,d)}e.push(k);this.checkAdjustedPath(e,d,g);l=[];for(k=e.length-2;1<=k;){for(this.smoothAngle(d[2*k-1],e[k],d[2*k],g.h[e[k].__id__],l);0!=l.length;)h=2*k,d.splice(h,0),i=l.pop(),d.splice(h,0,i);k--}}else d=c;g=0;for(k=d.length;g<k;)e=g++,m.push(d[e].x),m.push(d[e].y)}},adjustWithTangents:function(a,b,d,e,c,f,m,h){var i=
[],k=c.h[a.__id__],l=c.h[d.__id__],j=null,p=null;if(!b&&!e)j=a,p=d;else if(b)if(e)if(1==k&&1==l)n.tangentsParalCircleToCircle(this._radius,a.x,a.y,d.x,d.y,i),j=this.getPoint(i[2],i[3]),p=this.getPoint(i[4],i[5]);else if(-1==k&&-1==l)n.tangentsParalCircleToCircle(this._radius,a.x,a.y,d.x,d.y,i),j=this.getPoint(i[0],i[1]),p=this.getPoint(i[6],i[7]);else if(1==k&&-1==l)if(n.tangentsCrossCircleToCircle(this._radius,a.x,a.y,d.x,d.y,i))j=this.getPoint(i[2],i[3]),p=this.getPoint(i[6],i[7]);else return;else if(n.tangentsCrossCircleToCircle(this._radius,
a.x,a.y,d.x,d.y,i))j=this.getPoint(i[0],i[1]),p=this.getPoint(i[4],i[5]);else return;else if(n.tangentsPointToCircle(d.x,d.y,a.x,a.y,this._radius,i))0<i.length&&(j=1==k?this.getPoint(i[0],i[1]):this.getPoint(i[2],i[3]),p=d);else return;else if(n.tangentsPointToCircle(a.x,a.y,d.x,d.y,this._radius,i))1==l?(j=a,p=this.getPoint(i[2],i[3])):(j=a,p=this.getPoint(i[0],i[1]));else return;for(i=f.h[a.__id__];i!=d;){k=n.distanceSquaredPointToSegment(i.x,i.y,j.x,j.y,p.x,p.y);if(k<this._radiusSquared){this.adjustWithTangents(a,
b,i,!0,c,f,m,h);this.adjustWithTangents(i,!0,d,e,c,f,m,h);return}i=f.h[i.__id__]}h.push(j);h.push(p);m.push(a)},checkAdjustedPath:function(a,b,d){for(var e=!0,c,f,m,h,i,k,l,j=[],p=null,z=null;e;)for(var e=!1,D=2;D<a.length;)h=a[D],i=d.h[h.__id__],c=a[D-1],m=d.h[c.__id__],c=a[D-2],f=d.h[c.__id__],m==i&&(m=b[2*(D-2)],k=b[2*(D-1)-1],l=b[2*(D-1)],m=(m.x-k.x)*(l.x-k.x)+(m.y-k.y)*(l.y-k.y),0<m&&(2==D?(n.tangentsPointToCircle(c.x,c.y,h.x,h.y,this._radius,j),1==i?(p=c,z=this.getPoint(j[2],j[3])):(p=c,z=this.getPoint(j[0],
j[1]))):D==a.length-1?(n.tangentsPointToCircle(h.x,h.y,c.x,c.y,this._radius,j),p=1==f?this.getPoint(j[0],j[1]):this.getPoint(j[2],j[3]),z=h):1==f&&-1==i?(n.tangentsCrossCircleToCircle(this._radius,c.x,c.y,h.x,h.y,j),p=this.getPoint(j[2],j[3]),z=this.getPoint(j[6],j[7])):-1==f&&1==i?(n.tangentsCrossCircleToCircle(this._radius,c.x,c.y,h.x,h.y,j),p=this.getPoint(j[0],j[1]),z=this.getPoint(j[4],j[5])):1==f&&1==i?(n.tangentsParalCircleToCircle(this._radius,c.x,c.y,h.x,h.y,j),p=this.getPoint(j[2],j[3]),
z=this.getPoint(j[4],j[5])):-1==f&&-1==i&&(n.tangentsParalCircleToCircle(this._radius,c.x,c.y,h.x,h.y,j),p=this.getPoint(j[0],j[1]),z=this.getPoint(j[6],j[7])),h=2*(D-2),b.splice(h,1),b.splice(h,0,p),h=2*D-1,b.splice(h,1),b.splice(h,0,z),a.splice(D-1,1),b.splice(2*(D-1)-1,2),j.splice(0,j.length),D--)),D++},smoothAngle:function(a,b,d,e,c){var f=n.getDirection(a.x,a.y,b.x,b.y,d.x,d.y);if(!((a.x-d.x)*(a.x-d.x)+(a.y-d.y)*(a.y-d.y)<=this._sampleCircleDistanceSquared)){for(var m=0,h,i,k,l,j,p=0,z=this._numSamplesCircle;p<
z;){h=p++;k=!1;l=b.x+this._sampleCircle[h].x;j=b.y+this._sampleCircle[h].y;h=n.getDirection(a.x,a.y,b.x,b.y,l,j);i=n.getDirection(b.x,b.y,d.x,d.y,l,j);if(1==e)if(-1==f)-1==h&&-1==i&&(k=!0);else{if(-1==h||-1==i)k=!0}else if(1==f)1==h&&1==i&&(k=!0);else if(1==h||1==i)k=!0;k?(c.splice(m,0),k=new F(l,j),c.splice(m,0,k),m++):m=0}-1==e&&c.reverse()}}};var Ta=function(){this.astar=new gb;this.funnel=new hb;this.listFaces=[];this.listEdges=[]};Ta.__name__=!0;Ta.prototype={set_mesh:function(a){this._mesh=
a;this.astar.set_mesh(this._mesh);return a},findPath:function(a,b,d){d.splice(0,d.length);n.isCircleIntersectingAnyConstraint(a,b,this.entity.get_radius(),this._mesh)||(this.astar.set_radius(this.entity.get_radius()),this.funnel.set_radius(this.entity.get_radius()),this.listFaces.splice(0,this.listFaces.length),this.listEdges.splice(0,this.listEdges.length),this.astar.findPath(this.entity.x,this.entity.y,a,b,this.listFaces,this.listEdges),0!=this.listFaces.length&&this.funnel.findPath(this.entity.x,
this.entity.y,a,b,this.listFaces,this.listEdges,d))}};var pa=function(){this._samplingDistance=this._samplingDistanceSquared=1;this._preCompX=[];this._preCompY=[]};pa.__name__=!0;pa.pythag=function(a,b){return Math.sqrt(a*a+b*b)};pa.prototype={get_hasNext:function(){return this._hasNext},set_samplingDistance:function(a){this._samplingDistance=a;this._samplingDistanceSquared=this._samplingDistance*this._samplingDistance;return a},set_path:function(a){this._path=a;this._preComputed=!1;this.reset();
return a},reset:function(){0<this._path.length?(this._currentX=this._path[0],this._currentY=this._path[1],this._iPrev=0,this._iNext=2,this._hasPrev=!1,this._hasNext=!0,this._count=0,this.updateEntity()):(this._hasNext=this._hasPrev=!1,this._count=0)},next:function(){if(!this._hasNext)return!1;this._hasPrev=!0;if(this._preComputed)return this._count++,this._count==this._preCompX.length-1&&(this._hasNext=!1),this._currentX=this._preCompX[this._count],this._currentY=this._preCompY[this._count],this.updateEntity(),
!0;var a,b;for(a=this._samplingDistance;;)if(b=pa.pythag(this._currentX-this._path[this._iNext],this._currentY-this._path[this._iNext+1]),b<a){if(a-=b,this._currentX=this._path[this._iNext],this._currentY=this._path[this._iNext+1],this._iPrev+=2,this._iNext+=2,this._iNext==this._path.length)break}else break;this._iNext==this._path.length?(this._currentX=this._path[this._iPrev],this._currentY=this._path[this._iPrev+1],this._hasNext=!1,this._iNext=this._path.length-2,this._iPrev=this._iNext-2):(this._currentX+=
(this._path[this._iNext]-this._currentX)*a/b,this._currentY+=(this._path[this._iNext+1]-this._currentY)*a/b);this.updateEntity();return!0},updateEntity:function(){null!=this.entity&&(ka.assertFalse(Math.isNaN(this._currentX)&&Math.isNaN(this._currentY),null,{fileName:"LinearPathSampler.hx",lineNumber:228,className:"hxDaedalus.ai.trajectory.LinearPathSampler",methodName:"updateEntity"}),this.entity.x=this._currentX,this.entity.y=this._currentY)}};var V=function(){this._id=V.INC;V.INC++;this._edges=
[]};V.__name__=!0;V.prototype={addEdge:function(a){-1==this._edges.indexOf(a)&&-1==this._edges.indexOf(a.get_oppositeEdge())&&this._edges.push(a)},get_edges:function(){return this._edges},dispose:function(){this.fromShape=this._edges=null}};var Y=function(){this._id=Y.INC;Y.INC++;this.segments=[]};Y.__name__=!0;Y.prototype={dispose:function(){for(;0<this.segments.length;)this.segments.pop().dispose();this.segments=null}};var r=function(){this._id=r.INC;r.INC++;this.fromConstraintSegments=[]};r.__name__=
!0;r.prototype={get_isReal:function(){return this._isReal},get_isConstrained:function(){return this._isConstrained},setDatas:function(a,b,d,e,c,f){null==f&&(f=!1);null==c&&(c=!0);this._isConstrained=f;this._isReal=c;this._originVertex=a;this._oppositeEdge=b;this._nextLeftEdge=d;this._leftFace=e},addFromConstraintSegment:function(a){-1==this.fromConstraintSegments.indexOf(a)&&this.fromConstraintSegments.push(a)},removeFromConstraintSegment:function(a){a=this.fromConstraintSegments.indexOf(a);-1!=a&&
this.fromConstraintSegments.splice(a,1)},set_originVertex:function(a){return this._originVertex=a},set_nextLeftEdge:function(a){return this._nextLeftEdge=a},set_leftFace:function(a){return this._leftFace=a},set_isConstrained:function(a){return this._isConstrained=a},dispose:function(){this.fromConstraintSegments=this._leftFace=this._nextLeftEdge=this._oppositeEdge=this._originVertex=null},get_originVertex:function(){return this._originVertex},get_destinationVertex:function(){return this.get_oppositeEdge().get_originVertex()},
get_oppositeEdge:function(){return this._oppositeEdge},get_nextLeftEdge:function(){return this._nextLeftEdge},get_prevLeftEdge:function(){return this._nextLeftEdge.get_nextLeftEdge()},get_nextRightEdge:function(){return this._oppositeEdge.get_nextLeftEdge().get_nextLeftEdge().get_oppositeEdge()},get_prevRightEdge:function(){return this._oppositeEdge.get_nextLeftEdge().get_oppositeEdge()},get_rotLeftEdge:function(){return this._nextLeftEdge.get_nextLeftEdge().get_oppositeEdge()},get_leftFace:function(){return this._leftFace},
get_rightFace:function(){return this._oppositeEdge.get_leftFace()}};var I=function(){this._id=I.INC;I.INC++};I.__name__=!0;I.prototype={get_isReal:function(){return this._isReal},setDatas:function(a,b){null==b&&(b=!0);this._isReal=b;this._edge=a},dispose:function(){this._edge=null},get_edge:function(){return this._edge}};var la=function(a,b){this.__objectsUpdateInProgress=!1;this._vertices=this._edges=this._faces=this._constraintShapes=this._objects=this.__centerVertex=this.__edgesToCheck=null;this._clipping=
!1;this._width=this._height=0;this._id=la.INC;la.INC++;this._width=a;this._height=b;this._clipping=!0;this._vertices=[];this._edges=[];this._faces=[];this._constraintShapes=[];this._objects=[];this.__edgesToCheck=[]};la.__name__=!0;la.prototype={get_height:function(){return this._height},get_width:function(){return this._width},set_clipping:function(a){return this._clipping=a},get___constraintShapes:function(){return this._constraintShapes},insertObject:function(a){null!=a.get_constraintShape()&&
this.deleteObject(a);var b=new Y,d,e=a.get_coordinates(),c=a.get_matrix();a.updateMatrixFromValues();for(var f,m,h,i,k=0;k<e.length;)f=e[k],m=e[k+1],h=e[k+2],i=e[k+3],d=c.transformX(f,m),f=c.transformY(f,m),m=c.transformX(h,i),h=c.transformY(h,i),d=this.insertConstraintSegment(d,f,m,h),null!=d&&(d.fromShape=b,b.segments.push(d)),k+=4;this._constraintShapes.push(b);a.set_constraintShape(b);this.__objectsUpdateInProgress||this._objects.push(a)},deleteObject:function(a){null!=a.get_constraintShape()&&
(this.deleteConstraintShape(a.get_constraintShape()),a.set_constraintShape(null),this.__objectsUpdateInProgress||this._objects.splice(this._objects.indexOf(a),1))},insertConstraintShape:function(a){for(var b=new Y,d=null,e=0;e<a.length;)d=this.insertConstraintSegment(a[e],a[e+1],a[e+2],a[e+3]),null!=d&&(d.fromShape=b,b.segments.push(d)),e+=4;this._constraintShapes.push(b);return b},deleteConstraintShape:function(a){for(var b=0,d=a.segments.length;b<d;){var e=b++;this.deleteConstraintSegment(a.segments[e])}a.dispose();
this._constraintShapes.splice(this._constraintShapes.indexOf(a),1)},insertConstraintSegment:function(a,b,d,e){var c=this.findPositionFromBounds(a,b),f=this.findPositionFromBounds(d,e),m=a,h=b,i=d,k=e;if(this._clipping&&(0!=c||0!=f)){var l=new F;if(0!=c&&0!=f){if(0>=a&&0>=d||a>=this._width&&d>=this._width||0>=b&&0>=e||b>=this._height&&e>=this._height)return null;if(8==c&&4==f||4==c&&8==f)n.intersections2segments(a,b,d,e,0,0,0,this._height,l),m=l.x,h=l.y,n.intersections2segments(a,b,d,e,this._width,
0,this._width,this._height,l),i=l.x,k=l.y;else if(2==c&&6==f||6==c&&2==f)n.intersections2segments(a,b,d,e,0,0,this._width,0,l),m=l.x,h=l.y,n.intersections2segments(a,b,d,e,0,this._height,this._width,this._height,l),i=l.x,k=l.y;else if(2==c&&8==f||8==c&&2==f)if(n.intersections2segments(a,b,d,e,0,0,this._width,0,l))m=l.x,h=l.y,n.intersections2segments(a,b,d,e,0,0,0,this._height,l),i=l.x,k=l.y;else return null;else if(2==c&&4==f||4==c&&2==f)if(n.intersections2segments(a,b,d,e,0,0,this._width,0,l))m=
l.x,h=l.y,n.intersections2segments(a,b,d,e,this._width,0,this._width,this._height,l),i=l.x,k=l.y;else return null;else if(6==c&&4==f||4==c&&6==f)if(n.intersections2segments(a,b,d,e,0,this._height,this._width,this._height,l))m=l.x,h=l.y,n.intersections2segments(a,b,d,e,this._width,0,this._width,this._height,l),i=l.x,k=l.y;else return null;else if(8==c&&6==f||6==c&&8==f)if(n.intersections2segments(a,b,d,e,0,this._height,this._width,this._height,l))m=l.x,h=l.y,n.intersections2segments(a,b,d,e,0,0,0,
this._height,l),i=l.x,k=l.y;else return null;else if(f=c=!1,n.intersections2segments(a,b,d,e,0,0,this._width,0,l)&&(m=l.x,h=l.y,c=!0),n.intersections2segments(a,b,d,e,this._width,0,this._width,this._height,l)&&(c?(i=l.x,k=l.y,f=!0):(m=l.x,h=l.y,c=!0)),!f&&n.intersections2segments(a,b,d,e,0,this._height,this._width,this._height,l)&&(c?(i=l.x,k=l.y,f=!0):(m=l.x,h=l.y,c=!0)),!f&&n.intersections2segments(a,b,d,e,0,0,0,this._height,l)&&(i=l.x,k=l.y),!c)return null}else 2==c||2==f?n.intersections2segments(a,
b,d,e,0,0,this._width,0,l):4==c||4==f?n.intersections2segments(a,b,d,e,this._width,0,this._width,this._height,l):6==c||6==f?n.intersections2segments(a,b,d,e,0,this._height,this._width,this._height,l):8==c||8==f?n.intersections2segments(a,b,d,e,0,0,0,this._height,l):n.intersections2segments(a,b,d,e,0,0,this._width,0,l)||n.intersections2segments(a,b,d,e,this._width,0,this._width,this._height,l)||n.intersections2segments(a,b,d,e,0,this._height,this._width,this._height,l)||n.intersections2segments(a,
b,d,e,0,0,0,this._height,l),0==c?(m=a,h=b):(m=d,h=e),i=l.x,k=l.y}a=this.insertVertex(m,h);if(null==a)return null;i=this.insertVertex(i,k);if(null==i||a==i)return null;k=new Pa;b=new V;d=new r;e=new r;d.setDatas(a,e,null,null,!0,!0);e.setDatas(i,d,null,null,!0,!0);var e=[],m=[],h=[],j,l=new F,p;for(j=w.EVertex(a);;)switch(p=!1,j[1]){case 0:c=j[2];for(k.set_fromVertex(c);null!=(f=k.next());){if(f.get_destinationVertex()==i)return f.get_isConstrained()||(f.set_isConstrained(!0),f.get_oppositeEdge().set_isConstrained(!0)),
f.addFromConstraintSegment(b),f.get_oppositeEdge().fromConstraintSegments=f.fromConstraintSegments,a.addFromConstraintSegment(b),i.addFromConstraintSegment(b),b.addEdge(f),b;if(1.0E-4>=n.distanceSquaredVertexToEdge(f.get_destinationVertex(),d)){f.get_isConstrained()||(f.set_isConstrained(!0),f.get_oppositeEdge().set_isConstrained(!0));f.addFromConstraintSegment(b);f.get_oppositeEdge().fromConstraintSegments=f.fromConstraintSegments;a.addFromConstraintSegment(b);b.addEdge(f);a=f.get_destinationVertex();
d.set_originVertex(a);j=w.EVertex(a);p=!0;break}}if(p)continue;for(k.set_fromVertex(c);null!=(f=k.next());)if(f=f.get_nextLeftEdge(),n.intersections2edges(f,d,l)){if(f.get_isConstrained()){a=this.splitEdge(f,l.x,l.y);for(k.set_fromVertex(c);null!=(f=k.next());)if(f.get_destinationVertex()==a){f.set_isConstrained(!0);f.get_oppositeEdge().set_isConstrained(!0);f.addFromConstraintSegment(b);f.get_oppositeEdge().fromConstraintSegments=f.fromConstraintSegments;b.addEdge(f);break}c.addFromConstraintSegment(b);
d.set_originVertex(a);j=w.EVertex(a)}else e.push(f),m.unshift(f.get_nextLeftEdge()),h.push(f.get_prevLeftEdge()),f=f.get_oppositeEdge(),j=w.EEdge(f);break}break;case 1:f=j[2];c=f.get_nextLeftEdge();if(c.get_destinationVertex()==i)return m.unshift(c.get_nextLeftEdge()),h.push(c),f=new r,j=new r,f.setDatas(a,j,null,null,!0,!0),j.setDatas(i,f,null,null,!0,!0),m.push(f),h.push(j),this.insertNewConstrainedEdge(b,f,e,m,h),b;if(1.0E-4>=n.distanceSquaredVertexToEdge(c.get_destinationVertex(),d))m.unshift(c.get_nextLeftEdge()),
h.push(c),f=new r,j=new r,f.setDatas(a,j,null,null,!0,!0),j.setDatas(c.get_destinationVertex(),f,null,null,!0,!0),m.push(f),h.push(j),this.insertNewConstrainedEdge(b,f,e,m,h),e.splice(0,e.length),m.splice(0,m.length),h.splice(0,h.length),a=c.get_destinationVertex(),d.set_originVertex(a),j=w.EVertex(a);else if(n.intersections2edges(c,d,l))if(c.get_isConstrained()){c=this.splitEdge(c,l.x,l.y);for(k.set_fromVertex(c);null!=(f=k.next());)f.get_destinationVertex()==m[0].get_originVertex()&&m.unshift(f),
f.get_destinationVertex()==h[h.length-1].get_destinationVertex()&&h.push(f.get_oppositeEdge());f=new r;j=new r;f.setDatas(a,j,null,null,!0,!0);j.setDatas(c,f,null,null,!0,!0);m.push(f);h.push(j);this.insertNewConstrainedEdge(b,f,e,m,h);e.splice(0,e.length);m.splice(0,m.length);h.splice(0,h.length);a=c;d.set_originVertex(a);j=w.EVertex(a)}else e.push(c),m.unshift(c.get_nextLeftEdge()),f=c.get_oppositeEdge(),j=w.EEdge(f);else if(c=c.get_nextLeftEdge(),n.intersections2edges(c,d,l),c.get_isConstrained()){c=
this.splitEdge(c,l.x,l.y);for(k.set_fromVertex(c);null!=(f=k.next());)f.get_destinationVertex()==m[0].get_originVertex()&&m.unshift(f),f.get_destinationVertex()==h[h.length-1].get_destinationVertex()&&h.push(f.get_oppositeEdge());f=new r;j=new r;f.setDatas(a,j,null,null,!0,!0);j.setDatas(c,f,null,null,!0,!0);m.push(f);h.push(j);this.insertNewConstrainedEdge(b,f,e,m,h);e.splice(0,e.length);m.splice(0,m.length);h.splice(0,h.length);a=c;d.set_originVertex(a);j=w.EVertex(a)}else e.push(c),h.push(c.get_prevLeftEdge()),
f=c.get_oppositeEdge(),j=w.EEdge(f)}return b},insertNewConstrainedEdge:function(a,b,d,e,c){this._edges.push(b);this._edges.push(b.get_oppositeEdge());b.addFromConstraintSegment(a);b.get_oppositeEdge().fromConstraintSegments=b.fromConstraintSegments;a.addEdge(b);b.get_originVertex().addFromConstraintSegment(a);b.get_destinationVertex().addFromConstraintSegment(a);this.untriangulate(d);this.triangulate(e,!0);this.triangulate(c,!0)},deleteConstraintSegment:function(a){for(var b=[],d=null,e,c=0,f=a.get_edges().length;c<
f;)d=c++,d=a.get_edges()[d],d.removeFromConstraintSegment(a),0==d.fromConstraintSegments.length&&(d.set_isConstrained(!1),d.get_oppositeEdge().set_isConstrained(!1)),e=d.get_originVertex(),e.removeFromConstraintSegment(a),b.push(e);e=d.get_destinationVertex();e.removeFromConstraintSegment(a);b.push(e);c=0;for(f=b.length;c<f;)d=c++,this.deleteVertex(b[d]);a.dispose()},insertVertex:function(a,b){if(0>a||0>b||a>this._width||b>this._height)return null;this.__edgesToCheck.splice(0,this.__edgesToCheck.length);
var d=n.locatePosition(a,b,this),e=null;switch(d[1]){case 0:e=d[2];break;case 1:e=this.splitEdge(d[2],a,b);break;case 2:e=this.splitFace(d[2],a,b)}this.restoreAsDelaunay();return e},flipEdge:function(a){var b=a.get_oppositeEdge(),d=new r,e=new r,c=a.get_nextLeftEdge(),f=c.get_nextLeftEdge(),m=b.get_nextLeftEdge(),h=m.get_nextLeftEdge(),i=a.get_originVertex(),k=b.get_originVertex(),l=f.get_originVertex(),j=h.get_originVertex(),p=a.get_leftFace(),n=b.get_leftFace(),D=new I,o=new I;this._edges.push(d);
this._edges.push(e);this._faces.push(o);this._faces.push(D);d.setDatas(l,e,h,o,a.get_isReal(),a.get_isConstrained());e.setDatas(j,d,f,D,a.get_isReal(),a.get_isConstrained());o.setDatas(d);D.setDatas(e);k.get_edge()==b&&k.setDatas(c);i.get_edge()==a&&i.setDatas(m);c.set_nextLeftEdge(d);c.set_leftFace(o);f.set_nextLeftEdge(m);f.set_leftFace(D);m.set_nextLeftEdge(e);m.set_leftFace(D);h.set_nextLeftEdge(c);h.set_leftFace(o);a.dispose();b.dispose();this._edges.splice(this._edges.indexOf(a),1);this._edges.splice(this._edges.indexOf(b),
1);p.dispose();n.dispose();this._faces.splice(this._faces.indexOf(p),1);this._faces.splice(this._faces.indexOf(n),1);return e},splitEdge:function(a,b,d){this.__edgesToCheck.splice(0,this.__edgesToCheck.length);var e=a.get_oppositeEdge(),c=a.get_nextLeftEdge(),f=c.get_nextLeftEdge(),m=e.get_nextLeftEdge(),h=m.get_nextLeftEdge(),i=f.get_originVertex(),k=a.get_originVertex(),l=h.get_originVertex(),j=e.get_originVertex(),p=a.get_leftFace(),z=e.get_leftFace();if(1.0E-4>=(k.get_pos().x-b)*(k.get_pos().x-
b)+(k.get_pos().y-d)*(k.get_pos().y-d))return k;if(1.0E-4>=(j.get_pos().x-b)*(j.get_pos().x-b)+(j.get_pos().y-d)*(j.get_pos().y-d))return j;var o=new P,q=new r,s=new r,t=new r,x=new r,w=new r,u=new r,v=new r,Z=new r,C=new I,y=new I,A=new I,B=new I;this._vertices.push(o);this._edges.push(s);this._edges.push(q);this._edges.push(u);this._edges.push(w);this._edges.push(x);this._edges.push(t);this._edges.push(Z);this._edges.push(v);this._faces.push(B);this._faces.push(A);this._faces.push(y);this._faces.push(C);
o.setDatas(p.get_isReal()?s:x);o.get_pos().x=b;o.get_pos().y=d;n.projectOrthogonaly(o.get_pos(),a);s.setDatas(o,q,f,C,p.get_isReal());q.setDatas(i,s,Z,B,p.get_isReal());u.setDatas(o,w,m,y,a.get_isReal(),a.get_isConstrained());w.setDatas(k,u,s,C,a.get_isReal(),a.get_isConstrained());x.setDatas(o,t,h,A,z.get_isReal());t.setDatas(l,x,u,y,z.get_isReal());Z.setDatas(o,v,c,B,a.get_isReal(),a.get_isConstrained());v.setDatas(j,Z,x,A,a.get_isReal(),a.get_isConstrained());C.setDatas(s,p.get_isReal());y.setDatas(u,
z.get_isReal());A.setDatas(x,z.get_isReal());B.setDatas(Z,p.get_isReal());k.get_edge()==a&&k.setDatas(w);j.get_edge()==e&&j.setDatas(v);f.set_nextLeftEdge(w);f.set_leftFace(C);m.set_nextLeftEdge(t);m.set_leftFace(y);h.set_nextLeftEdge(v);h.set_leftFace(A);c.set_nextLeftEdge(q);c.set_leftFace(B);if(a.get_isConstrained()){b=a.fromConstraintSegments;w.fromConstraintSegments=b.slice(0);u.fromConstraintSegments=w.fromConstraintSegments;Z.fromConstraintSegments=b.slice(0);v.fromConstraintSegments=Z.fromConstraintSegments;
d=0;for(i=a.fromConstraintSegments.length;d<i;)k=d++,k=a.fromConstraintSegments[k].get_edges(),l=k.indexOf(a),-1!=l?(k.splice(l,1),k.splice(l,0,w),k.splice(l+1,0,Z)):(l=k.indexOf(e),k.splice(l,1),k.splice(l,0,v),k.splice(l,0,u));o.set_fromConstraintSegments(b.slice(0))}a.dispose();e.dispose();this._edges.splice(this._edges.indexOf(a),1);this._edges.splice(this._edges.indexOf(e),1);p.dispose();z.dispose();this._faces.splice(this._faces.indexOf(p),1);this._faces.splice(this._faces.indexOf(z),1);this.__centerVertex=
o;this.__edgesToCheck.push(f);this.__edgesToCheck.push(m);this.__edgesToCheck.push(h);this.__edgesToCheck.push(c);return o},splitFace:function(a,b,d){this.__edgesToCheck.splice(0,this.__edgesToCheck.length);var c=a.get_edge(),g=c.get_nextLeftEdge(),f=g.get_nextLeftEdge(),m=c.get_originVertex(),h=g.get_originVertex(),i=f.get_originVertex(),k=new P,l=new r,j=new r,p=new r,n=new r,o=new r,q=new r,s=new I,t=new I,x=new I;this._vertices.push(k);this._edges.push(l);this._edges.push(j);this._edges.push(p);
this._edges.push(n);this._edges.push(o);this._edges.push(q);this._faces.push(s);this._faces.push(t);this._faces.push(x);k.setDatas(j);k.get_pos().x=b;k.get_pos().y=d;l.setDatas(m,j,q,x);j.setDatas(k,l,c,s);p.setDatas(h,n,j,s);n.setDatas(k,p,g,t);o.setDatas(i,q,n,t);q.setDatas(k,o,f,x);s.setDatas(j);t.setDatas(n);x.setDatas(q);c.set_nextLeftEdge(p);c.set_leftFace(s);g.set_nextLeftEdge(o);g.set_leftFace(t);f.set_nextLeftEdge(l);f.set_leftFace(x);a.dispose();this._faces.splice(this._faces.indexOf(a),
1);this.__centerVertex=k;this.__edgesToCheck.push(c);this.__edgesToCheck.push(g);this.__edgesToCheck.push(f);return k},restoreAsDelaunay:function(){for(var a;0<this.__edgesToCheck.length;)a=this.__edgesToCheck.shift(),a.get_isReal()&&!a.get_isConstrained()&&!n.isDelaunay(a)&&(a.get_nextLeftEdge().get_destinationVertex()==this.__centerVertex?(this.__edgesToCheck.push(a.get_nextRightEdge()),this.__edgesToCheck.push(a.get_prevRightEdge())):(this.__edgesToCheck.push(a.get_nextLeftEdge()),this.__edgesToCheck.push(a.get_prevLeftEdge())),
this.flipEdge(a))},deleteVertex:function(a){var b,d=new Pa;d.set_fromVertex(a);d.realEdgesOnly=!1;var c,g=[];b=0==a.get_fromConstraintSegments().length;var f=[],m=!1,h=!1,i=[],k=[];if(b)for(;null!=(c=d.next());)g.push(c),f.push(c.get_nextLeftEdge());else{i=0;for(k=a.get_fromConstraintSegments().length;i<k;)if(m=i++,c=a.get_fromConstraintSegments()[m].get_edges(),c[0].get_originVertex()==a||c[c.length-1].get_destinationVertex()==a)return!1;for(i=0;null!=(c=d.next());)if(g.push(c),c.get_isConstrained()&&
(i++,2<i))return!1;var i=[],k=[],l=d=null,j=new r,p=new r;this._edges.push(j);this._edges.push(p);m=0;for(h=g.length;m<h;)c=m++,c=g[c],c.get_isConstrained()?null==d?(p.setDatas(c.get_destinationVertex(),j,null,null,!0,!0),i.push(j),i.push(c.get_nextLeftEdge()),k.push(p),d=c):null==l&&(j.setDatas(c.get_destinationVertex(),p,null,null,!0,!0),k.push(c.get_nextLeftEdge()),l=c):null==d?k.push(c.get_nextLeftEdge()):null==l?i.push(c.get_nextLeftEdge()):k.push(c.get_nextLeftEdge());m=d.get_leftFace().get_isReal();
h=l.get_leftFace().get_isReal();j.fromConstraintSegments=d.fromConstraintSegments.slice(0);p.fromConstraintSegments=j.fromConstraintSegments;for(var n,o=0,q=a.get_fromConstraintSegments().length;o<q;)c=o++,c=a.get_fromConstraintSegments()[c].get_edges(),n=c.indexOf(d),-1!=n?(c.splice(n-1,2),c.splice(n-1,0,j)):(n=c.indexOf(l)-1,c.splice(n,2),c.splice(n,0,p))}d=0;for(l=g.length;d<l;)j=d++,c=g[j],j=c.get_leftFace(),this._faces.splice(this._faces.indexOf(j),1),j.dispose(),c.get_destinationVertex().set_edge(c.get_nextLeftEdge()),
this._edges.splice(this._edges.indexOf(c.get_oppositeEdge()),1),c.get_oppositeEdge().dispose(),this._edges.splice(this._edges.indexOf(c),1),c.dispose();this._vertices.splice(this._vertices.indexOf(a),1);a.dispose();b?this.triangulate(f,!0):(this.triangulate(i,m),this.triangulate(k,h));return!0},untriangulate:function(a){for(var b=new v,d,c=0,g=a.length;c<g;){var f=c++;d=a[f];if(null==function(){var a=d.get_originVertex();return b.h[a.__id__]}(this)){d.get_originVertex().set_edge(d.get_prevLeftEdge().get_oppositeEdge());
var m=d.get_originVertex();b.set(m,!0);!0}null==function(){var a=d.get_destinationVertex();return b.h[a.__id__]}(this)&&(d.get_destinationVertex().set_edge(d.get_nextLeftEdge()),m=d.get_destinationVertex(),b.set(m,!0),!0);this._faces.splice(this._faces.indexOf(d.get_leftFace()),1);d.get_leftFace().dispose();f==a.length-1&&(this._faces.splice(this._faces.indexOf(d.get_rightFace()),1),d.get_rightFace().dispose())}c=0;for(g=a.length;c<g;)f=c++,d=a[f],this._edges.splice(this._edges.indexOf(d.get_oppositeEdge()),
1),this._edges.splice(this._edges.indexOf(d),1),d.get_oppositeEdge().dispose(),d.dispose()},triangulate:function(a,b){if(!(2>a.length))if(2==a.length)ka.trace("  - edge0: "+a[0].get_originVertex().get_id()+" -> "+a[0].get_destinationVertex().get_id(),{fileName:"Mesh.hx",lineNumber:1404,className:"hxDaedalus.data.Mesh",methodName:"triangulate"}),ka.trace("  - edge1: "+a[1].get_originVertex().get_id()+" -> "+a[1].get_destinationVertex().get_id(),{fileName:"Mesh.hx",lineNumber:1405,className:"hxDaedalus.data.Mesh",
methodName:"triangulate"});else if(3==a.length){var d=new I;d.setDatas(a[0],b);this._faces.push(d);a[0].set_leftFace(d);a[1].set_leftFace(d);a[2].set_leftFace(d);a[0].set_nextLeftEdge(a[1]);a[1].set_nextLeftEdge(a[2]);a[2].set_nextLeftEdge(a[0])}else{for(var d=a[0],c=d.get_originVertex(),g=d.get_destinationVertex(),f,m,h=new F,i=!1,k=0,l=2,j=a.length;l<j;){var p=l++;f=a[p].get_originVertex();if(1==n.getRelativePosition2(f.get_pos().x,f.get_pos().y,d)){k=p;i=!0;n.getCircumcenter(c.get_pos().x,c.get_pos().y,
g.get_pos().x,g.get_pos().y,f.get_pos().x,f.get_pos().y,h);f=(c.get_pos().x-h.x)*(c.get_pos().x-h.x)+(c.get_pos().y-h.y)*(c.get_pos().y-h.y);f-=1.0E-4;for(var o=2,q=a.length;o<q;)if(m=o++,m!=p&&(m=a[m].get_originVertex(),m=(m.get_pos().x-h.x)*(m.get_pos().x-h.x)+(m.get_pos().y-h.y)*(m.get_pos().y-h.y),m<f)){i=!1;break}if(i)break}}if(!i){k="";g=0;for(h=a.length;g<h;)i=g++,k+=a[i].get_originVertex().get_pos().x+" , ",k+=a[i].get_originVertex().get_pos().y+" , ",k+=a[i].get_destinationVertex().get_pos().x+
" , ",k+=a[i].get_destinationVertex().get_pos().y+" , ";k=2}h=g=i=null;k<a.length-1&&(i=new r,g=new r,this._edges.push(i),this._edges.push(g),i.setDatas(c,g,null,null,b,!1),g.setDatas(a[k].get_originVertex(),i,null,null,b,!1),c=a.slice(k),c.push(i),this.triangulate(c,b));2<k&&(h=new r,c=new r,this._edges.push(h),this._edges.push(c),h.setDatas(a[1].get_originVertex(),c,null,null,b,!1),c.setDatas(a[k].get_originVertex(),h,null,null,b,!1),i=a.slice(1,k),i.push(c),this.triangulate(i,b));this.triangulate(2==
k?[d,a[1],g]:k==a.length-1?[d,h,a[k]]:[d,h,g],b)}},findPositionFromBounds:function(a,b){return 0>=a?0>=b?1:b>=this._height?7:8:a>=this._width?0>=b?3:b>=this._height?5:4:0>=b?2:b>=this._height?6:0},traverse:function(a,b){var d,c;c=new ib;c.set_fromMesh(this);var g;g=new jb;for(var f=new v;null!=(d=c.next());)if(f.set(d,!0),!0,this.vertexIsInsideAABB(d,this)){a(d);for(g.set_fromVertex(d);null!=(d=g.next());){var m=d.get_originVertex();f.h[m.__id__]||b(d)}}},vertexIsInsideAABB:function(a,b){return 0>
a.get_pos().x||a.get_pos().x>b.get_width()||0>a.get_pos().y||a.get_pos().y>b.get_height()?!1:!0}};var ca=function(){this._id=ca.INC;ca.INC++;this._pivotY=this._pivotX=0;this._matrix=new kb;this._scaleY=this._scaleX=1;this._y=this._x=this._rotation=0;this._coordinates=[];this._hasChanged=!1};ca.__name__=!0;ca.prototype={updateMatrixFromValues:function(){this._matrix.identity();this._matrix.translate(-this._pivotX,-this._pivotY);this._matrix.scale(this._scaleX,this._scaleY);this._matrix.rotate(this._rotation);
this._matrix.translate(this._x,this._y)},set_x:function(a){this._x!=a&&(this._x=a,this._hasChanged=!0);return a},set_y:function(a){this._y!=a&&(this._y=a,this._hasChanged=!0);return a},get_matrix:function(){return this._matrix},get_coordinates:function(){return this._coordinates},set_coordinates:function(a){this._coordinates=a;this._hasChanged=!0;return a},get_constraintShape:function(){return this._constraintShape},set_constraintShape:function(a){this._constraintShape=a;this._hasChanged=!0;return a}};
var P=function(){this._id=P.INC;P.INC++;this._pos=new F;this._fromConstraintSegments=[]};P.__name__=!0;P.prototype={get_id:function(){return this._id},get_isReal:function(){return this._isReal},get_pos:function(){return this._pos},get_fromConstraintSegments:function(){return this._fromConstraintSegments},set_fromConstraintSegments:function(a){return this._fromConstraintSegments=a},setDatas:function(a,b){null==b&&(b=!0);this._isReal=b;this._edge=a},addFromConstraintSegment:function(a){-1==this._fromConstraintSegments.indexOf(a)&&
this._fromConstraintSegments.push(a)},removeFromConstraintSegment:function(a){a=this._fromConstraintSegments.indexOf(a);-1!=a&&this._fromConstraintSegments.splice(a,1)},dispose:function(){this._fromConstraintSegments=this._edge=this._pos=null},get_edge:function(){return this._edge},set_edge:function(a){return this._edge=a}};var w={__ename__:!0,__constructs__:["EVertex","EEdge","EFace","ENull"]};w.EVertex=function(a){a=["EVertex",0,a];a.__enum__=w;return a};w.EEdge=function(a){a=["EEdge",1,a];a.__enum__=
w;return a};w.EFace=function(a){a=["EFace",2,a];a.__enum__=w;return a};w.ENull=["ENull",3];w.ENull.__enum__=w;var F=function(a,b){null==b&&(b=0);null==a&&(a=0);this.x=a;this.y=b};F.__name__=!0;F.prototype={setXY:function(a,b){this.x=a;this.y=b},get_length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}};var n=function(){};n.__name__=!0;n.locatePosition=function(a,b,d){null==n._randGen&&(n._randGen=new wa);n._randGen.set_seed(10*a+4*b|0);n.__samples.splice(0,n.__samples.length);var c=S["int"](Math.pow(d._vertices.length,
0.3333333333333333));n._randGen.rangeMin=0;n._randGen.rangeMax=d._vertices.length-1;for(var g=0;g<c;){g++;var f=n._randGen.next();n.__samples.push(d._vertices[f])}for(var m,h,g=Math.POSITIVE_INFINITY,d=null,f=0;f<c;)m=f++,m=n.__samples[m],h=m.get_pos(),h=(h.x-a)*(h.x-a)+(h.y-b)*(h.y-b),h<g&&(g=h,d=m);var i,c=new lb;c.set_fromVertex(d);i=c.next();var c=new v,g=new Oa,k=w.ENull;for(m=0;c.h[i.__id__]||function(){var d;switch((k=n.isInFace(a,b,i))[1]){case 3:d=!0;break;default:d=!1}return d}(this);){c.h[i.__id__];
m++;50==m&&null;g.set_fromFace(i);do{d=g.next();if(null==d)return w.ENull;f=n.getRelativePosition(a,b,d)}while(1==f||0==f);i=d.get_rightFace()}return k};n.isCircleIntersectingAnyConstraint=function(a,b,d,c){if(0>=a||a>=c.get_width()||0>=b||b>=c.get_height())return!0;var c=n.locatePosition(a,b,c),g;switch(c[1]){case 0:g=c[2].get_edge().get_leftFace();break;case 1:g=c[2].get_leftFace();break;case 2:g=c[2];break;case 3:g=null}var c=d*d,f;f=g.get_edge().get_originVertex().get_pos();f=(f.x-a)*(f.x-a)+
(f.y-b)*(f.y-b);if(f<=c)return!0;f=g.get_edge().get_nextLeftEdge().get_originVertex().get_pos();f=(f.x-a)*(f.x-a)+(f.y-b)*(f.y-b);if(f<=c)return!0;f=g.get_edge().get_nextLeftEdge().get_nextLeftEdge().get_originVertex().get_pos();f=(f.x-a)*(f.x-a)+(f.y-b)*(f.y-b);if(f<=c)return!0;c=[];c.push(g.get_edge());c.push(g.get_edge().get_nextLeftEdge());c.push(g.get_edge().get_nextLeftEdge().get_nextLeftEdge());for(var m,h=new v;0<c.length;)if(m=c.pop(),h.set(m,!0),!0,g=m.get_originVertex().get_pos(),f=m.get_destinationVertex().get_pos(),
g=n.intersectionsSegmentCircle(g.x,g.y,f.x,f.y,a,b,d)){if(m.get_isConstrained())return!0;m=m.get_oppositeEdge().get_nextLeftEdge();!h.h[m.__id__]&&!function(){var a=m.get_oppositeEdge();return h.h[a.__id__]}(this)&&-1==c.indexOf(m)&&-1==c.indexOf(m.get_oppositeEdge())&&c.push(m);m=m.get_nextLeftEdge();!h.h[m.__id__]&&!function(){var a=m.get_oppositeEdge();return h.h[a.__id__]}(this)&&-1==c.indexOf(m)&&-1==c.indexOf(m.get_oppositeEdge())&&c.push(m)}return!1};n.getDirection=function(a,b,d,c,g,f){a=
(g-a)*(c-b)+(f-b)*(-d+a);return 0==a?0:0<a?1:-1};n.getDirection2=function(a,b,d,c,g,f){var m=(g-a)*(c-b)+(f-b)*(-d+a);if(0!=m)if(0<m){if(!(1.0E-4>=n.distanceSquaredPointToLine(g,f,a,b,d,c)))return 1}else if(!(1.0E-4>=n.distanceSquaredPointToLine(g,f,a,b,d,c)))return-1;return 0};n.getRelativePosition=function(a,b,d){return n.getDirection(d.get_originVertex().get_pos().x,d.get_originVertex().get_pos().y,d.get_destinationVertex().get_pos().x,d.get_destinationVertex().get_pos().y,a,b)};n.getRelativePosition2=
function(a,b,d){return n.getDirection2(d.get_originVertex().get_pos().x,d.get_originVertex().get_pos().y,d.get_destinationVertex().get_pos().x,d.get_destinationVertex().get_pos().y,a,b)};n.isInFace=function(a,b,d){var c=w.ENull,g=d.get_edge(),f=g.get_nextLeftEdge(),m=f.get_nextLeftEdge();if(0<=n.getRelativePosition(a,b,g)&&0<=n.getRelativePosition(a,b,f)&&0<=n.getRelativePosition(a,b,m))var c=g.get_originVertex(),h=f.get_originVertex(),i=m.get_originVertex(),k=c.get_pos().x,l=c.get_pos().y,j=h.get_pos().x,
p=h.get_pos().y,o=i.get_pos().x,q=i.get_pos().y,r=(a-k)*(j-k)+(b-l)*(p-l),s=(a-j)*(o-j)+(b-p)*(q-p),t=(a-o)*(k-o)+(b-q)*(l-q),s=1.0E-4>=(j-a)*(j-a)+(p-b)*(p-b)-s*s/((o-j)*(o-j)+(q-p)*(q-p)),o=1.0E-4>=(o-a)*(o-a)+(q-b)*(q-b)-t*t/((k-o)*(k-o)+(l-q)*(l-q)),c=1.0E-4>=(k-a)*(k-a)+(l-b)*(l-b)-r*r/((j-k)*(j-k)+(p-l)*(p-l))?o?w.EVertex(c):s?w.EVertex(h):w.EEdge(g):s?o?w.EVertex(i):w.EEdge(f):o?w.EEdge(m):w.EFace(d);return c};n.isDelaunay=function(a){var b=a.get_originVertex(),d=a.get_destinationVertex(),
c=a.get_nextLeftEdge().get_destinationVertex(),a=a.get_nextRightEdge().get_destinationVertex();n.getCircumcenter(c.get_pos().x,c.get_pos().y,b.get_pos().x,b.get_pos().y,d.get_pos().x,d.get_pos().y,n.__circumcenter);b=(c.get_pos().x-n.__circumcenter.x)*(c.get_pos().x-n.__circumcenter.x)+(c.get_pos().y-n.__circumcenter.y)*(c.get_pos().y-n.__circumcenter.y);return(a.get_pos().x-n.__circumcenter.x)*(a.get_pos().x-n.__circumcenter.x)+(a.get_pos().y-n.__circumcenter.y)*(a.get_pos().y-n.__circumcenter.y)>=
b};n.getCircumcenter=function(a,b,d,c,g,f,m){null==m&&(m=new F);var h=(a+d)/2,i=(b+c)/2,g=(h*(a-g)+(i-(b+f)/2)*(b-f)+(a+g)/2*(g-a))/(a*(f-c)+d*(b-f)+g*(c-b));m.x=h+g*(c-b);m.y=i-g*(d-a);return m};n.intersections2segments=function(a,b,d,c,g,f,m,h,i,k,l){null==l&&(l=!1);var j=0,n=0,o,q=(a-d)*(f-h)+(c-b)*(g-m);if(0==q)o=!1;else if(o=!0,!l||null!=i||null!=k)j=(a*(f-h)+b*(m-g)+g*h-f*m)/q,n=(a*(f-c)+b*(d-g)-d*f+c*g)/q,!l&&!(0<=j&&1>=j&&0<=n&&1>=n)&&(o=!1);o&&(null!=i&&(i.x=a+j*(d-a),i.y=b+j*(c-b)),null!=
k&&(k.push(j),k.push(n)));return o};n.intersections2edges=function(a,b,d,c,g){null==g&&(g=!1);return n.intersections2segments(a.get_originVertex().get_pos().x,a.get_originVertex().get_pos().y,a.get_destinationVertex().get_pos().x,a.get_destinationVertex().get_pos().y,b.get_originVertex().get_pos().x,b.get_originVertex().get_pos().y,b.get_destinationVertex().get_pos().x,b.get_destinationVertex().get_pos().y,d,c,g)};n.projectOrthogonaly=function(a,b){var d=b.get_originVertex().get_pos().x,c=b.get_originVertex().get_pos().y,
g=b.get_destinationVertex().get_pos().x,f=b.get_destinationVertex().get_pos().y,m=a.x,h=a.y,m=(d*d-d*g-d*m+c*c-c*f-c*h+g*m+f*h)/(d*d-2*d*g+c*c-2*c*f+g*g+f*f);a.x=d+m*(g-d);a.y=c+m*(f-c)};n.intersections2Circles=function(a,b,d,c,g,f,m){var h=(c-a)*(c-a)+(g-b)*(g-b);if((a!=c||b!=g)&&h<=(d+f)*(d+f)&&h>=(d-f)*(d-f)){var i=Math.sqrt(((d+f)*(d+f)-h)*(h-(f-d)*(f-d))),k=(a+c)/2+(c-a)*(d*d-f*f)/(2*h),d=(b+g)/2+(g-b)*(d*d-f*f)/(2*h),b=(g-b)/(2*h),c=(c-a)/(2*h);if(null!=m){a=0;for(i=[k+b*i,d-c*i,k-b*i,d+c*i];a<
i.length;)k=i[a],++a,m.push(k)}return!0}return!1};n.intersectionsSegmentCircle=function(a,b,d,c,g,f,m,h){var i=a*a,k=b*b,l=c*c-2*c*b+k+d*d-2*d*a+i,j=2*b*f-2*i+2*c*b-2*k+2*d*a-2*d*g+2*a*g-2*c*f,g=j*j-4*l*(k+f*f+g*g-2*b*f-2*a*g+i-m*m);if(0>g)return!1;if(0==g){g=-j/(2*l);if(0>g||1<g)return!1;if(null!=h){l=0;for(a=[a+g*(d-a),b+g*(c-b),g];l<a.length;)b=a[l],++l,h.push(b)}return!0}f=Math.sqrt(g);g=(-j+f)/(2*l);l=(-j-f)/(2*l);j=!1;if(0<=g&&1>=g){if(null!=h){j=0;for(g=[a+g*(d-a),b+g*(c-b),g];j<g.length;)f=
g[j],++j,h.push(f)}j=!0}if(0<=l&&1>=l){if(null!=h){j=0;for(a=[a+l*(d-a),b+l*(c-b),l];j<a.length;)b=a[j],++j,h.push(b)}j=!0}return j};n.tangentsPointToCircle=function(a,b,d,c,g,f){var m=(a+d)/2,h=(b+c)/2,a=0.5*Math.sqrt((a-d)*(a-d)+(b-c)*(b-c));return n.intersections2Circles(m,h,a,d,c,g,f)};n.tangentsCrossCircleToCircle=function(a,b,c,e,g,f){var m=Math.sqrt((b-e)*(b-e)+(c-g)*(c-g));if(n.intersections2Circles(b,c,a,b+(e-b)/4,c+(g-c)/4,m/4,f)){for(var a=f[0],h=f[1],i=(b+e)/2,k=(c+g)/2,m=((a-i)*(g-c)+
(h-k)*(-e+b))/(m*m),c=2*(i+m*(g-c))-a,e=2*(k-m*(e-b))-h,b=0,a=[c+f[2]-a,f[3]+e-h,c,e];b<a.length;)h=a[b],++b,f.push(h);return!0}return!1};n.tangentsParalCircleToCircle=function(a,b,c,e,g,f){for(var m=Math.sqrt((b-e)*(b-e)+(c-g)*(c-g)),h=b+a*(g-c)/m,m=c+a*(-e+b)/m,i=2*b-h,k=2*c-m,a=0,b=[h,m,i,k,i+e-b,k+g-c,h+e-b,m+g-c];a<b.length;)c=b[a],++a,f.push(c)};n.distanceSquaredPointToLine=function(a,b,c,e,g,f){var m=(a-c)*(g-c)+(b-e)*(f-e);return(c-a)*(c-a)+(e-b)*(e-b)-m*m/((g-c)*(g-c)+(f-e)*(f-e))};n.distanceSquaredPointToSegment=
function(a,b,c,e,g,f){var m=(g-c)*(g-c)+(f-e)*(f-e),h=((a-c)*(g-c)+(b-e)*(f-e))/m;return 0>h?(a-c)*(a-c)+(b-e)*(b-e):1>=h?(c-a)*(c-a)+(e-b)*(e-b)-h*h*m:(a-g)*(a-g)+(b-f)*(b-f)};n.distanceSquaredVertexToEdge=function(a,b){return n.distanceSquaredPointToSegment(a.get_pos().x,a.get_pos().y,b.get_originVertex().get_pos().x,b.get_originVertex().get_pos().y,b.get_destinationVertex().get_pos().x,b.get_destinationVertex().get_pos().y)};var kb=function(a,b,c,e,g,f){null==f&&(f=0);null==g&&(g=0);null==e&&(e=
1);null==c&&(c=0);null==b&&(b=0);null==a&&(a=1);this.a=a;this.b=b;this.c=c;this.d=e;this.e=g;this.f=f};kb.__name__=!0;kb.prototype={identity:function(){this.a=1;this.c=this.b=0;this.d=1;this.f=this.e=0},translate:function(a,b){this.e+=a;this.f+=b},scale:function(a,b){this.a*=a;this.b*=b;this.c*=a;this.d*=b;this.e*=a;this.f*=b},rotate:function(a){var b=Math.cos(a),a=Math.sin(a),c=this.a*a+this.b*b,e=this.c*b+this.d*-a,g=this.c*a+this.d*b,f=this.e*b+this.f*-a,m=this.e*a+this.f*b;this.a=this.a*b+this.b*
-a;this.b=c;this.c=e;this.d=g;this.e=f;this.f=m},transformX:function(a,b){return this.a*a+this.c*b+this.e},transformY:function(a,b){return this.b*a+this.d*b+this.f}};var wa=function(a,b,c){null==c&&(c=1);null==b&&(b=0);null==a&&(a=1234);this._originalSeed=this._currSeed=a;this.rangeMin=b;this.rangeMax=c;this._numIter=0};wa.__name__=!0;wa.prototype={set_seed:function(a){return this._originalSeed=this._currSeed=a},reset:function(){this._currSeed=this._originalSeed;this._numIter=0},next:function(){var a=
1*this._currSeed;for(this._tempString=S.string(a*a);8>this._tempString.length;)this._tempString="0"+this._tempString;this._currSeed=S.parseInt(W.substr(this._tempString,1,5));a=Math.round(this.rangeMin+this._currSeed/99999*(this.rangeMax-this.rangeMin));0==this._currSeed&&(this._currSeed=this._originalSeed+this._numIter);this._numIter++;200==this._numIter&&this.reset();return a},nextInRange:function(a,b){this.rangeMin=a;this.rangeMax=b;return this.next()},shuffle:function(a){for(var b=a.length;0<
b;){var c=this.nextInRange(0,b-1);b--;var e=a[b];a[b]=a[c];a[c]=e}}};var ka=function(){};ka.__name__=!0;ka.assertFalse=function(){};ka.trace=function(){};var Ua=function(){};Ua.__name__=!0;Ua.buildRectangle=function(a,b){var c=new P,e=new P,g=new P,f=new P,m=new r,h=new r,i=new r,k=new r,l=new r,j=new r,n=new r,o=new r,q=new r,s=new r,t=new r,w=new r,x=new I,u=new I,v=new I,C=new I,y=new Y,A=new V,B=new V,E=new V,F=new V,G=new la(a,b);c.get_pos().setXY(-10,-10);e.get_pos().setXY(a+10,-10);g.get_pos().setXY(a+
10,b+10);f.get_pos().setXY(-10,b+10);c.setDatas(m);e.setDatas(i);g.setDatas(l);f.setDatas(n);m.setDatas(c,h,i,C,!0,!0);h.setDatas(e,m,o,x,!0,!0);i.setDatas(e,k,w,C,!0,!0);k.setDatas(g,i,q,u,!0,!0);l.setDatas(g,j,n,v,!0,!0);j.setDatas(f,l,k,u,!0,!0);n.setDatas(f,o,t,v,!0,!0);o.setDatas(c,n,s,x,!0,!0);q.setDatas(e,s,j,u,!0,!1);s.setDatas(f,q,h,x,!0,!1);t.setDatas(c,w,l,v,!1,!1);w.setDatas(g,t,m,C,!1,!1);x.setDatas(s);u.setDatas(q);v.setDatas(l,!1);C.setDatas(i,!1);c.set_fromConstraintSegments([A,F]);
e.set_fromConstraintSegments([A,B]);g.set_fromConstraintSegments([B,E]);f.set_fromConstraintSegments([E,F]);m.fromConstraintSegments.push(A);h.fromConstraintSegments.push(A);i.fromConstraintSegments.push(B);k.fromConstraintSegments.push(B);l.fromConstraintSegments.push(E);j.fromConstraintSegments.push(E);n.fromConstraintSegments.push(F);o.fromConstraintSegments.push(F);A.get_edges().push(m);B.get_edges().push(i);E.get_edges().push(l);F.get_edges().push(n);A.fromShape=y;B.fromShape=y;E.fromShape=y;
F.fromShape=y;for(var H=0,A=[A,B,E,F];H<A.length;)B=A[H],++H,y.segments.push(B);H=0;for(c=[c,e,g,f];H<c.length;)e=c[H],++H,G._vertices.push(e);c=0;for(m=[m,h,i,k,l,j,n,o,q,s,t,w];c<m.length;)h=m[c],++c,G._edges.push(h);m=0;for(x=[x,u,v,C];m<x.length;)u=x[m],++m,G._faces.push(u);G.get___constraintShapes().push(y);y=[];x=0;for(u=[0,0,a,0];x<u.length;)v=u[x],++x,y.push(v);x=0;for(u=[a,0,a,b];x<u.length;)v=u[x],++x,y.push(v);x=0;for(u=[a,b,0,b];x<u.length;)v=u[x],++x,y.push(v);x=0;for(u=[0,b,0,0];x<u.length;)v=
u[x],++x,y.push(v);G.set_clipping(!1);G.insertConstraintShape(y);G.set_clipping(!0);return G};var wb=function(){};wb.__name__=!0;var oa=function(a,b,c){null==c&&(c=1);null==b&&(b=0);null==a&&(a=1);this._prevX=this._prevY=0;A.call(this);this.lineStyle(a,b,c);a=new u;a.set_pointerEnabled(!1);this._container=(new R).add(a)};oa.__name__=!0;oa.__super__=A;oa.prototype=C(A.prototype,{get_name:function(){return"GraphicsComponent_1"},onStart:function(){this.owner.addChild(this._container)},lineStyle:function(a,
b,c){null==c&&(c=1);null==b&&(b=0);null==a&&(a=1);this._color=b;this._thickness=a;this._alpha=c},drawCircle:function(a,b,c,e){null==e&&(e=45);for(var g=0,f=e+1;g<f;){var m=g++,h=6.283185307179586*(m/e);0==m?this.moveTo(a+Math.cos(h)*c,b+Math.sin(h)*c):this.lineTo(a+Math.cos(h)*c,b+Math.sin(h)*c)}},lineTo:function(a,b){var c=this._prevX-a,e=this._prevY-b,g=Math.sqrt(c*c+e*e),c=Math.atan2(e,c),g=(new na(this._color,g,this._thickness)).setRotation(180*c/3.141592653589793).setXY(a,b).setAnchor(0,this._thickness/
2).setAlpha(this._alpha);g.set_pixelSnapping(!1);this._container.addChild((new R).add(g));this._prevX=a;this._prevY=b},moveTo:function(a,b){this._prevX=a;this._prevY=b},clear:function(){this._container.disposeChildren();this._prevY=this._prevX=0},dispose:function(){this._container.dispose();this._container=null;A.prototype.dispose.call(this)}});var Qa=function(a){this.savedColor=a._color;this.savedAlpha=a._alpha;this.inFillingMode=!1;this.graphics=a};Qa.__name__=!0;Qa.__interfaces__=[wb];Qa.prototype=
{beginFill:function(a,b){null==b&&(b=1);this.inFillingMode||(this.savedColor=this.graphics._color,this.savedAlpha=this.graphics._alpha);this.graphics.lineStyle(this.graphics._thickness,a,b);this.inFillingMode=!0},endFill:function(){this.graphics.lineStyle(this.graphics._thickness,this.savedColor,this.savedAlpha);this.inFillingMode=!1},drawCircle:function(a,b,c){this.graphics.drawCircle(a,b,c)}};var Oa=function(){};Oa.__name__=!0;Oa.prototype={set_fromFace:function(a){this._fromFace=a;this._nextEdge=
this._fromFace.get_edge();return a},next:function(){null!=this._nextEdge?(this._resultEdge=this._nextEdge,this._nextEdge=this._nextEdge.get_nextLeftEdge(),this._nextEdge==this._fromFace.get_edge()&&(this._nextEdge=null)):this._resultEdge=null;return this._resultEdge}};var ib=function(){};ib.__name__=!0;ib.prototype={set_fromMesh:function(a){this._fromMesh=a;this._currIndex=0;return a},next:function(){do if(this._currIndex<this._fromMesh._vertices.length)this._resultVertex=this._fromMesh._vertices[this._currIndex],
this._currIndex++;else{this._resultVertex=null;break}while(!this._resultVertex.get_isReal());return this._resultVertex}};var lb=function(){};lb.__name__=!0;lb.prototype={set_fromVertex:function(a){this._fromVertex=a;this._nextEdge=this._fromVertex.get_edge();return a},next:function(){if(null!=this._nextEdge){do if(this._resultFace=this._nextEdge.get_leftFace(),this._nextEdge=this._nextEdge.get_rotLeftEdge(),this._nextEdge==this._fromVertex.get_edge()){this._nextEdge=null;this._resultFace.get_isReal()||
(this._resultFace=null);break}while(!this._resultFace.get_isReal())}else this._resultFace=null;return this._resultFace}};var jb=function(){};jb.__name__=!0;jb.prototype={set_fromVertex:function(a){this._fromVertex=a;for(this._nextEdge=this._fromVertex.get_edge();!this._nextEdge.get_isReal();)this._nextEdge=this._nextEdge.get_rotLeftEdge();return a},next:function(){if(null!=this._nextEdge){this._resultEdge=this._nextEdge.get_oppositeEdge();do if(this._nextEdge=this._nextEdge.get_rotLeftEdge(),this._nextEdge==
this._fromVertex.get_edge()){this._nextEdge=null;break}while(!this._nextEdge.get_isReal())}else this._resultEdge=null;return this._resultEdge}};var Pa=function(){this.realEdgesOnly=!0};Pa.__name__=!0;Pa.prototype={set_fromVertex:function(a){this._fromVertex=a;for(this._nextEdge=this._fromVertex.get_edge();this.realEdgesOnly&&!this._nextEdge.get_isReal();)this._nextEdge=this._nextEdge.get_rotLeftEdge();return a},next:function(){if(null!=this._nextEdge){this._resultEdge=this._nextEdge;do if(this._nextEdge=
this._nextEdge.get_rotLeftEdge(),this._nextEdge==this._fromVertex.get_edge()){this._nextEdge=null;break}while(this.realEdgesOnly&&!this._nextEdge.get_isReal())}else this._resultEdge=null;return this._resultEdge}};var xa=function(a){this.entitiesAlpha=0.75;this.entitiesWidth=1;this.entitiesColor=65280;this.pathsAlpha=0.75;this.pathsWidth=1.5;this.pathsColor=16760848;this.verticesAlpha=0.25;this.verticesRadius=0.5;this.verticesColor=255;this.constraintsAlpha=1;this.constraintsWidth=2;this.constraintsColor=
16711680;this.edgesAlpha=0.25;this.edgesWidth=1;this.edgesColor=10066329;this.graphics=new Qa(a)};xa.__name__=!0;xa.prototype={drawVertex:function(a){this.graphics.graphics.lineStyle(this.verticesRadius,this.verticesColor,this.verticesAlpha);this.graphics.beginFill(this.verticesColor,this.verticesAlpha);this.graphics.graphics.drawCircle(a.get_pos().x,a.get_pos().y,this.verticesRadius);this.graphics.endFill()},drawEdge:function(a){a.get_isConstrained()?this.graphics.graphics.lineStyle(this.constraintsWidth,
this.constraintsColor,this.constraintsAlpha):this.graphics.graphics.lineStyle(this.edgesWidth,this.edgesColor,this.edgesAlpha);this.graphics.graphics.moveTo(a.get_originVertex().get_pos().x,a.get_originVertex().get_pos().y);this.graphics.graphics.lineTo(a.get_destinationVertex().get_pos().x,a.get_destinationVertex().get_pos().y)},drawMesh:function(a,b){null==b&&(b=!1);b&&this.graphics.graphics.clear();a.traverse(Q(this,this.drawVertex),Q(this,this.drawEdge))},drawEntity:function(a,b){null==b&&(b=
!1);b&&this.graphics.graphics.clear();this.graphics.graphics.lineStyle(this.entitiesWidth,this.entitiesColor,this.entitiesAlpha);this.graphics.beginFill(this.entitiesColor,this.entitiesAlpha);this.graphics.drawCircle(a.x,a.y,a.get_radius());this.graphics.endFill()},drawPath:function(a,b){null==b&&(b=!1);b&&this.graphics.graphics.clear();if(0!=a.length){this.graphics.graphics.lineStyle(this.pathsWidth,this.pathsColor,this.pathsAlpha);this.graphics.graphics.moveTo(a[0],a[1]);for(var c=2;c<a.length;)this.graphics.graphics.lineTo(a[c],
a[c+1]),this.graphics.graphics.moveTo(a[c],a[c+1]),c+=2}}};var $=function(){};$.__name__=!0;$.__string_rec=function(a,b){if(null==a)return"null";if(5<=b.length)return"<...>";var c=typeof a;if("function"==c&&(a.__name__||a.__ename__))c="object";switch(c){case "object":if(a instanceof Array){if(a.__enum__){if(2==a.length)return a[0];for(var c=a[0]+"(",b=b+"\t",e=2,g=a.length;e<g;)var f=e++,c=2!=f?c+(","+$.__string_rec(a[f],b)):c+$.__string_rec(a[f],b);return c+")"}c=a.length;e="[";b+="\t";for(g=0;g<
c;)f=g++,e+=(0<f?",":"")+$.__string_rec(a[f],b);return e+"]"}try{e=a.toString}catch(m){return"???"}if(null!=e&&e!=Object.toString&&(c=a.toString(),"[object Object]"!=c))return c;c=null;e="{\n";b+="\t";g=null!=a.hasOwnProperty;for(c in a)if(!g||a.hasOwnProperty(c))"prototype"==c||"__class__"==c||"__super__"==c||"__interfaces__"==c||"__properties__"==c||(2!=e.length&&(e+=", \n"),e+=b+c+" : "+$.__string_rec(a[c],b));b=b.substring(1);return e+("\n"+b+"}");case "function":return"<function>";case "string":return a;
default:return""+a}};var Ya=function(){};Ya.__name__=!0;Ya.getContextWebGL=function(a,b){for(var c=0,e=["webgl","experimental-webgl"];c<e.length;){var g=e[c];++c;g=a.getContext(g,b);if(null!=g)return g}return null};var xb=0;Math.NaN=Number.NaN;Math.NEGATIVE_INFINITY=Number.NEGATIVE_INFINITY;Math.POSITIVE_INFINITY=Number.POSITIVE_INFINITY;Math.isFinite=function(a){return isFinite(a)};Math.isNaN=function(a){return isNaN(a)};String.__name__=!0;Array.__name__=!0;Date.__name__=["Date"];ea.instance=new ea;
B.DISPATCHING_SENTINEL=new ha(null,null);t.root=new R;t.uncaughtError=new y;t.hidden=new M(!1);t.volume=new H(1);t._platform=ea.instance;t._calledInit=!1;u._scratchPoint=new pb;N._sharedEvent=new ab;L._sharedEvent=new bb;G._sharedEvent=new cb;s.VENDOR_PREFIXES=["webkit","moz","ms","o","khtml"];s.SHOULD_HIDE_MOBILE_BROWSER=window.top==window&&(new Ra("Mobile(/.*)? Safari","")).match(window.navigator.userAgent);O._scratchMatrix=new T;v.count=0;V.INC=0;Y.INC=0;r.INC=0;I.INC=0;la.INC=0;ca.INC=0;P.INC=
0;n.__samples=[];n.__circumcenter=new F;da.main()})();
