/** Cooked with Flambe, https://getflambe.com */
'use strict';(function(){function s(a,b){function c(){}c.prototype=a;var d=new c,e;for(e in b)d[e]=b[e];b.toString!==Object.prototype.toString&&(d.toString=b.toString);return d}function Vb(a){return a instanceof Array?function(){return D.iter(a)}:"function"==typeof a.iterator?V(a,a.iterator):a.iterator}function V(a,b){if(null==b)return null;null==b.__id__&&(b.__id__=kc++);var c;null==a.hx__closures__?a.hx__closures__={}:c=a.hx__closures__[b.__id__];null==c&&(c=function(){return c.method.apply(c.scope,
arguments)},c.scope=a,c.method=b,a.hx__closures__[b.__id__]=c);return c}var ma=function(a,b){b=b.split("u").join("");this.r=RegExp(a,b)};ma.__name__=!0;ma.prototype={match:function(a){this.r.global&&(this.r.lastIndex=0);this.r.m=this.r.exec(a);this.r.s=a;return null!=this.r.m},__class__:ma};var D=function(){};D.__name__=!0;D.cca=function(a,b){var c=a.charCodeAt(b);return c!=c?void 0:c};D.substr=function(a,b,c){if(null!=b&&0!=b&&null!=c&&0>c)return"";null==c&&(c=a.length);0>b?(b=a.length+b,0>b&&(b=
0)):0>c&&(c=a.length+c-b);return a.substr(b,c)};D.remove=function(a,b){var c=a.indexOf(b);if(-1==c)return!1;a.splice(c,1);return!0};D.iter=function(a){return{cur:0,arr:a,hasNext:function(){return this.cur<this.arr.length},next:function(){return this.arr[this.cur++]}}};var Pa=function(){};Pa.__name__=!0;Pa.array=function(a){for(var b=[],a=Vb(a)();a.hasNext();){var c=a.next();b.push(c)}return b};Pa.count=function(a,b){var c=0;if(null==b)for(var d=Vb(a)();d.hasNext();)d.next(),c++;else for(d=Vb(a)();d.hasNext();){var e=
d.next();b(e)&&c++}return c};var ja=function(){};ja.__name__=!0;var x=function(){this._flags=0;this.owner=this.next=null};x.__name__=!0;x.__interfaces__=[ja];x.prototype={onAdded:function(){},onRemoved:function(){},onStart:function(){},onStop:function(){},onUpdate:function(){},dispose:function(){null!=this.owner&&this.owner.remove(this)},get_name:function(){return null},__class__:x};var I=function(){this._inited=this._newPath=!1;x.call(this);r.loadAssetPack(R.fromAssets("images")).get(V(this,this.onLoaded))};
I.__name__=!0;I.main=function(){r.init();I.log("main");r.uncaughtError.connect(I.log);r.root.addChild((new X).add(new I))};I.log=function(){null};I.__super__=x;I.prototype=s(x.prototype,{get_name:function(){return"Main_0"},onLoaded:function(a){this._mesh=Wb.buildRectangle(1024,780);var b=a.getTexture("galapagosColor"),b=new Qa(b);r.root.addChild((new X).add(b));b=new za;this._meshView=new Ra(b);r.root.addChild((new X).add(b));b=new za;this._pathView=new Ra(b);r.root.addChild((new X).add(b));a=a.getTexture("galapagosBW");
I.log("-bw");b=pb.fromFlambeTexture(a);I.log([b.width,b.height]);this._object=Xb.buildFromBmpData(pb.fromFlambeTexture(a),1.8);this._object.set_x(0);this._object.set_y(0);I.log("+bw");this._mesh.insertObject(this._object);this._meshView.drawMesh(this._mesh);this._entityAI=new qb;this._entityAI.set_radius(4);this._entityAI.x=50;this._entityAI.y=50;this._pathView.drawEntity(this._entityAI,!1);this._pathfinder=new rb;this._pathfinder.entity=this._entityAI;this._pathfinder.set_mesh(this._mesh);this._path=
[];this._pathSampler=new Aa;this._pathSampler.entity=this._entityAI;this._pathSampler.set_samplingDistance(10);this._pathSampler.set_path(this._path);this._inited=!0;I.log(this._inited)},onAdded:function(){x.prototype.onAdded.call(this);I.log("added");r._platform.getPointer().down.connect(V(this,this.onPointerDown));r._platform.getPointer().up.connect(V(this,this.onPointerUp))},onPointerDown:function(){this._newPath=!0},onPointerUp:function(){this._newPath=!1},onUpdate:function(a){x.prototype.onUpdate.call(this,
a);this._inited&&(this._newPath&&(this._pathView.graphics.graphics.clear(),this._pathfinder.findPath(r._platform.getPointer().get_x(),r._platform.getPointer().get_y(),this._path),this._pathView.drawPath(this._path),this._pathSampler.reset(),this._pathView.drawEntity(this._entityAI)),this._pathSampler.get_hasNext()&&(this._pathSampler.next(),this._pathView.drawEntity(this._entityAI)))},__class__:I});var Ba=function(){};Ba.__name__=!0;Ba.prototype={__class__:Ba};Math.__name__=!0;var Ca=function(){};
Ca.__name__=!0;Ca.field=function(a,b){try{return a[b]}catch(c){return null}};var N=function(){};N.__name__=!0;N.is=function(a,b){return K.__instanceof(a,b)};N.string=function(a){return K.__string_rec(a,"")};N["int"]=function(a){return a|0};N.parseInt=function(a){var b=parseInt(a,10);if(0==b&&(120==D.cca(a,1)||88==D.cca(a,1)))b=parseInt(a);return isNaN(b)?null:b};var sb=function(){};sb.__name__=!0;sb.startsWith=function(a,b){return a.length>=b.length&&D.substr(a,0,b.length)==b};var X=function(){this.parent=
this.firstChild=this.next=this.firstComponent=null;this._compMap={}};X.__name__=!0;X.__interfaces__=[ja];X.prototype={add:function(a){null!=a.owner&&a.owner.remove(a);var b=a.get_name(),c=this._compMap[b];null!=c&&this.remove(c);this._compMap[b]=a;b=null;for(c=this.firstComponent;null!=c;)b=c,c=c.next;null!=b?b.next=a:this.firstComponent=a;a.owner=this;a.next=null;a.onAdded();return this},remove:function(a){for(var b=null,c=this.firstComponent;null!=c;){var d=c.next;if(c==a)return null==b?this.firstComponent=
d:(b.owner=this,b.next=d),delete this._compMap[c.get_name()],0!=(c._flags&1)&&(c.onStop(),c._flags&=-2),c.onRemoved(),c.owner=null,c.next=null,!0;b=c;c=d}return!1},addChild:function(a,b){null==b&&(b=!0);null!=a.parent&&a.parent.removeChild(a);a.parent=this;if(b){for(var c=null,d=this.firstChild;null!=d;)c=d,d=d.next;null!=c?c.next=a:this.firstChild=a}else a.next=this.firstChild,this.firstChild=a;return this},removeChild:function(a){for(var b=null,c=this.firstChild;null!=c;){var d=c.next;if(c==a){null==
b?this.firstChild=d:b.next=d;c.parent=null;c.next=null;break}b=c;c=d}},disposeChildren:function(){for(;null!=this.firstChild;)this.firstChild.dispose()},dispose:function(){for(null!=this.parent&&this.parent.removeChild(this);null!=this.firstComponent;)this.firstComponent.dispose();this.disposeChildren()},__class__:X};var Yb=function(){};Yb.__name__=!0;var tb=function(){};tb.__name__=!0;tb.prototype={__class__:tb};var na=function(){};na.__name__=!0;na.__interfaces__=[tb];na.prototype={init:function(){var a=
this;p.fixAndroidMath();var b=null;try{b=window.flambe.canvas}catch(c){}b.setAttribute("tabindex","0");b.style.outlineStyle="none";b.style.webkitTapHighlightColor="transparent";b.setAttribute("moz-opaque","true");this._stage=new oa(b);this._pointer=new J;this._mouse=new Sa(this._pointer,b);this._renderer=this.createRenderer(b);this.mainLoop=new pa;this.musicPlaying=!1;this._canvas=b;this._container=b.parentElement;this._container.style.overflow="hidden";this._container.style.position="relative";this._container.style.msTouchAction=
"none";var d=0,e=function(c){if(!(1E3>c.timeStamp-d)){var e=b.getBoundingClientRect(),f=a.getX(c,e),e=a.getY(c,e);switch(c.type){case "mousedown":c.target==b&&(c.preventDefault(),a._mouse.submitDown(f,e,c.button),b.focus());break;case "mousemove":a._mouse.submitMove(f,e);break;case "mouseup":a._mouse.submitUp(f,e,c.button);break;case "mousewheel":case "DOMMouseScroll":a._mouse.submitScroll(f,e,"mousewheel"==c.type?c.wheelDelta/40:-c.detail)&&c.preventDefault()}}};window.addEventListener("mousedown",
e,!1);window.addEventListener("mousemove",e,!1);window.addEventListener("mouseup",e,!1);b.addEventListener("mousewheel",e,!1);b.addEventListener("DOMMouseScroll",e,!1);b.addEventListener("contextmenu",function(a){a.preventDefault()},!1);var f="undefined"!=typeof window.ontouchstart,e="msMaxTouchPoints"in window.navigator&&1<window.navigator.msMaxTouchPoints;if(f||e){var h=new Ta(this._pointer,f?4:window.navigator.msMaxTouchPoints);this._touch=h;e=function(b){var c;c=f?b.changedTouches:[b];var e=b.target.getBoundingClientRect();
d=b.timeStamp;switch(b.type){case "touchstart":case "MSPointerDown":case "pointerdown":b.preventDefault();p.SHOULD_HIDE_MOBILE_BROWSER&&p.hideMobileBrowser();for(b=0;b<c.length;){var g=c[b];++b;var i=a.getX(g,e),j=a.getY(g,e);h.submitDown((f?g.identifier:g.pointerId)|0,i,j)}break;case "touchmove":case "MSPointerMove":case "pointermove":b.preventDefault();for(b=0;b<c.length;)g=c[b],++b,i=a.getX(g,e),j=a.getY(g,e),h.submitMove((f?g.identifier:g.pointerId)|0,i,j);break;case "touchend":case "touchcancel":case "MSPointerUp":case "pointerup":for(b=
0;b<c.length;)g=c[b],++b,i=a.getX(g,e),j=a.getY(g,e),h.submitUp((f?g.identifier:g.pointerId)|0,i,j)}};f?(b.addEventListener("touchstart",e,!1),b.addEventListener("touchmove",e,!1),b.addEventListener("touchend",e,!1),b.addEventListener("touchcancel",e,!1)):(b.addEventListener("MSPointerDown",e,!1),b.addEventListener("MSPointerMove",e,!1),b.addEventListener("MSPointerUp",e,!1))}else this._touch=new Ua;var g=window.onerror;window.onerror=function(a,b,c){r.uncaughtError.emit(a);return null!=g?g(a,b,c):
!1};var i=p.loadExtension("hidden",window.document);null!=i.value?(e=function(){r.hidden.set__(Ca.field(window.document,i.field))},e(null),window.document.addEventListener(i.prefix+"visibilitychange",e,!1)):(e=function(a){r.hidden.set__("pagehide"==a.type)},window.addEventListener("pageshow",e,!1),window.addEventListener("pagehide",e,!1));r.hidden.get_changed().connect(function(b){b||(a._skipFrame=!0)});this._skipFrame=!1;this._lastUpdate=Date.now();var k=p.loadExtension("requestAnimationFrame").value;
if(null!=k){var l=window.performance,j=null!=l&&p.polyfill("now",l);j?this._lastUpdate=l.now():null;var o=null,o=function(c){a.update(j?l.now():c);k(o,b)};k(o,b)}else window.setInterval(function(){a.update(Date.now())},16);Da.info("Initialized HTML platform",["renderer",this._renderer.get_type()])},loadAssetPack:function(a){return(new t(this,a)).promise},update:function(a){var b=(a-this._lastUpdate)/1E3;this._lastUpdate=a;r.hidden._value||(this._skipFrame?this._skipFrame=!1:(this.mainLoop.update(b),
this.mainLoop.render(this._renderer)))},getPointer:function(){return this._pointer},getRenderer:function(){return this._renderer},getX:function(a,b){return(a.clientX-b.left)*this._stage.get_width()/b.width},getY:function(a,b){return(a.clientY-b.top)*this._stage.get_height()/b.height},createRenderer:function(a){try{var b=Zb.getContextWebGL(a,{alpha:!1,depth:!1,failIfMajorPerformanceCaveat:!0});if(null!=b)if(p.detectSlowDriver(b))null;else return new Va(this._stage,b)}catch(c){}return new qa(a)},__class__:na};
var O=function(a,b){this._value=a;this._changed=null!=b?new Ea(b):null};O.__name__=!0;O.prototype={watch:function(a){a(this._value,this._value);return this.get_changed().connect(a)},set__:function(a){var b=this._value;a!=b&&(this._value=a,null!=this._changed&&this._changed.emit(a,b));return a},get_changed:function(){null==this._changed&&(this._changed=new Ea);return this._changed},__class__:O};var ra=function(a,b){this._next=null;this._signal=a;this._listener=b;this.stayInList=!0};ra.__name__=!0;
ra.__interfaces__=[ja];ra.prototype={once:function(){this.stayInList=!1;return this},dispose:function(){null!=this._signal&&(this._signal.disconnect(this),this._signal=null)},__class__:ra};var C=function(a){this._head=null!=a?new ra(this,a):null;this._deferredTasks=null};C.__name__=!0;C.prototype={connectImpl:function(a,b){var c=this,d=new ra(this,a);this._head==C.DISPATCHING_SENTINEL?this.defer(function(){c.listAdd(d,b)}):this.listAdd(d,b);return d},disconnect:function(a){var b=this;this._head==
C.DISPATCHING_SENTINEL?this.defer(function(){b.listRemove(a)}):this.listRemove(a)},defer:function(a){for(var b=null,c=this._deferredTasks;null!=c;)b=c,c=c.next;a=new ub(a);null!=b?b.next=a:this._deferredTasks=a},willEmit:function(){var a=this._head;this._head=C.DISPATCHING_SENTINEL;return a},didEmit:function(a){this._head=a;a=this._deferredTasks;for(this._deferredTasks=null;null!=a;)a.fn(),a=a.next},listAdd:function(a,b){if(b)a._next=this._head,this._head=a;else{for(var c=null,d=this._head;null!=
d;)c=d,d=d._next;null!=c?c._next=a:this._head=a}},listRemove:function(a){for(var b=null,c=this._head;null!=c;){if(c==a){a=c._next;null==b?this._head=a:b._next=a;break}b=c;c=c._next}},__class__:C};var Ea=function(a){C.call(this,a)};Ea.__name__=!0;Ea.__super__=C;Ea.prototype=s(C.prototype,{connect:function(a,b){null==b&&(b=!1);return this.connectImpl(a,b)},emit:function(a,b){var c=this;this._head==C.DISPATCHING_SENTINEL?this.defer(function(){c.emitImpl(a,b)}):this.emitImpl(a,b)},emitImpl:function(a,
b){for(var c=this.willEmit(),d=c;null!=d;)d._listener(a,b),d.stayInList||d.dispose(),d=d._next;this.didEmit(c)},__class__:Ea});var B=function(a){C.call(this,a)};B.__name__=!0;B.__super__=C;B.prototype=s(C.prototype,{connect:function(a,b){null==b&&(b=!1);return this.connectImpl(a,b)},emit:function(a){var b=this;this._head==C.DISPATCHING_SENTINEL?this.defer(function(){b.emitImpl(a)}):this.emitImpl(a)},emitImpl:function(a){for(var b=this.willEmit(),c=b;null!=c;)c._listener(a),c.stayInList||c.dispose(),
c=c._next;this.didEmit(b)},__class__:B});var L=function(a,b){this._behavior=null;O.call(this,a,b)};L.__name__=!0;L.__super__=O;L.prototype=s(O.prototype,{set__:function(a){this._behavior=null;return O.prototype.set__.call(this,a)},update:function(a){null!=this._behavior&&(O.prototype.set__.call(this,this._behavior.update(a)),this._behavior.isComplete()&&(this._behavior=null))},__class__:L});var r=function(){};r.__name__=!0;r.init=function(){r._calledInit||(r._platform.init(),r._calledInit=!0)};r.loadAssetPack=
function(a){return r._platform.loadAssetPack(a)};var Da=function(){};Da.__name__=!0;Da.info=function(){null};Da.__super__=Yb;Da.prototype=s(Yb.prototype,{__class__:Da});var vb=function(){this._realDt=0};vb.__name__=!0;vb.__super__=x;vb.prototype=s(x.prototype,{get_name:function(){return"SpeedAdjuster_4"},onUpdate:function(a){0<this._realDt&&(a=this._realDt,this._realDt=0);this.scale.update(a)},__class__:vb});var Fa=function(){};Fa.__name__=!0;Fa.__interfaces__=[ja];var n={__ename__:!0,__constructs__:"WEBP,JXR,PNG,JPG,GIF,DDS,PVR,PKM,MP3,M4A,OPUS,OGG,WAV,Data".split(","),
WEBP:["WEBP",0]};n.WEBP.__enum__=n;n.JXR=["JXR",1];n.JXR.__enum__=n;n.PNG=["PNG",2];n.PNG.__enum__=n;n.JPG=["JPG",3];n.JPG.__enum__=n;n.GIF=["GIF",4];n.GIF.__enum__=n;n.DDS=["DDS",5];n.DDS.__enum__=n;n.PVR=["PVR",6];n.PVR.__enum__=n;n.PKM=["PKM",7];n.PKM.__enum__=n;n.MP3=["MP3",8];n.MP3.__enum__=n;n.M4A=["M4A",9];n.M4A.__enum__=n;n.OPUS=["OPUS",10];n.OPUS.__enum__=n;n.OGG=["OGG",11];n.OGG.__enum__=n;n.WAV=["WAV",12];n.WAV.__enum__=n;n.Data=["Data",13];n.Data.__enum__=n;var wb=function(a,b,c,d){this.name=
a;this.url=b;this.format=c;this.bytes=d};wb.__name__=!0;wb.prototype={__class__:wb};var Wa=function(){};Wa.__name__=!0;Wa.__interfaces__=[ja];Wa.prototype={__class__:Wa};var $b=function(){};$b.__name__=!0;$b.__interfaces__=[Fa];var R=function(){this._localBase=this._remoteBase=null;this._entries=[]};R.__name__=!0;R.fromAssets=function(a,b){null==b&&(b=!0);var c=Ca.field(ac.getType(R).assets[0],a);if(null==c){if(b)throw S.withFields("Missing asset pack",["name",a]);return null}var d=new R;d.set_localBase("assets");
for(var e=0;e<c.length;){var f=c[e];++e;var h=f.name,g=a+"/"+h+"?v="+N.string(f.md5),i=R.inferFormat(h);i!=n.Data&&(h=S.removeFileExtension(h));d.add(h,g,f.bytes,i)}return d};R.inferFormat=function(a){a=S.getUrlExtension(a);if(null!=a)switch(a.toLowerCase()){case "gif":return n.GIF;case "jpg":case "jpeg":return n.JPG;case "jxr":case "wdp":return n.JXR;case "png":return n.PNG;case "webp":return n.WEBP;case "dds":return n.DDS;case "pvr":return n.PVR;case "pkm":return n.PKM;case "m4a":return n.M4A;case "mp3":return n.MP3;
case "ogg":return n.OGG;case "opus":return n.OPUS;case "wav":return n.WAV}else null;return n.Data};R.prototype={add:function(a,b,c,d){null==c&&(c=0);null==d&&(d=R.inferFormat(b));a=new wb(a,b,d,c);this._entries.push(a);return a},iterator:function(){return D.iter(this._entries)},getFullURL:function(a){var b;b=null!=this.get_remoteBase()&&R._supportsCrossOrigin?this.get_remoteBase():this.get_localBase();return null!=b?S.joinPath(b,a.url):a.url},get_localBase:function(){return this._localBase},set_localBase:function(a){null!=
a&&bc.that(!sb.startsWith(a,"http://")&&!sb.startsWith(a,"https://"),"localBase must be a path on the same domain, NOT starting with http(s)://",null);return this._localBase=a},get_remoteBase:function(){return this._remoteBase},__class__:R};var F={__ename__:!0,__constructs__:"Normal,Add,Multiply,Screen,Mask,Copy".split(","),Normal:["Normal",0]};F.Normal.__enum__=F;F.Add=["Add",1];F.Add.__enum__=F;F.Multiply=["Multiply",2];F.Multiply.__enum__=F;F.Screen=["Screen",3];F.Screen.__enum__=F;F.Mask=["Mask",
4];F.Mask.__enum__=F;F.Copy=["Copy",5];F.Copy.__enum__=F;var xb=function(a,b){null==b&&(b=0);null==a&&(a=0);this.x=a;this.y=b};xb.__name__=!0;xb.prototype={__class__:xb};var u=function(){this.blendMode=this.scissor=null;var a=this;x.call(this);this._flags|=54;this._localMatrix=new Y;var b=function(){a._flags|=24};this.x=new L(0,b);this.y=new L(0,b);this.rotation=new L(0,b);this.scaleX=new L(1,b);this.scaleY=new L(1,b);this.anchorX=new L(0,b);this.anchorY=new L(0,b);this.alpha=new L(1)};u.__name__=
!0;u.hitTest=function(a,b,c){var d=a._compMap.Sprite_2;if(null!=d){if(6!=(d._flags&6))return null;d.getLocalMatrix().inverseTransform(b,c,u._scratchPoint)&&(b=u._scratchPoint.x,c=u._scratchPoint.y);var e=d.scissor;if(null!=e&&!e.contains(b,c))return null}a=u.hitTestBackwards(a.firstChild,b,c);return null!=a?a:null!=d&&d.containsLocal(b,c)?d:null};u.render=function(a,b){var c=a._compMap.Sprite_2;if(null!=c){var d=c.alpha._value;if(0==(c._flags&2)||0>=d)return;b.save();1>d&&b.multiplyAlpha(d);null!=
c.blendMode&&b.setBlendMode(c.blendMode);var d=c.getLocalMatrix(),e=d.m02,f=d.m12;0!=(c._flags&32)&&(e=Math.round(e),f=Math.round(f));b.transform(d.m00,d.m10,d.m01,d.m11,e,f);d=c.scissor;null!=d&&b.applyScissor(d.x,d.y,d.width,d.height);c.draw(b)}d=a._compMap.Director_3;if(null!=d){d=d.occludedScenes;for(e=0;e<d.length;)f=d[e],++e,u.render(f,b)}for(d=a.firstChild;null!=d;)e=d.next,u.render(d,b),d=e;null!=c&&b.restore()};u.hitTestBackwards=function(a,b,c){if(null!=a){var d=u.hitTestBackwards(a.next,
b,c);return null!=d?d:u.hitTest(a,b,c)}return null};u.__super__=x;u.prototype=s(x.prototype,{get_name:function(){return"Sprite_2"},getNaturalWidth:function(){return 0},getNaturalHeight:function(){return 0},containsLocal:function(a,b){return 0<=a&&a<this.getNaturalWidth()&&0<=b&&b<this.getNaturalHeight()},getLocalMatrix:function(){0!=(this._flags&8)&&(this._flags&=-9,this._localMatrix.compose(this.x._value,this.y._value,this.scaleX._value,this.scaleY._value,3.141592653589793*this.rotation._value/180),
this._localMatrix.translate(-this.anchorX._value,-this.anchorY._value));return this._localMatrix},setAnchor:function(a,b){this.anchorX.set__(a);this.anchorY.set__(b);return this},setXY:function(a,b){this.x.set__(a);this.y.set__(b);return this},setAlpha:function(a){this.alpha.set__(a);return this},setRotation:function(a){this.rotation.set__(a);return this},onAdded:function(){0!=(this._flags&64)&&this.connectHover()},onRemoved:function(){null!=this._hoverConnection&&(this._hoverConnection.dispose(),
this._hoverConnection=null)},onUpdate:function(a){this.x.update(a);this.y.update(a);this.rotation.update(a);this.scaleX.update(a);this.scaleY.update(a);this.alpha.update(a);this.anchorX.update(a);this.anchorY.update(a)},draw:function(){},getParentSprite:function(){if(null==this.owner)return null;for(var a=this.owner.parent;null!=a;){var b=a._compMap.Sprite_2;if(null!=b)return b;a=a.parent}return null},connectHover:function(){var a=this;null==this._hoverConnection&&(this._hoverConnection=r._platform.getPointer().move.connect(function(b){for(var c=
b.hit;null!=c;){if(c==a)return;c=c.getParentSprite()}null!=a._pointerOut&&0!=(a._flags&64)&&a._pointerOut.emit(b);a._flags&=-65;a._hoverConnection.dispose();a._hoverConnection=null}))},set_pointerEnabled:function(a){this._flags=yb.set(this._flags,4,a);return a},set_pixelSnapping:function(a){this._flags=yb.set(this._flags,32,a);return a},onPointerDown:function(a){this.onHover(a);null!=this._pointerDown&&this._pointerDown.emit(a)},onPointerMove:function(a){this.onHover(a);null!=this._pointerMove&&this._pointerMove.emit(a)},
onHover:function(a){if(0==(this._flags&64)&&(this._flags|=64,null!=this._pointerIn||null!=this._pointerOut))null!=this._pointerIn&&this._pointerIn.emit(a),this.connectHover()},onPointerUp:function(a){switch(a.source[1]){case 1:null!=this._pointerOut&&0!=(this._flags&64)&&this._pointerOut.emit(a),this._flags&=-65,null!=this._hoverConnection&&(this._hoverConnection.dispose(),this._hoverConnection=null)}null!=this._pointerUp&&this._pointerUp.emit(a)},__class__:u});var Xa=function(a,b,c){u.call(this);
this.color=a;this.width=new L(b);this.height=new L(c)};Xa.__name__=!0;Xa.__super__=u;Xa.prototype=s(u.prototype,{draw:function(a){a.fillRect(this.color,0,0,this.width._value,this.height._value)},getNaturalWidth:function(){return this.width._value},getNaturalHeight:function(){return this.height._value},onUpdate:function(a){u.prototype.onUpdate.call(this,a);this.width.update(a);this.height.update(a)},__class__:Xa});var zb=function(){};zb.__name__=!0;zb.prototype={__class__:zb};var Qa=function(a){u.call(this);
this.texture=a};Qa.__name__=!0;Qa.__super__=u;Qa.prototype=s(u.prototype,{draw:function(a){null!=this.texture&&a.drawTexture(this.texture,0,0)},getNaturalWidth:function(){return null!=this.texture?this.texture.get_width():0},getNaturalHeight:function(){return null!=this.texture?this.texture.get_height():0},__class__:Qa});var sa={__ename__:!0,__constructs__:["Portrait","Landscape"],Portrait:["Portrait",0]};sa.Portrait.__enum__=sa;sa.Landscape=["Landscape",1];sa.Landscape.__enum__=sa;var Ya=function(){};
Ya.__name__=!0;Ya.__interfaces__=[Fa];Ya.prototype={__class__:Ya};var cc=function(){};cc.__name__=!0;cc.__interfaces__=[Ya];var P={__ename__:!0,__constructs__:["Left","Middle","Right","Unknown"],Left:["Left",0]};P.Left.__enum__=P;P.Middle=["Middle",1];P.Middle.__enum__=P;P.Right=["Right",2];P.Right.__enum__=P;P.Unknown=function(a){a=["Unknown",3,a];a.__enum__=P;return a};var fa={__ename__:!0,__constructs__:["Default","Button","None"],Default:["Default",0]};fa.Default.__enum__=fa;fa.Button=["Button",
1];fa.Button.__enum__=fa;fa.None=["None",2];fa.None.__enum__=fa;var Ab=function(){this.init(0,0,0,null)};Ab.__name__=!0;Ab.prototype={init:function(a,b,c,d){this.id=a;this.viewX=b;this.viewY=c;this.button=d},__class__:Ab};var Ga={__ename__:!0,__constructs__:["Mouse","Touch"]};Ga.Mouse=function(a){a=["Mouse",0,a];a.__enum__=Ga;return a};Ga.Touch=function(a){a=["Touch",1,a];a.__enum__=Ga;return a};var Bb=function(){this.init(0,0,0,null,null)};Bb.__name__=!0;Bb.prototype={init:function(a,b,c,d,e){this.id=
a;this.viewX=b;this.viewY=c;this.hit=d;this.source=e;this._stopped=!1},__class__:Bb};var Cb=function(a){this.id=a;this._source=Ga.Touch(this)};Cb.__name__=!0;Cb.prototype={init:function(a,b){this.viewX=a;this.viewY=b},__class__:Cb};var ga=function(){};ga.__name__=!0;ga.max=function(a,b){return a>b?a:b};ga.min=function(a,b){return a<b?a:b};var Y=function(){this.identity()};Y.__name__=!0;Y.multiply=function(a,b,c){null==c&&(c=new Y);var d=a.m00*b.m00+a.m01*b.m10,e=a.m00*b.m01+a.m01*b.m11,f=a.m00*b.m02+
a.m01*b.m12+a.m02;c.m00=d;c.m01=e;c.m02=f;d=a.m10*b.m00+a.m11*b.m10;e=a.m10*b.m01+a.m11*b.m11;f=a.m10*b.m02+a.m11*b.m12+a.m12;c.m10=d;c.m11=e;c.m12=f;return c};Y.prototype={set:function(a,b,c,d,e,f){this.m00=a;this.m01=c;this.m02=e;this.m10=b;this.m11=d;this.m12=f},identity:function(){this.set(1,0,0,1,0,0)},compose:function(a,b,c,d,e){var f=Math.sin(e),e=Math.cos(e);this.set(e*c,f*c,-f*d,e*d,a,b)},translate:function(a,b){this.m02+=this.m00*a+this.m01*b;this.m12+=this.m11*b+this.m10*a},invert:function(){var a=
this.determinant();if(0==a)return!1;this.set(this.m11/a,-this.m01/a,-this.m10/a,this.m00/a,(this.m01*this.m12-this.m11*this.m02)/a,(this.m10*this.m02-this.m00*this.m12)/a);return!0},transformArray:function(a,b,c){for(var d=0;d<b;){var e=a[d],f=a[d+1];c[d++]=e*this.m00+f*this.m01+this.m02;c[d++]=e*this.m10+f*this.m11+this.m12}},determinant:function(){return this.m00*this.m11-this.m01*this.m10},inverseTransform:function(a,b,c){var d=this.determinant();if(0==d)return!1;a-=this.m02;b-=this.m12;c.x=(a*
this.m11-b*this.m01)/d;c.y=(b*this.m00-a*this.m10)/d;return!0},clone:function(a){null==a&&(a=new Y);a.set(this.m00,this.m10,this.m01,this.m11,this.m02,this.m12);return a},__class__:Y};var Za=function(a,b,c,d){null==d&&(d=0);null==c&&(c=0);null==b&&(b=0);null==a&&(a=0);this.set(a,b,c,d)};Za.__name__=!0;Za.prototype={set:function(a,b,c,d){this.x=a;this.y=b;this.width=c;this.height=d},contains:function(a,b){a-=this.x;if(0<=this.width){if(0>a||a>this.width)return!1}else if(0<a||a<this.width)return!1;
b-=this.y;if(0<=this.height){if(0>b||b>this.height)return!1}else if(0<b||b<this.height)return!1;return!0},clone:function(a){null==a&&(a=new Za);a.set(this.x,this.y,this.width,this.height);return a},equals:function(a){return this.x==a.x&&this.y==a.y&&this.width==a.width&&this.height==a.height},__class__:Za};var H=function(){};H.__name__=!0;H.__interfaces__=[Fa];H.prototype={__class__:H};var ka=function(a,b){var c=this;this.manifest=b;this._platform=a;this.promise=new $a;this._bytesLoaded=new ba;this._pack=
new ab(b,this);var d=Pa.array(b);if(0==d.length)this.handleSuccess();else{for(var e=new ba,f=0;f<d.length;){var h=d[f];++f;var g=e.get(h.name);null==g&&(g=[],e.set(h.name,g));g.push(h)}this._assetsRemaining=Pa.count(e);for(d=e.iterator();d.hasNext();)e=[d.next()],this.pickBestEntry(e[0],function(a){return function(d){if(null!=d){var e=b.getFullURL(d);try{c.loadEntry(e,d)}catch(f){c.handleError(d,"Unexpected error: "+N.string(f))}e=c.promise;e.set_total(e._total+d.bytes)}else d=a[0][0],ka.isAudio(d.format)?
c.handleLoad(d,T.getInstance()):c.handleError(d,"Could not find a supported format to load")}}(e))}};ka.__name__=!0;ka.isAudio=function(a){switch(a[1]){case 8:case 9:case 10:case 11:case 12:return!0;default:return!1}};ka.prototype={pickBestEntry:function(a,b){this.getAssetFormats(function(c){for(var d=0;d<c.length;){var e=c[d];++d;for(var f=0;f<a.length;){var h=a[f];++f;if(h.format==e){b(h);return}}}b(null)})},loadEntry:function(){null},getAssetFormats:function(){null},handleLoad:function(a,b){if(!this._pack.disposed){this.handleProgress(a,
a.bytes);var c;switch(a.format[1]){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:c=this._pack.textures;break;case 8:case 9:case 10:case 11:case 12:c=this._pack.sounds;break;case 13:c=this._pack.files}c.set(a.name,b);this._assetsRemaining-=1;0==this._assetsRemaining&&this.handleSuccess()}},handleProgress:function(a,b){this._bytesLoaded.set(a.name,b);for(var c=0,d=this._bytesLoaded.iterator();d.hasNext();)var e=d.next(),c=c+e;this.promise.set_progress(c)},handleSuccess:function(){this.promise.set_result(this._pack)},
handleError:function(a,b){this.promise.error.emit(S.withFields(b,["url",a.url]))},handleTextureError:function(a){this.handleError(a,"Failed to create texture. Is the GPU context unavailable?")},__class__:ka};var ab=function(a,b){this.disposed=!1;this._manifest=a;this.loader=b;this.textures=new ba;this.sounds=new ba;this.files=new ba};ab.__name__=!0;ab.__interfaces__=[Wa];ab.prototype={getTexture:function(a,b){null==b&&(b=!0);var c=this.textures.get(a);if(null==c&&b)throw S.withFields("Missing texture",
["name",a]);return c},__class__:ab};var Ha=function(a){this._content=a};Ha.__name__=!0;Ha.__interfaces__=[$b];Ha.__super__=H;Ha.prototype=s(H.prototype,{__class__:Ha});var fc=function(){};fc.__name__=!0;var Q=function(a){this._pointer=a;this._source=Ga.Mouse(Q._sharedEvent);this.down=new B;this.move=new B;this.up=new B;this.scroll=new B;this._y=this._x=0;this._cursor=fa.Default;this._buttonStates=new ta};Q.__name__=!0;Q.__interfaces__=[fc];Q.prototype={submitDown:function(a,b,c){this._buttonStates.exists(c)||
(this._buttonStates.set(c,!0),this.prepare(a,b,Db.toButton(c)),this._pointer.submitDown(a,b,this._source),this.down.emit(Q._sharedEvent))},submitMove:function(a,b){this.prepare(a,b,null);this._pointer.submitMove(a,b,this._source);this.move.emit(Q._sharedEvent)},submitUp:function(a,b,c){this._buttonStates.exists(c)&&(this._buttonStates.remove(c),this.prepare(a,b,Db.toButton(c)),this._pointer.submitUp(a,b,this._source),this.up.emit(Q._sharedEvent))},submitScroll:function(a,b,c){this._x=a;this._y=b;
if(null==this.scroll._head)return!1;this.scroll.emit(c);return!0},prepare:function(a,b,c){this._x=a;this._y=b;Q._sharedEvent.init(Q._sharedEvent.id+1,a,b,c)},__class__:Q};var Eb=function(){};Eb.__name__=!0;Eb.prototype={__class__:Eb};var J=function(a,b,c){null==c&&(c=!1);null==b&&(b=0);null==a&&(a=0);this.down=new B;this.move=new B;this.up=new B;this._x=a;this._y=b;this._isDown=c};J.__name__=!0;J.__interfaces__=[Eb];J.prototype={get_x:function(){return this._x},get_y:function(){return this._y},submitDown:function(a,
b,c){if(!this._isDown){this.submitMove(a,b,c);this._isDown=!0;var d=[],e=u.hitTest(r.root,a,b);if(null!=e){var f=e.owner;do{var h=f._compMap.Sprite_2;null!=h&&d.push(h);f=f.parent}while(null!=f)}this.prepare(a,b,e,c);for(a=0;a<d.length;)if(b=d[a],++a,b.onPointerDown(J._sharedEvent),J._sharedEvent._stopped)return;this.down.emit(J._sharedEvent)}},submitMove:function(a,b,c){if(!(a==this._x&&b==this._y)){var d=[],e=u.hitTest(r.root,a,b);if(null!=e){var f=e.owner;do{var h=f._compMap.Sprite_2;null!=h&&
d.push(h);f=f.parent}while(null!=f)}this.prepare(a,b,e,c);for(a=0;a<d.length;)if(b=d[a],++a,b.onPointerMove(J._sharedEvent),J._sharedEvent._stopped)return;this.move.emit(J._sharedEvent)}},submitUp:function(a,b,c){if(this._isDown){this.submitMove(a,b,c);this._isDown=!1;var d=[],e=u.hitTest(r.root,a,b);if(null!=e){var f=e.owner;do{var h=f._compMap.Sprite_2;null!=h&&d.push(h);f=f.parent}while(null!=f)}this.prepare(a,b,e,c);for(a=0;a<d.length;)if(b=d[a],++a,b.onPointerUp(J._sharedEvent),J._sharedEvent._stopped)return;
this.up.emit(J._sharedEvent)}},prepare:function(a,b,c,d){this._x=a;this._y=b;J._sharedEvent.init(J._sharedEvent.id+1,a,b,c,d)},__class__:J};var Z=function(a,b,c){this.rootX=this.rootY=0;this.root=a;this._width=b;this._height=c};Z.__name__=!0;Z.__interfaces__=[cc];Z.__super__=H;Z.prototype=s(H.prototype,{readPixels:function(a,b,c,d){return this.root.readPixels(this.rootX+a,this.rootY+b,c,d)},get_width:function(){return this._width},get_height:function(){return this._height},__class__:Z});var dc=function(){};
dc.__name__=!0;var Ta=function(a,b){null==b&&(b=4);this._pointer=a;this._maxPoints=b;this._pointMap=new ta;this._points=[];this.down=new B;this.move=new B;this.up=new B};Ta.__name__=!0;Ta.__interfaces__=[dc];Ta.prototype={submitDown:function(a,b,c){if(!this._pointMap.exists(a)){var d=new Cb(a);d.init(b,c);this._pointMap.set(a,d);this._points.push(d);null==this._pointerTouch&&(this._pointerTouch=d,this._pointer.submitDown(b,c,d._source));this.down.emit(d)}},submitMove:function(a,b,c){a=this._pointMap.get(a);
null!=a&&(a.init(b,c),this._pointerTouch==a&&this._pointer.submitMove(b,c,a._source),this.move.emit(a))},submitUp:function(a,b,c){var d=this._pointMap.get(a);null!=d&&(d.init(b,c),this._pointMap.remove(a),D.remove(this._points,d),this._pointerTouch==d&&(this._pointerTouch=null,this._pointer.submitUp(b,c,d._source)),this.up.emit(d))},__class__:Ta};var bb=function(){};bb.__name__=!0;bb.__interfaces__=[Fa];var T=function(){this._playback=new cb(this)};T.__name__=!0;T.__interfaces__=[bb];T.getInstance=
function(){null==T._instance&&(T._instance=new T);return T._instance};T.__super__=H;T.prototype=s(H.prototype,{__class__:T});var ec=function(){};ec.__name__=!0;ec.__interfaces__=[ja];var cb=function(a){this._sound=a;this.volume=new L(0);this._complete=new O(!0)};cb.__name__=!0;cb.__interfaces__=[ec];cb.prototype={__class__:cb};var Ua=function(){this.down=new B;this.move=new B;this.up=new B};Ua.__name__=!0;Ua.__interfaces__=[dc];Ua.prototype={__class__:Ua};var Ia=function(){this._entries=[]};Ia.__name__=
!0;Ia.__interfaces__=[ja];Ia.prototype={addListener:function(a,b,c){a.addEventListener(b,c,!1);this._entries.push(new Fb(a,b,c))},addDisposingListener:function(a,b,c){var d=this;this.addListener(a,b,function(a){d.dispose();c(a)})},dispose:function(){for(var a=0,b=this._entries;a<b.length;){var c=b[a];++a;c.dispatcher.removeEventListener(c.type,c.listener,!1)}this._entries=[]},__class__:Ia};var Fb=function(a,b,c){this.dispatcher=a;this.type=b;this.listener=c};Fb.__name__=!0;Fb.prototype={__class__:Fb};
var Ja=function(){};Ja.__name__=!0;Ja.__interfaces__=[zb];Ja.prototype={__class__:Ja};var Gb=function(){};Gb.__name__=!0;Gb.prototype={__class__:Gb};var Ka=function(){};Ka.__name__=!0;Ka.__interfaces__=[Gb];Ka.prototype={__class__:Ka};var pa=function(){this._tickables=[]};pa.__name__=!0;pa.updateEntity=function(a,b){var c=a._compMap.SpeedAdjuster_4;if(null!=c&&(c._realDt=b,b*=c.scale._value,0>=b)){c.onUpdate(b);return}for(c=a.firstComponent;null!=c;){var d=c.next;0==(c._flags&1)&&(c._flags|=1,c.onStart());
c.onUpdate(b);c=d}for(c=a.firstChild;null!=c;)d=c.next,pa.updateEntity(c,b),c=d};pa.prototype={update:function(a){if(!(0>=a)){1<a&&(a=1);for(var b=0;b<this._tickables.length;){var c=this._tickables[b];null==c||c.update(a)?this._tickables.splice(b,1):++b}r.volume.update(a);pa.updateEntity(r.root,a)}},render:function(a){var b=a.graphics;null!=b&&(a.willRender(),u.render(r.root,b),a.didRender())},__class__:pa};var Hb=function(){};Hb.__name__=!0;Hb.nextPowerOfTwo=function(a){for(var b=1;b<a;)b<<=1;return b};
var Db=function(){};Db.__name__=!0;Db.toButton=function(a){switch(a){case 0:return P.Left;case 1:return P.Middle;case 2:return P.Right}return P.Unknown(a)};var db=function(){};db.__name__=!0;db.prototype={__class__:db};var eb=function(a,b){this._firstDraw=!1;this._canvasCtx=a.getContext("2d",{alpha:b})};eb.__name__=!0;eb.__interfaces__=[Ja];eb.prototype={save:function(){this._canvasCtx.save()},transform:function(a,b,c,d,e,f){this._canvasCtx.transform(a,b,c,d,e,f)},restore:function(){this._canvasCtx.restore()},
drawTexture:function(a,b,c){this.drawSubTexture(a,b,c,0,0,a.get_width(),a.get_height())},drawSubTexture:function(a,b,c,d,e,f,h){this._firstDraw?(this._firstDraw=!1,this._canvasCtx.globalCompositeOperation="copy",this.drawSubTexture(a,b,c,d,e,f,h),this._canvasCtx.globalCompositeOperation="source-over"):this._canvasCtx.drawImage(a.root.image,a.rootX+d|0,a.rootY+e|0,f|0,h|0,b|0,c|0,f|0,h|0)},fillRect:function(a,b,c,d,e){if(this._firstDraw)this._firstDraw=!1,this._canvasCtx.globalCompositeOperation="copy",
this.fillRect(a,b,c,d,e),this._canvasCtx.globalCompositeOperation="source-over";else{for(a=(16777215&a).toString(16);6>a.length;)a="0"+N.string(a);this._canvasCtx.fillStyle="#"+N.string(a);this._canvasCtx.fillRect(b|0,c|0,d|0,e|0)}},multiplyAlpha:function(a){this._canvasCtx.globalAlpha*=a},setBlendMode:function(a){var b;switch(a[1]){case 0:b="source-over";break;case 1:b="lighter";break;case 2:b="multiply";break;case 3:b="screen";break;case 4:b="destination-in";break;case 5:b="copy"}this._canvasCtx.globalCompositeOperation=
b},applyScissor:function(a,b,c,d){this._canvasCtx.beginPath();this._canvasCtx.rect(a|0,b|0,c|0,d|0);this._canvasCtx.clip()},willRender:function(){this._firstDraw=!0},didRender:function(){},onResize:function(){},__class__:eb};var qa=function(a){this.graphics=new eb(a,!1);this._hasGPU=new O(!0)};qa.__name__=!0;qa.__interfaces__=[Ka];qa.prototype={get_type:function(){return ca.Canvas},createTextureFromImage:function(a){a=new La(qa.CANVAS_TEXTURES?p.createCanvas(a):a);return a.createTexture(a.width,a.height)},
getCompressedTextureFormats:function(){return[]},createCompressedTexture:function(){return null},willRender:function(){this.graphics.willRender()},didRender:function(){this.graphics.didRender()},__class__:qa};var fb=function(a,b,c){Z.call(this,a,b,c)};fb.__name__=!0;fb.__super__=Z;fb.prototype=s(Z.prototype,{__class__:fb});var La=function(a){this.image=a;this.width=a.width;this.height=a.height};La.__name__=!0;La.__interfaces__=[db];La.__super__=H;La.prototype=s(H.prototype,{createTexture:function(a,
b){return new fb(this,a,b)},readPixels:function(a,b,c,d){a=this.getContext2d().getImageData(a,b,c,d).data;return da.ofData(a)},getContext2d:function(){K.__instanceof(this.image,HTMLCanvasElement)||(this.image=p.createCanvas(this.image));return this.image.getContext("2d")},__class__:La});var t=function(a,b){ka.call(this,a,b)};t.__name__=!0;t.detectImageFormats=function(a){var b=[n.PNG,n.JPG,n.GIF],c=2,d;d=window.document.createElement("img");d.onload=d.onerror=function(){1==d.width&&b.unshift(n.WEBP);
--c;0==c&&a(b)};d.src="data:image/webp;base64,UklGRhoAAABXRUJQVlA4TA0AAAAvAAAAEAcQERGIiP4HAA==";var e;e=window.document.createElement("img");e.onload=e.onerror=function(){1==e.width&&b.unshift(n.JXR);--c;0==c&&a(b)};e.src="data:image/vnd.ms-photo;base64,SUm8AQgAAAAFAAG8AQAQAAAASgAAAIC8BAABAAAAAQAAAIG8BAABAAAAAQAAAMC8BAABAAAAWgAAAMG8BAABAAAAHwAAAAAAAAAkw91vA07+S7GFPXd2jckNV01QSE9UTwAZAYBxAAAAABP/gAAEb/8AAQAAAQAAAA=="};t.detectAudioFormats=function(){var a;a=window.document.createElement("audio");if(null==
a||null==V(a,a.canPlayType))return[];var b=new ma("\\b(iPhone|iPod|iPad|Android|Windows Phone)\\b",""),c=window.navigator.userAgent;if(!z.get_supported()&&b.match(c))return[];for(var b=[{format:n.M4A,mimeType:"audio/mp4; codecs=mp4a"},{format:n.MP3,mimeType:"audio/mpeg"},{format:n.OPUS,mimeType:"audio/ogg; codecs=opus"},{format:n.OGG,mimeType:"audio/ogg; codecs=vorbis"},{format:n.WAV,mimeType:"audio/wav"}],c=[],d=0;d<b.length;){var e=b[d];++d;var f="";try{f=a.canPlayType(e.mimeType)}catch(h){}""!=
f&&c.push(e.format)}return c};t.supportsBlob=function(){if(t._detectBlobSupport){t._detectBlobSupport=!1;if((new ma("\\bSilk\\b","")).match(window.navigator.userAgent)||null==window.Blob)return!1;var a=new XMLHttpRequest;a.open("GET",".",!0);if(""!=a.responseType)return!1;a.responseType="blob";if("blob"!=a.responseType)return!1;t._URL=p.loadExtension("URL").value}return null!=t._URL&&null!=t._URL.createObjectURL};t.__super__=ka;t.prototype=s(ka.prototype,{loadEntry:function(a,b){var c=this;switch(b.format[1]){case 0:case 1:case 2:case 3:case 4:var d;
d=window.document.createElement("img");var e=new Ia;e.addDisposingListener(d,"load",function(){t.supportsBlob()&&t._URL.revokeObjectURL(d.src);var a=c._platform.getRenderer().createTextureFromImage(d);null!=a?c.handleLoad(b,a):c.handleTextureError(b)});e.addDisposingListener(d,"error",function(){c.handleError(b,"Failed to load image")});t.supportsBlob()?this.download(a,b,"blob",function(a){d.src=t._URL.createObjectURL(a)}):d.src=a;break;case 5:case 6:case 7:this.download(a,b,"arraybuffer",function(){var a=
c._platform.getRenderer().createCompressedTexture(b.format,null);null!=a?c.handleLoad(b,a):c.handleTextureError(b)});break;case 8:case 9:case 10:case 11:case 12:if(z.get_supported())this.download(a,b,"arraybuffer",function(a){z.ctx.decodeAudioData(a,function(a){c.handleLoad(b,new z(a))},function(){c.handleLoad(b,T.getInstance())})});else{var f;f=window.document.createElement("audio");f.preload="auto";var h=++t._mediaRefCount;null==t._mediaElements&&(t._mediaElements=new ta);t._mediaElements.set(h,
f);e=new Ia;e.addDisposingListener(f,"canplaythrough",function(){t._mediaElements.remove(h);c.handleLoad(b,new Ma(f))});e.addDisposingListener(f,"error",function(){t._mediaElements.remove(h);var a=f.error.code;3==a||4==a?c.handleLoad(b,T.getInstance()):c.handleError(b,"Failed to load audio: "+f.error.code)});e.addListener(f,"progress",function(){if(0<f.buffered.length&&0<f.duration){var a=f.buffered.end(0)/f.duration;c.handleProgress(b,a*b.bytes|0)}});f.src=a;f.load()}break;case 13:this.download(a,
b,"text",function(a){c.handleLoad(b,new Ha(a))})}},getAssetFormats:function(a){var b=this;null==t._supportedFormats&&(t._supportedFormats=new $a,t.detectImageFormats(function(a){t._supportedFormats.set_result(b._platform.getRenderer().getCompressedTextureFormats().concat(a).concat(t.detectAudioFormats()).concat([n.Data]))}));t._supportedFormats.get(a)},download:function(a,b,c,d){var e=this,f=null,h=null,g=0,i=!1,k=function(){i&&(i=!1,window.clearInterval(g))},l=3,j=function(){--l;return 0<=l?(h(),
!0):!1},h=function(){k();null!=f&&f.abort();f=new XMLHttpRequest;f.open("GET",a,!0);f.responseType=c;var h=0;f.onprogress=function(a){i||(i=!0,g=window.setInterval(function(){4!=f.readyState&&5E3<Date.now()-h&&!j()&&(k(),e.handleError(b,"Download stalled"))},1E3));h=Date.now();e.handleProgress(b,a.loaded)};f.onerror=function(){if(0!=f.status||!j())k(),e.handleError(b,"HTTP error "+f.status)};f.onload=function(){var a=f.response;null==a&&(a=f.responseText);k();d(a)};f.send()};h()},__class__:t});var Sa=
function(a,b){Q.call(this,a);this._canvas=b};Sa.__name__=!0;Sa.__super__=Q;Sa.prototype=s(Q.prototype,{__class__:Sa});var Ma=function(a){this.audioElement=a};Ma.__name__=!0;Ma.__interfaces__=[bb];Ma.__super__=H;Ma.prototype=s(H.prototype,{__class__:Ma});var gc=function(){};gc.__name__=!0;var oa=function(a){var b=this;this._canvas=a;this.resize=new Na;this.scaleFactor=oa.computeScaleFactor();1!=this.scaleFactor&&(p.setVendorStyle(this._canvas,"transform-origin","top left"),p.setVendorStyle(this._canvas,
"transform","scale("+1/this.scaleFactor+")"));p.SHOULD_HIDE_MOBILE_BROWSER&&(window.addEventListener("orientationchange",function(){p.callLater(V(b,b.hideMobileBrowser),200)},!1),this.hideMobileBrowser());window.addEventListener("resize",V(this,this.onWindowResize),!1);this.onWindowResize(null);this.orientation=new O(null);null!=window.orientation&&(window.addEventListener("orientationchange",V(this,this.onOrientationChange),!1),this.onOrientationChange(null));this.fullscreen=new O(!1);p.addVendorListener(window.document,
"fullscreenchange",function(){b.updateFullscreen()},!1);this.updateFullscreen()};oa.__name__=!0;oa.__interfaces__=[gc];oa.computeScaleFactor=function(){var a=window.devicePixelRatio;null==a&&(a=1);var b=window.document.createElement("canvas").getContext("2d"),b=p.loadExtension("backingStorePixelRatio",b).value;null==b&&(b=1);a/=b;b=window.screen.height;return 1136<a*window.screen.width||1136<a*b?1:a};oa.prototype={get_width:function(){return this._canvas.width},get_height:function(){return this._canvas.height},
onWindowResize:function(){var a=this._canvas.parentElement.getBoundingClientRect();this.resizeCanvas(a.width,a.height)},resizeCanvas:function(a,b){var c=this.scaleFactor*a,d=this.scaleFactor*b;if(this._canvas.width==c&&this._canvas.height==d)return!1;this._canvas.width=c|0;this._canvas.height=d|0;this.resize.emit();return!0},hideMobileBrowser:function(){var a=this,b=window.document.documentElement.style;b.height=window.innerHeight+100+"px";b.width=window.innerWidth+"px";b.overflow="visible";p.callLater(function(){p.hideMobileBrowser();
p.callLater(function(){b.height=window.innerHeight+"px";a.onWindowResize(null)},100)})},onOrientationChange:function(){this.orientation.set__(p.orientation(window.orientation))},updateFullscreen:function(){this.fullscreen.set__(!0==p.loadFirstExtension(["fullscreen","fullScreen","isFullScreen"],window.document).value)},__class__:oa};var p=function(){};p.__name__=!0;p.callLater=function(a,b){null==b&&(b=0);window.setTimeout(a,b)};p.hideMobileBrowser=function(){window.scrollTo(1,0)};p.loadExtension=
function(a,b){null==b&&(b=window);var c=Ca.field(b,a);if(null!=c)return{prefix:"",field:a,value:c};for(var c=a.charAt(0).toUpperCase()+D.substr(a,1,null),d=0,e=p.VENDOR_PREFIXES;d<e.length;){var f=e[d];++d;var h=f+c,g=Ca.field(b,h);if(null!=g)return{prefix:f,field:h,value:g}}return{prefix:null,field:null,value:null}};p.loadFirstExtension=function(a,b){for(var c=0;c<a.length;){var d=a[c];++c;d=p.loadExtension(d,b);if(null!=d.field)return d}return{prefix:null,field:null,value:null}};p.polyfill=function(a,
b){null==b&&(b=window);var c=p.loadExtension(a,b).value;if(null==c)return!1;b[a]=c;return!0};p.setVendorStyle=function(a,b,c){for(var a=a.style,d=0,e=p.VENDOR_PREFIXES;d<e.length;){var f=e[d];++d;a.setProperty("-"+f+"-"+b,c)}a.setProperty(b,c)};p.addVendorListener=function(a,b,c,d){for(var e=0,f=p.VENDOR_PREFIXES;e<f.length;){var h=f[e];++e;a.addEventListener(h+b,c,d)}a.addEventListener(b,c,d)};p.orientation=function(a){switch(a){case -90:case 90:return sa.Landscape;default:return sa.Portrait}};p.createEmptyCanvas=
function(a,b){var c;c=window.document.createElement("canvas");c.width=a;c.height=b;return c};p.createCanvas=function(a){var b=p.createEmptyCanvas(a.width,a.height),c=b.getContext("2d");c.save();c.globalCompositeOperation="copy";c.drawImage(a,0,0);c.restore();return b};p.detectSlowDriver=function(a){if(0<=window.navigator.platform.indexOf("Win")&&null!=window.chrome){for(var b=0,a=a.getSupportedExtensions();b<a.length;){var c=a[b];++b;if(0<=c.indexOf("WEBGL_compressed_texture"))return!1}return!0}return!1};
p.fixAndroidMath=function(){if(0<=window.navigator.userAgent.indexOf("Linux; U; Android 4")){var a=Math.sin,b=Math.cos;Math.sin=function(b){return 0==b?0:a(b)};Math.cos=function(a){return 0==a?1:b(a)}}};var z=function(a){this.buffer=a};z.__name__=!0;z.__interfaces__=[bb];z.get_supported=function(){if(z._detectSupport){z._detectSupport=!1;var a=p.loadExtension("AudioContext").value;null!=a&&(z.ctx=new a,z.gain=z.createGain(),z.gain.connect(z.ctx.destination),r.volume.watch(function(a){z.gain.gain.value=
a}))}return null!=z.ctx};z.createGain=function(){return null!=z.ctx.createGain?z.ctx.createGain():z.ctx.createGainNode()};z.__super__=H;z.prototype=s(H.prototype,{__class__:z});var Ib=function(a){this._quads=this._maxQuads=this._dataOffset=this._backbufferWidth=this._backbufferHeight=0;this._pendingSetScissor=!1;this._lastBlendMode=this._lastRenderTarget=this._lastShader=this._lastTexture=this._lastScissor=this._currentBlendMode=this._currentShader=this._currentTexture=this._currentRenderTarget=null;
this._gl=a;a.clearColor(0,0,0,0);a.enable(3042);a.pixelStorei(37441,1);this._vertexBuffer=a.createBuffer();a.bindBuffer(34962,this._vertexBuffer);this._quadIndexBuffer=a.createBuffer();a.bindBuffer(34963,this._quadIndexBuffer);this._drawTextureShader=new gb(a);this._drawPatternShader=new hb(a);this._fillRectShader=new ib(a);this.resize(16)};Ib.__name__=!0;Ib.prototype={resizeBackbuffer:function(a,b){this._gl.viewport(0,0,a,b);this._backbufferWidth=a;this._backbufferHeight=b},willRender:function(){},
didRender:function(){this.flush()},bindTexture:function(a){this.flush();this._currentTexture=this._lastTexture=null;this._gl.bindTexture(3553,a)},bindFramebuffer:function(a){a!=this._lastRenderTarget&&(this.flush(),this.bindRenderTarget(a))},prepareDrawTexture:function(a,b,c,d){d!=this._lastTexture&&(this.flush(),this._lastTexture=d);return this.prepareQuad(5,a,b,c,this._drawTextureShader)},prepareFillRect:function(a,b,c){return this.prepareQuad(6,a,b,c,this._fillRectShader)},prepareQuad:function(a,
b,c,d,e){b!=this._lastRenderTarget&&(this.flush(),this._lastRenderTarget=b);c!=this._lastBlendMode&&(this.flush(),this._lastBlendMode=c);e!=this._lastShader&&(this.flush(),this._lastShader=e);if(null!=d||null!=this._lastScissor)if(null==d||null==this._lastScissor||!this._lastScissor.equals(d))this.flush(),this._lastScissor=null!=d?d.clone(this._lastScissor):null,this._pendingSetScissor=!0;this._quads>=this._maxQuads&&this.resize(2*this._maxQuads);++this._quads;b=this._dataOffset;this._dataOffset+=
4*a;return b},flush:function(){if(!(1>this._quads)){this._lastRenderTarget!=this._currentRenderTarget&&this.bindRenderTarget(this._lastRenderTarget);if(this._lastBlendMode!=this._currentBlendMode){switch(this._lastBlendMode[1]){case 0:this._gl.blendFunc(1,771);break;case 1:this._gl.blendFunc(1,1);break;case 2:this._gl.blendFunc(774,771);break;case 3:this._gl.blendFunc(1,769);break;case 4:this._gl.blendFunc(0,770);break;case 5:this._gl.blendFunc(1,0)}this._currentBlendMode=this._lastBlendMode}this._pendingSetScissor&&
(null!=this._lastScissor?(this._gl.enable(3089),this._gl.scissor(this._lastScissor.x|0,this._lastScissor.y|0,this._lastScissor.width|0,this._lastScissor.height|0)):this._gl.disable(3089),this._pendingSetScissor=!1);this._lastTexture!=this._currentTexture&&(this._gl.bindTexture(3553,this._lastTexture.root.nativeTexture),this._currentTexture=this._lastTexture);this._lastShader!=this._currentShader&&(this._lastShader.useProgram(),this._lastShader.prepare(),this._currentShader=this._lastShader);if(this._lastShader==
this._drawPatternShader){var a=this._lastTexture,b=a.root;this._drawPatternShader.setRegion(a.rootX/b.width,a.rootY/b.height,a._width/b.width,a._height/b.height)}this._gl.bufferData(34962,this.data.subarray(0,this._dataOffset),35040);this._gl.drawElements(4,6*this._quads,5123,0);this._dataOffset=this._quads=0}},resize:function(a){this.flush();if(!(1024<a)){this._maxQuads=a;this.data=new Float32Array(24*a);this._gl.bufferData(34962,4*this.data.length,35040);for(var b=new Uint16Array(6*a),c=0;c<a;){var d=
c++;b[6*d]=4*d;b[6*d+1]=4*d+1;b[6*d+2]=4*d+2;b[6*d+3]=4*d+2;b[6*d+4]=4*d+3;b[6*d+5]=4*d}this._gl.bufferData(34963,b,35044)}},bindRenderTarget:function(a){null!=a?(this._gl.bindFramebuffer(36160,a.framebuffer),this._gl.viewport(0,0,a.width,a.height)):(this._gl.bindFramebuffer(36160,null),this._gl.viewport(0,0,this._backbufferWidth,this._backbufferHeight));this._lastRenderTarget=this._currentRenderTarget=a},__class__:Ib};var U=function(a,b){this._inverseProjection=this._stateList=null;null==U._scratchQuadArray&&
(U._scratchQuadArray=new Float32Array(8));this._batcher=a;this._renderTarget=b};U.__name__=!0;U.__interfaces__=[Ja];U.prototype={save:function(){var a=this._stateList,b=this._stateList.next;null==b&&(b=new jb,b.prev=a,a.next=b);a.matrix.clone(b.matrix);b.alpha=a.alpha;b.blendMode=a.blendMode;b.scissor=null!=a.scissor?a.scissor.clone(b.scissor):null;this._stateList=b},transform:function(a,b,c,d,e,f){var h=this._stateList;U._scratchMatrix.set(a,b,c,d,e,f);Y.multiply(h.matrix,U._scratchMatrix,h.matrix)},
restore:function(){this._stateList=this._stateList.prev},drawTexture:function(a,b,c){this.drawSubTexture(a,b,c,0,0,a.get_width(),a.get_height())},drawSubTexture:function(a,b,c,d,e,f,h){var g=this._stateList,i=a.root,b=this.transformQuad(b,c,f,h),c=i.width,i=i.height,d=(a.rootX+d)/c,e=(a.rootY+e)/i,f=d+f/c,h=e+h/i,c=g.alpha,a=this._batcher.prepareDrawTexture(this._renderTarget,g.blendMode,g.scissor,a),g=this._batcher.data;g[a]=b[0];g[++a]=b[1];g[++a]=d;g[++a]=e;g[++a]=c;g[++a]=b[2];g[++a]=b[3];g[++a]=
f;g[++a]=e;g[++a]=c;g[++a]=b[4];g[++a]=b[5];g[++a]=f;g[++a]=h;g[++a]=c;g[++a]=b[6];g[++a]=b[7];g[++a]=d;g[++a]=h;g[++a]=c},fillRect:function(a,b,c,d,e){var f=this._stateList,b=this.transformQuad(b,c,d,e),c=(a&16711680)/16711680,d=(a&65280)/65280,a=(a&255)/255,e=f.alpha,f=this._batcher.prepareFillRect(this._renderTarget,f.blendMode,f.scissor),h=this._batcher.data;h[f]=b[0];h[++f]=b[1];h[++f]=c;h[++f]=d;h[++f]=a;h[++f]=e;h[++f]=b[2];h[++f]=b[3];h[++f]=c;h[++f]=d;h[++f]=a;h[++f]=e;h[++f]=b[4];h[++f]=
b[5];h[++f]=c;h[++f]=d;h[++f]=a;h[++f]=e;h[++f]=b[6];h[++f]=b[7];h[++f]=c;h[++f]=d;h[++f]=a;h[++f]=e},multiplyAlpha:function(a){this._stateList.alpha*=a},setBlendMode:function(a){this._stateList.blendMode=a},applyScissor:function(a,b,c,d){var e=this._stateList,f=U._scratchQuadArray;f[0]=a;f[1]=b;f[2]=a+c;f[3]=b+d;e.matrix.transformArray(f,4,f);this._inverseProjection.transformArray(f,4,f);a=f[0];b=f[1];c=f[2]-a;d=f[3]-b;0>c&&(a+=c,c=-c);0>d&&(b+=d,d=-d);e.applyScissor(a,b,c,d)},willRender:function(){this._batcher.willRender()},
didRender:function(){this._batcher.didRender()},onResize:function(a,b){this._stateList=new jb;var c;c=null!=this._renderTarget?-1:1;this._stateList.matrix.set(2/a,0,0,-2*c/b,-1,c);this._inverseProjection=new Y;this._inverseProjection.set(2/a,0,0,2/b,-1,-1);this._inverseProjection.invert()},transformQuad:function(a,b,c,d){var c=a+c,d=b+d,e=U._scratchQuadArray;e[0]=a;e[1]=b;e[2]=c;e[3]=b;e[4]=c;e[5]=d;e[6]=a;e[7]=d;this._stateList.matrix.transformArray(e,8,e);return e},__class__:U};var jb=function(){this.scissor=
this.prev=this.next=null;this.matrix=new Y;this.alpha=1;this.blendMode=F.Normal};jb.__name__=!0;jb.prototype={applyScissor:function(a,b,c,d){if(null!=this.scissor)var e=ga.max(this.scissor.x,a),f=ga.max(this.scissor.y,b),c=ga.min(this.scissor.x+this.scissor.width,a+c),d=ga.min(this.scissor.y+this.scissor.height,b+d),a=e,b=f,c=c-e,d=d-f;else this.scissor=new Za;this.scissor.set(Math.round(a),Math.round(b),Math.round(c),Math.round(d))},__class__:jb};var Va=function(a,b){var c=this;this._hasGPU=new O(!0);
this.gl=b;b.canvas.addEventListener("webglcontextlost",function(a){a.preventDefault();c._hasGPU.set__(!1)},!1);b.canvas.addEventListener("webglcontextrestore",function(){c.init();c._hasGPU.set__(!0)},!1);a.resize.connect(V(this,this.onResize));this.init()};Va.__name__=!0;Va.__interfaces__=[Ka];Va.prototype={get_type:function(){return ca.WebGL},createTextureFromImage:function(a){if(this.gl.isContextLost())return null;var b=new la(this,a.width,a.height);b.uploadImageData(a);return b.createTexture(a.width,
a.height)},getCompressedTextureFormats:function(){return[]},createCompressedTexture:function(){this.gl.isContextLost();return null},willRender:function(){this.graphics.willRender()},didRender:function(){this.graphics.didRender()},onResize:function(){var a=this.gl.canvas.width,b=this.gl.canvas.height;this.batcher.resizeBackbuffer(a,b);this.graphics.onResize(a,b)},init:function(){this.batcher=new Ib(this.gl);this.graphics=new U(this.batcher,null);this.onResize()},__class__:Va};var kb=function(a,b,c){Z.call(this,
a,b,c)};kb.__name__=!0;kb.__super__=Z;kb.prototype=s(Z.prototype,{__class__:kb});var la=function(a,b,c){this.framebuffer=this._graphics=null;this._renderer=a;this.width=ga.max(2,Hb.nextPowerOfTwo(b));this.height=ga.max(2,Hb.nextPowerOfTwo(c));b=a.gl;this.nativeTexture=b.createTexture();a.batcher.bindTexture(this.nativeTexture);b.texParameteri(3553,10242,33071);b.texParameteri(3553,10243,33071);b.texParameteri(3553,10240,9729);b.texParameteri(3553,10241,9728)};la.__name__=!0;la.__interfaces__=[db];
la.drawBorder=function(a,b,c){var d=a.getContext("2d");d.drawImage(a,b-1,0,1,c,b,0,1,c);d.drawImage(a,0,c-1,b,1,0,c,b,1)};la.__super__=H;la.prototype=s(H.prototype,{createTexture:function(a,b){return new kb(this,a,b)},uploadImageData:function(a){if(this.width!=a.width||this.height!=a.height){var b=p.createEmptyCanvas(this.width,this.height);b.getContext("2d").drawImage(a,0,0);la.drawBorder(b,a.width,a.height);a=b}this._renderer.batcher.bindTexture(this.nativeTexture);this._renderer.gl.texImage2D(3553,
0,6408,6408,5121,a)},readPixels:function(a,b,c,d){this.getGraphics();this._renderer.batcher.bindFramebuffer(this);var e=new Uint8Array(4*c*d);this._renderer.gl.readPixels(a,b,c,d,6408,5121,e);a=0;for(b=e.length;a<b;)c=255/e[a+3],e[a]*=c,++a,e[a]*=c,++a,e[a]*=c,a+=2;return da.ofData(e)},getGraphics:function(){if(null==this._graphics){this._graphics=new U(this._renderer.batcher,this);this._graphics.onResize(this.width,this.height);var a=this._renderer.gl;this.framebuffer=a.createFramebuffer();this._renderer.batcher.bindFramebuffer(this);
a.framebufferTexture2D(36160,36064,3553,this.nativeTexture,0)}return this._graphics},__class__:la});var M=function(a,b,c){c="#ifdef GL_ES\nprecision mediump float;\n#endif\n"+c;this._gl=a;this._program=a.createProgram();a.attachShader(this._program,M.createShader(a,35633,b));a.attachShader(this._program,M.createShader(a,35632,c));a.linkProgram(this._program);a.useProgram(this._program)};M.__name__=!0;M.createShader=function(a,b,c){b=a.createShader(b);a.shaderSource(b,c);a.compileShader(b);return b};
M.prototype={useProgram:function(){this._gl.useProgram(this._program)},prepare:function(){null},getAttribLocation:function(a){return this._gl.getAttribLocation(this._program,a)},getUniformLocation:function(a){return this._gl.getUniformLocation(this._program,a)},__class__:M};var hb=function(a){M.call(this,a,"attribute highp vec2 a_pos;\nattribute mediump vec2 a_uv;\nattribute lowp float a_alpha;\nvarying mediump vec2 v_uv;\nvarying lowp float v_alpha;\nvoid main (void) {\nv_uv = a_uv;\nv_alpha = a_alpha;\ngl_Position = vec4(a_pos, 0, 1);\n}",
"varying mediump vec2 v_uv;\nvarying lowp float v_alpha;\nuniform lowp sampler2D u_texture;\nuniform mediump vec4 u_region;\nvoid main (void) {\ngl_FragColor = texture2D(u_texture, u_region.xy + mod(v_uv, u_region.zw)) * v_alpha;\n}");this.a_pos=this.getAttribLocation("a_pos");this.a_uv=this.getAttribLocation("a_uv");this.a_alpha=this.getAttribLocation("a_alpha");this.u_texture=this.getUniformLocation("u_texture");this.u_region=this.getUniformLocation("u_region");this.setTexture(0)};hb.__name__=!0;
hb.__super__=M;hb.prototype=s(M.prototype,{setTexture:function(a){this._gl.uniform1i(this.u_texture,a)},setRegion:function(a,b,c,d){this._gl.uniform4f(this.u_region,a,b,c,d)},prepare:function(){this._gl.enableVertexAttribArray(this.a_pos);this._gl.enableVertexAttribArray(this.a_uv);this._gl.enableVertexAttribArray(this.a_alpha);this._gl.vertexAttribPointer(this.a_pos,2,5126,!1,20,0);this._gl.vertexAttribPointer(this.a_uv,2,5126,!1,20,8);this._gl.vertexAttribPointer(this.a_alpha,1,5126,!1,20,16)},
__class__:hb});var gb=function(a){M.call(this,a,"attribute highp vec2 a_pos;\nattribute mediump vec2 a_uv;\nattribute lowp float a_alpha;\nvarying mediump vec2 v_uv;\nvarying lowp float v_alpha;\nvoid main (void) {\nv_uv = a_uv;\nv_alpha = a_alpha;\ngl_Position = vec4(a_pos, 0, 1);\n}","varying mediump vec2 v_uv;\nvarying lowp float v_alpha;\nuniform lowp sampler2D u_texture;\nvoid main (void) {\ngl_FragColor = texture2D(u_texture, v_uv) * v_alpha;\n}");this.a_pos=this.getAttribLocation("a_pos");
this.a_uv=this.getAttribLocation("a_uv");this.a_alpha=this.getAttribLocation("a_alpha");this.u_texture=this.getUniformLocation("u_texture");this.setTexture(0)};gb.__name__=!0;gb.__super__=M;gb.prototype=s(M.prototype,{setTexture:function(a){this._gl.uniform1i(this.u_texture,a)},prepare:function(){this._gl.enableVertexAttribArray(this.a_pos);this._gl.enableVertexAttribArray(this.a_uv);this._gl.enableVertexAttribArray(this.a_alpha);this._gl.vertexAttribPointer(this.a_pos,2,5126,!1,20,0);this._gl.vertexAttribPointer(this.a_uv,
2,5126,!1,20,8);this._gl.vertexAttribPointer(this.a_alpha,1,5126,!1,20,16)},__class__:gb});var ib=function(a){M.call(this,a,"attribute highp vec2 a_pos;\nattribute lowp vec3 a_rgb;\nattribute lowp float a_alpha;\nvarying lowp vec4 v_color;\nvoid main (void) {\nv_color = vec4(a_rgb*a_alpha, a_alpha);\ngl_Position = vec4(a_pos, 0, 1);\n}","varying lowp vec4 v_color;\nvoid main (void) {\ngl_FragColor = v_color;\n}");this.a_pos=this.getAttribLocation("a_pos");this.a_rgb=this.getAttribLocation("a_rgb");
this.a_alpha=this.getAttribLocation("a_alpha")};ib.__name__=!0;ib.__super__=M;ib.prototype=s(M.prototype,{prepare:function(){this._gl.enableVertexAttribArray(this.a_pos);this._gl.enableVertexAttribArray(this.a_rgb);this._gl.enableVertexAttribArray(this.a_alpha);this._gl.vertexAttribPointer(this.a_pos,2,5126,!1,24,0);this._gl.vertexAttribPointer(this.a_rgb,3,5126,!1,24,8);this._gl.vertexAttribPointer(this.a_alpha,1,5126,!1,24,20)},__class__:ib});var Jb=function(){this._transitor=null};Jb.__name__=
!0;Jb.__super__=x;Jb.prototype=s(x.prototype,{get_name:function(){return"Director_3"},onAdded:function(){this.owner.addChild(this._root)},onRemoved:function(){this.completeTransition();for(var a=0,b=this.scenes;a<b.length;){var c=b[a];++a;c.dispose()}this.scenes=[];this.occludedScenes=[];this._root.dispose()},onUpdate:function(a){null!=this._transitor&&this._transitor.update(a)&&this.completeTransition()},get_topScene:function(){var a=this.scenes.length;return 0<a?this.scenes[a-1]:null},show:function(a){a=
a._compMap.Scene_5;null!=a&&a.shown.emit()},invalidateVisibility:function(){for(var a=this.scenes.length;0<a;){var b=this.scenes[--a]._compMap.Scene_5;if(null==b||b.opaque)break}this.occludedScenes=0<this.scenes.length?this.scenes.slice(a,this.scenes.length-1):[];a=this.get_topScene();null!=a&&this.show(a)},completeTransition:function(){null!=this._transitor&&(this._transitor.complete(),this._transitor=null,this.invalidateVisibility())},__class__:Jb});var Kb=function(){};Kb.__name__=!0;Kb.__super__=
x;Kb.prototype=s(x.prototype,{get_name:function(){return"Scene_5"},__class__:Kb});var ca={__ename__:!0,__constructs__:["Stage3D","WebGL","Canvas"],Stage3D:["Stage3D",0]};ca.Stage3D.__enum__=ca;ca.WebGL=["WebGL",1];ca.WebGL.__enum__=ca;ca.Canvas=["Canvas",2];ca.Canvas.__enum__=ca;var bc=function(){};bc.__name__=!0;bc.that=function(){};var yb=function(){};yb.__name__=!0;yb.set=function(a,b,c){return c?a|b:a&~b};var $a=function(){this.success=new B;this.error=new B;this.progressChanged=new Na;this.hasResult=
!1;this._total=this._progress=0};$a.__name__=!0;$a.prototype={set_result:function(a){if(this.hasResult)throw"Promise result already assigned";this._result=a;this.hasResult=!0;this.success.emit(a);return a},get:function(a){return this.hasResult?(a(this._result),null):this.success.connect(a).once()},set_progress:function(a){this._progress!=a&&(this._progress=a,this.progressChanged.emit());return a},set_total:function(a){this._total!=a&&(this._total=a,this.progressChanged.emit());return a},__class__:$a};
var Na=function(a){C.call(this,a)};Na.__name__=!0;Na.__super__=C;Na.prototype=s(C.prototype,{connect:function(a,b){null==b&&(b=!1);return this.connectImpl(a,b)},emit:function(){var a=this;this._head==C.DISPATCHING_SENTINEL?this.defer(function(){a.emitImpl()}):this.emitImpl()},emitImpl:function(){for(var a=this.willEmit(),b=a;null!=b;)b._listener(),b.stayInList||b.dispose(),b=b._next;this.didEmit(a)},__class__:Na});var ub=function(a){this.next=null;this.fn=a};ub.__name__=!0;ub.prototype={__class__:ub};
var S=function(){};S.__name__=!0;S.getFileExtension=function(a){var b=a.lastIndexOf(".");return 0<b?D.substr(a,b+1,null):null};S.removeFileExtension=function(a){var b=a.lastIndexOf(".");return 0<b?D.substr(a,0,b):a};S.getUrlExtension=function(a){var b=a.lastIndexOf("?");0<=b&&(a=D.substr(a,0,b));b=a.lastIndexOf("/");0<=b&&(a=D.substr(a,b+1,null));return S.getFileExtension(a)};S.joinPath=function(a,b){0<a.length&&47!=a.charCodeAt(a.length-1)&&(a+="/");return a+b};S.withFields=function(a,b){var c=b.length;
if(0<c){for(var a=0<a.length?a+" [":a+"[",d=0;d<c;){0<d&&(a+=", ");var e=b[d],f=b[d+1];if(N.is(f,Error)){var h=f.stack;null!=h&&(f=h)}a+=e+"="+N.string(f);d+=2}a+="]"}return a};var ta=function(){this.h={}};ta.__name__=!0;ta.__interfaces__=[Ba];ta.prototype={set:function(a,b){this.h[a]=b},get:function(a){return this.h[a]},exists:function(a){return this.h.hasOwnProperty(a)},remove:function(a){if(!this.h.hasOwnProperty(a))return!1;delete this.h[a];return!0},__class__:ta};var v=function(){this.h={};this.h.__keys__=
{}};v.__name__=!0;v.__interfaces__=[Ba];v.prototype={set:function(a,b){var c=a.__id__||(a.__id__=++v.count);this.h[c]=b;this.h.__keys__[c]=a},get:function(a){return this.h[a.__id__]},__class__:v};var ba=function(){this.h={}};ba.__name__=!0;ba.__interfaces__=[Ba];ba.prototype={set:function(a,b){this.h["$"+a]=b},get:function(a){return this.h["$"+a]},keys:function(){var a=[],b;for(b in this.h)this.h.hasOwnProperty(b)&&a.push(b.substr(1));return D.iter(a)},iterator:function(){return{ref:this.h,it:this.keys(),
hasNext:function(){return this.it.hasNext()},next:function(){return this.ref["$"+this.it.next()]}}},__class__:ba};var da=function(a,b){this.length=a;this.b=b};da.__name__=!0;da.alloc=function(a){for(var b=[],c=0;c<a;)c++,b.push(0);return new da(a,b)};da.ofData=function(a){return new da(a.length,a)};da.prototype={__class__:da};var ac=function(){};ac.__name__=!0;ac.getType=function(a){a=a.__meta__;return null==a||null==a.obj?{}:a.obj};var Lb=function(){this.iterEdge=new lb};Lb.__name__=!0;Lb.prototype=
{set_radius:function(a){this._radius=a;this.radiusSquared=this._radius*this._radius;this.diameter=2*this._radius;this.diameterSquared=this.diameter*this.diameter;return a},set_mesh:function(a){return this._mesh=a},findPath:function(a,b,c,d,e,f){this.closedFaces=new v;this.sortedOpenedFaces=[];this.openedFaces=new v;this.entryEdges=new v;this.entryX=new v;this.entryY=new v;this.scoreF=new v;this.scoreG=new v;this.scoreH=new v;this.predecessor=new v;var h;h=m.locatePosition(a,b,this._mesh);switch(h[1]){case 0:return;
case 1:h=h[2];if(h.get_isConstrained())return;this.fromFace=h.get_leftFace();break;case 2:this.fromFace=h[2]}h=m.locatePosition(c,d,this._mesh);switch(h[1]){case 0:h=h[2];this.toFace=h.get_edge().get_leftFace();break;case 1:h=h[2];this.toFace=h.get_leftFace();break;case 2:this.toFace=h[2]}this.sortedOpenedFaces.push(this.fromFace);this.entryEdges.set(this.fromFace,null);null;this.entryX.set(this.fromFace,a);a;this.entryY.set(this.fromFace,b);b;this.scoreG.set(this.fromFace,0);0;a=Math.sqrt((c-a)*
(c-a)+(d-b)*(d-b));this.scoreH.set(this.fromFace,a);a;this.scoreF.set(this.fromFace,a);a;var g,i,k,l,b=new A;h=new A;for(var j=new A,o;;){if(0==this.sortedOpenedFaces.length){this.curFace=null;break}this.curFace=this.sortedOpenedFaces.pop();if(this.curFace==this.toFace)break;for(this.iterEdge.set_fromFace(this.curFace);null!=(g=this.iterEdge.next());)g.get_isConstrained()||(a=g.get_rightFace(),!this.closedFaces.h[a.__id__]&&!(this.curFace!=this.fromFace&&0<this._radius&&!this.isWalkableByRadius(this.entryEdges.h[this.curFace.__id__],
this.curFace,g))&&(b.x=this.entryX.h[this.curFace.__id__],b.y=this.entryY.h[this.curFace.__id__],h.x=(g.get_originVertex().get_pos().x+g.get_destinationVertex().get_pos().x)/2,h.y=(g.get_originVertex().get_pos().y+g.get_destinationVertex().get_pos().y)/2,j.x=h.x-c,j.y=h.y-d,l=j.get_length(),j.x=b.x-h.x,j.y=b.y-h.y,k=this.scoreG.h[this.curFace.__id__]+j.get_length(),i=l+k,o=!1,null==this.openedFaces.h[a.__id__]||!this.openedFaces.h[a.__id__]?(this.sortedOpenedFaces.push(a),this.openedFaces.set(a,!0),
!0,o=!0):this.scoreF.h[a.__id__]>i&&(o=!0),o&&(this.entryEdges.set(a,g),g,g=h.x,this.entryX.set(a,g),g,g=h.y,this.entryY.set(a,g),g,this.scoreF.set(a,i),i,this.scoreG.set(a,k),k,this.scoreH.set(a,l),l,i=this.curFace,this.predecessor.set(a,i),i)));this.openedFaces.set(this.curFace,!1);!1;this.closedFaces.set(this.curFace,!0);!0;this.sortedOpenedFaces.sort(V(this,this.sortingFaces))}if(null!=this.curFace)for(e.push(this.curFace);this.curFace!=this.fromFace;)f.unshift(this.entryEdges.h[this.curFace.__id__]),
this.curFace=this.predecessor.h[this.curFace.__id__],e.unshift(this.curFace)},sortingFaces:function(a,b){return this.scoreF.h[a.__id__]==this.scoreF.h[b.__id__]?0:this.scoreF.h[a.__id__]<this.scoreF.h[b.__id__]?1:-1},isWalkableByRadius:function(a,b,c){var d=null,e=null,f=null;a.get_originVertex()==c.get_originVertex()?(d=a.get_destinationVertex(),e=c.get_destinationVertex(),f=a.get_originVertex()):a.get_destinationVertex()==c.get_destinationVertex()?(d=a.get_originVertex(),e=c.get_originVertex(),
f=a.get_destinationVertex()):a.get_originVertex()==c.get_destinationVertex()?(d=a.get_destinationVertex(),e=c.get_originVertex(),f=a.get_originVertex()):a.get_destinationVertex()==c.get_originVertex()&&(d=a.get_originVertex(),e=c.get_destinationVertex(),f=a.get_destinationVertex());var h;h=(f.get_pos().x-d.get_pos().x)*(e.get_pos().x-d.get_pos().x)+(f.get_pos().y-d.get_pos().y)*(e.get_pos().y-d.get_pos().y);if(0>=h)return f=(f.get_pos().x-d.get_pos().x)*(f.get_pos().x-d.get_pos().x)+(f.get_pos().y-
d.get_pos().y)*(f.get_pos().y-d.get_pos().y),f>=this.diameterSquared?!0:!1;h=(f.get_pos().x-e.get_pos().x)*(d.get_pos().x-e.get_pos().x)+(f.get_pos().y-e.get_pos().y)*(d.get_pos().y-e.get_pos().y);if(0>=h)return f=(f.get_pos().x-e.get_pos().x)*(f.get_pos().x-e.get_pos().x)+(f.get_pos().y-e.get_pos().y)*(f.get_pos().y-e.get_pos().y),f>=this.diameterSquared?!0:!1;c=b.get_edge()!=a&&b.get_edge().get_oppositeEdge()!=a&&b.get_edge()!=c&&b.get_edge().get_oppositeEdge()!=c?b.get_edge():b.get_edge().get_nextLeftEdge()!=
a&&b.get_edge().get_nextLeftEdge().get_oppositeEdge()!=a&&b.get_edge().get_nextLeftEdge()!=c&&b.get_edge().get_nextLeftEdge().get_oppositeEdge()!=c?b.get_edge().get_nextLeftEdge():b.get_edge().get_prevLeftEdge();if(c.get_isConstrained()){if(e=new A(f.get_pos().x,f.get_pos().y),m.projectOrthogonaly(e,c),f=(e.x-f.get_pos().x)*(e.x-f.get_pos().x)+(e.y-f.get_pos().y)*(e.y-f.get_pos().y),!(f>=this.diameterSquared))return!1}else{d=(f.get_pos().x-d.get_pos().x)*(f.get_pos().x-d.get_pos().x)+(f.get_pos().y-
d.get_pos().y)*(f.get_pos().y-d.get_pos().y);e=(f.get_pos().x-e.get_pos().x)*(f.get_pos().x-e.get_pos().x)+(f.get_pos().y-e.get_pos().y)*(f.get_pos().y-e.get_pos().y);if(d<this.diameterSquared||e<this.diameterSquared)return!1;e=[];d=[];a=new v;d.push(c);c.get_leftFace()==b?(e.push(c.get_rightFace()),b=c.get_rightFace()):(e.push(c.get_leftFace()),b=c.get_leftFace());a.set(b,!0);!0;for(var g;0<e.length;){b=e.shift();c=d.shift();b.get_edge()==c||b.get_edge()==c.get_oppositeEdge()?(c=b.get_edge().get_nextLeftEdge(),
g=b.get_edge().get_nextLeftEdge().get_nextLeftEdge()):b.get_edge().get_nextLeftEdge()==c||b.get_edge().get_nextLeftEdge()==c.get_oppositeEdge()?(c=b.get_edge(),g=b.get_edge().get_nextLeftEdge().get_nextLeftEdge()):(c=b.get_edge(),g=b.get_edge().get_nextLeftEdge());h=c.get_leftFace()==b?c.get_rightFace():c.get_leftFace();b=g.get_leftFace()==b?g.get_rightFace():g.get_leftFace();if(!a.h[h.__id__]&&m.distanceSquaredVertexToEdge(f,c)<this.diameterSquared){if(c.get_isConstrained())return!1;e.push(h);d.push(c);
a.set(h,!0);!0}if(!a.h[b.__id__]&&m.distanceSquaredVertexToEdge(f,g)<this.diameterSquared){if(g.get_isConstrained())return!1;e.push(b);d.push(g);a.set(b,!0);!0}}}return!0},__class__:Lb};var qb=function(){this._radius=10;this.x=this.y=0;this.dirNormX=1;this.dirNormY=0};qb.__name__=!0;qb.prototype={get_radius:function(){return this._radius},set_radius:function(a){this._radius=a;this._radiusSquared=this._radius*this._radius;return a},__class__:qb};var Mb=function(){this._currPoolPointsIndex=0;this._poolPointsSize=
3E3;this._numSamplesCircle=16;this._radius=this._radiusSquared=0;this._poolPoints=[];for(var a=0,b=this._poolPointsSize;a<b;)a++,this._poolPoints.push(new A)};Mb.__name__=!0;Mb.prototype={getPoint:function(a,b){null==b&&(b=0);null==a&&(a=0);this.__point=this._poolPoints[this._currPoolPointsIndex];this.__point.setXY(a,b);this._currPoolPointsIndex++;this._currPoolPointsIndex==this._poolPointsSize&&(this._poolPoints.push(new A),this._poolPointsSize++);return this.__point},getCopyPoint:function(a){return this.getPoint(a.x,
a.y)},get_radius:function(){return this._radius},set_radius:function(a){this._radius=Math.max(0,a);this._radiusSquared=this._radius*this._radius;this._sampleCircle=[];if(0==this.get_radius())return 0;for(var a=0,b=this._numSamplesCircle;a<b;){var c=a++;this._sampleCircle.push(new A(this._radius*Math.cos(-2*Math.PI*c/this._numSamplesCircle),this._radius*Math.sin(-2*Math.PI*c/this._numSamplesCircle)))}this._sampleCircleDistanceSquared=(this._sampleCircle[0].x-this._sampleCircle[1].x)*(this._sampleCircle[0].x-
this._sampleCircle[1].x)+(this._sampleCircle[0].y-this._sampleCircle[1].y)*(this._sampleCircle[0].y-this._sampleCircle[1].y);return this._radius},findPath:function(a,b,c,d,e,f,h){this._currPoolPointsIndex=0;if(0<this._radius){var g=e[0],i,k,l;k=g.get_edge().get_originVertex().get_pos();l=g.get_edge().get_destinationVertex().get_pos();g=g.get_edge().get_nextLeftEdge().get_destinationVertex().get_pos();i=(k.x-a)*(k.x-a)+(k.y-b)*(k.y-b);i<=this._radiusSquared?(i=Math.sqrt(i),a=1.01*this._radius*((a-
k.x)/i)+k.x,b=1.01*this._radius*((b-k.y)/i)+k.y):(i=(l.x-a)*(l.x-a)+(l.y-b)*(l.y-b),i<=this._radiusSquared?(i=Math.sqrt(i),a=1.01*this._radius*((a-l.x)/i)+l.x,b=1.01*this._radius*((b-l.y)/i)+l.y):(i=(g.x-a)*(g.x-a)+(g.y-b)*(g.y-b),i<=this._radiusSquared&&(i=Math.sqrt(i),a=1.01*this._radius*((a-g.x)/i)+g.x,b=1.01*this._radius*((b-g.y)/i)+g.y)));g=e[e.length-1];k=g.get_edge().get_originVertex().get_pos();l=g.get_edge().get_destinationVertex().get_pos();g=g.get_edge().get_nextLeftEdge().get_destinationVertex().get_pos();
i=(k.x-c)*(k.x-c)+(k.y-d)*(k.y-d);i<=this._radiusSquared?(i=Math.sqrt(i),c=1.01*this._radius*((c-k.x)/i)+k.x,d=1.01*this._radius*((d-k.y)/i)+k.y):(i=(l.x-c)*(l.x-c)+(l.y-d)*(l.y-d),i<=this._radiusSquared?(i=Math.sqrt(i),c=1.01*this._radius*((c-l.x)/i)+l.x,d=1.01*this._radius*((d-l.y)/i)+l.y):(i=(g.x-c)*(g.x-c)+(g.y-d)*(g.y-d),i<=this._radiusSquared&&(i=Math.sqrt(i),c=1.01*this._radius*((c-g.x)/i)+g.x,d=1.01*this._radius*((d-g.y)/i)+g.y)))}var j;j=new A(a,b);k=new A(c,d);if(1==e.length)h.push(j.x),
h.push(j.y),h.push(k.x),h.push(k.y);else{var o=null,E=null;l=m.isInFace(a,b,e[0]);switch(l[1]){case 1:f[0]==l[2]&&(f.shift(),e.shift())}g=[];i=[];g.push(j);i.push(j);var ea=new v,n=[],e=new v;l=new v;e.set(j,0);0;var o=f[0],q=m.getRelativePosition2(a,b,o),p,b=this.getCopyPoint(o.get_destinationVertex().get_pos());p=this.getCopyPoint(o.get_originVertex().get_pos());n.push(b);n.push(p);l.set(j,b);b;l.set(b,p);p;a=p;1==q?(e.set(b,1),1,e.set(p,-1),-1,b=o.get_destinationVertex(),ea.set(b,1),1,o=o.get_originVertex(),
ea.set(o,-1),-1):-1==q&&(e.set(b,-1),-1,e.set(p,1),1,b=o.get_destinationVertex(),ea.set(b,-1),-1,o=o.get_originVertex(),ea.set(o,1),1);q=f[0].get_originVertex();b=f[0].get_destinationVertex();p=1;for(var y=f.length;p<y;)o=p++,o=f[o],o.get_originVertex()==q?E=o.get_destinationVertex():o.get_destinationVertex()==q?E=o.get_originVertex():o.get_originVertex()==b?(E=o.get_destinationVertex(),q=b):o.get_destinationVertex()==b?(E=o.get_originVertex(),q=b):null,b=this.getCopyPoint(E.get_pos()),n.push(b),
o=-ea.h[q.__id__],e.set(b,o),o,l.set(a,b),b,ea.set(E,o),o,a=b,b=q,q=E;l.set(a,k);k;e.set(k,0);0;f=[];E=new v;f.push(j);E.set(j,0);0;ea=0;for(a=n.length;ea<a;)if(j=ea++,b=n[j],-1==e.h[b.__id__]){for(j=g.length-2;0<=j;){o=m.getDirection(g[j].x,g[j].y,g[j+1].x,g[j+1].y,b.x,b.y);if(-1!=o){g.shift();for(o=0;o<j;)o++,f.push(g[0]),E.set(g[0],1),1,g.shift();f.push(g[0]);E.set(g[0],1);1;i.splice(0,i.length);i.push(g[0]);i.push(b);break}j--}i.push(b);for(j=i.length-3;0<=j;){o=m.getDirection(i[j].x,i[j].y,i[j+
1].x,i[j+1].y,b.x,b.y);if(-1==o)break;else i.splice(j+1,1);j--}}else{for(j=i.length-2;0<=j;){o=m.getDirection(i[j].x,i[j].y,i[j+1].x,i[j+1].y,b.x,b.y);if(1!=o){i.shift();for(o=0;o<j;)o++,f.push(i[0]),E.set(i[0],-1),-1,i.shift();f.push(i[0]);E.set(i[0],-1);-1;g.splice(0,g.length);g.push(i[0]);g.push(b);break}j--}g.push(b);for(j=g.length-3;0<=j;){o=m.getDirection(g[j].x,g[j].y,g[j+1].x,g[j+1].y,b.x,b.y);if(1==o)break;else g.splice(j+1,1);j--}}n=!1;for(j=i.length-2;0<=j;){o=m.getDirection(i[j].x,i[j].y,
i[j+1].x,i[j+1].y,c,d);if(1!=o){i.shift();n=0;for(j+=1;n<j;)n++,f.push(i[0]),E.set(i[0],-1),-1,i.shift();f.push(k);E.set(k,0);0;n=!0;break}j--}if(!n)for(j=g.length-2;0<=j;){o=m.getDirection(g[j].x,g[j].y,g[j+1].x,g[j+1].y,c,d);if(-1!=o){g.shift();c=0;for(d=j+1;c<d;)c++,f.push(g[0]),E.set(g[0],1),1,g.shift();f.push(k);E.set(k,0);0;n=!0;break}j--}n||(f.push(k),E.set(k,0),0);c=[];if(0<this.get_radius()){d=[];if(2==f.length)this.adjustWithTangents(f[0],!1,f[1],!1,e,l,d,c);else if(2<f.length){this.adjustWithTangents(f[0],
!1,f[1],!0,e,l,d,c);if(3<f.length){g=1;for(i=f.length-3+1;g<i;)n=g++,this.adjustWithTangents(f[n],!0,f[n+1],!0,e,l,d,c)}g=f.length;this.adjustWithTangents(f[g-2],!0,f[g-1],!1,e,l,d,c)}d.push(k);this.checkAdjustedPath(d,c,e);l=[];for(k=d.length-2;1<=k;){for(this.smoothAngle(c[2*k-1],d[k],c[2*k],e.h[d[k].__id__],l);0!=l.length;)g=2*k,c.splice(g,0),i=l.pop(),c.splice(g,0,i);k--}}else c=f;e=0;for(k=c.length;e<k;)d=e++,h.push(c[d].x),h.push(c[d].y)}},adjustWithTangents:function(a,b,c,d,e,f,h,g){var i=
[],k=e.h[a.__id__],l=e.h[c.__id__],j=null,o=null;if(!b&&!d)j=a,o=c;else if(b)if(d)if(1==k&&1==l)m.tangentsParalCircleToCircle(this._radius,a.x,a.y,c.x,c.y,i),j=this.getPoint(i[2],i[3]),o=this.getPoint(i[4],i[5]);else if(-1==k&&-1==l)m.tangentsParalCircleToCircle(this._radius,a.x,a.y,c.x,c.y,i),j=this.getPoint(i[0],i[1]),o=this.getPoint(i[6],i[7]);else if(1==k&&-1==l)if(m.tangentsCrossCircleToCircle(this._radius,a.x,a.y,c.x,c.y,i))j=this.getPoint(i[2],i[3]),o=this.getPoint(i[6],i[7]);else return;else if(m.tangentsCrossCircleToCircle(this._radius,
a.x,a.y,c.x,c.y,i))j=this.getPoint(i[0],i[1]),o=this.getPoint(i[4],i[5]);else return;else if(m.tangentsPointToCircle(c.x,c.y,a.x,a.y,this._radius,i))0<i.length&&(j=1==k?this.getPoint(i[0],i[1]):this.getPoint(i[2],i[3]),o=c);else return;else if(m.tangentsPointToCircle(a.x,a.y,c.x,c.y,this._radius,i))1==l?(j=a,o=this.getPoint(i[2],i[3])):(j=a,o=this.getPoint(i[0],i[1]));else return;for(i=f.h[a.__id__];i!=c;){k=m.distanceSquaredPointToSegment(i.x,i.y,j.x,j.y,o.x,o.y);if(k<this._radiusSquared){this.adjustWithTangents(a,
b,i,!0,e,f,h,g);this.adjustWithTangents(i,!0,c,d,e,f,h,g);return}i=f.h[i.__id__]}g.push(j);g.push(o);h.push(a)},checkAdjustedPath:function(a,b,c){for(var d=!0,e,f,h,g,i,k,l,j=[],o=null,E=null;d;)for(var d=!1,n=2;n<a.length;)g=a[n],i=c.h[g.__id__],e=a[n-1],h=c.h[e.__id__],e=a[n-2],f=c.h[e.__id__],h==i&&(h=b[2*(n-2)],k=b[2*(n-1)-1],l=b[2*(n-1)],h=(h.x-k.x)*(l.x-k.x)+(h.y-k.y)*(l.y-k.y),0<h&&(2==n?(m.tangentsPointToCircle(e.x,e.y,g.x,g.y,this._radius,j),1==i?(o=e,E=this.getPoint(j[2],j[3])):(o=e,E=this.getPoint(j[0],
j[1]))):n==a.length-1?(m.tangentsPointToCircle(g.x,g.y,e.x,e.y,this._radius,j),o=1==f?this.getPoint(j[0],j[1]):this.getPoint(j[2],j[3]),E=g):1==f&&-1==i?(m.tangentsCrossCircleToCircle(this._radius,e.x,e.y,g.x,g.y,j),o=this.getPoint(j[2],j[3]),E=this.getPoint(j[6],j[7])):-1==f&&1==i?(m.tangentsCrossCircleToCircle(this._radius,e.x,e.y,g.x,g.y,j),o=this.getPoint(j[0],j[1]),E=this.getPoint(j[4],j[5])):1==f&&1==i?(m.tangentsParalCircleToCircle(this._radius,e.x,e.y,g.x,g.y,j),o=this.getPoint(j[2],j[3]),
E=this.getPoint(j[4],j[5])):-1==f&&-1==i&&(m.tangentsParalCircleToCircle(this._radius,e.x,e.y,g.x,g.y,j),o=this.getPoint(j[0],j[1]),E=this.getPoint(j[6],j[7])),g=2*(n-2),b.splice(g,1),b.splice(g,0,o),g=2*n-1,b.splice(g,1),b.splice(g,0,E),a.splice(n-1,1),b.splice(2*(n-1)-1,2),j.splice(0,j.length),n--)),n++},smoothAngle:function(a,b,c,d,e){var f=m.getDirection(a.x,a.y,b.x,b.y,c.x,c.y);if(!((a.x-c.x)*(a.x-c.x)+(a.y-c.y)*(a.y-c.y)<=this._sampleCircleDistanceSquared)){for(var h=0,g,i,k,l,j,o=0,n=this._numSamplesCircle;o<
n;){g=o++;k=!1;l=b.x+this._sampleCircle[g].x;j=b.y+this._sampleCircle[g].y;g=m.getDirection(a.x,a.y,b.x,b.y,l,j);i=m.getDirection(b.x,b.y,c.x,c.y,l,j);if(1==d)if(-1==f)-1==g&&-1==i&&(k=!0);else{if(-1==g||-1==i)k=!0}else if(1==f)1==g&&1==i&&(k=!0);else if(1==g||1==i)k=!0;k?(e.splice(h,0),k=new A(l,j),e.splice(h,0,k),h++):h=0}-1==d&&e.reverse()}},__class__:Mb};var rb=function(){this.astar=new Lb;this.funnel=new Mb;this.listFaces=[];this.listEdges=[]};rb.__name__=!0;rb.prototype={set_mesh:function(a){this._mesh=
a;this.astar.set_mesh(this._mesh);return a},findPath:function(a,b,c){c.splice(0,c.length);m.isCircleIntersectingAnyConstraint(a,b,this.entity.get_radius(),this._mesh)||(this.astar.set_radius(this.entity.get_radius()),this.funnel.set_radius(this.entity.get_radius()),this.listFaces.splice(0,this.listFaces.length),this.listEdges.splice(0,this.listEdges.length),this.astar.findPath(this.entity.x,this.entity.y,a,b,this.listFaces,this.listEdges),0!=this.listFaces.length&&this.funnel.findPath(this.entity.x,
this.entity.y,a,b,this.listFaces,this.listEdges,c))},__class__:rb};var Aa=function(){this._samplingDistance=this._samplingDistanceSquared=1;this._preCompX=[];this._preCompY=[]};Aa.__name__=!0;Aa.pythag=function(a,b){return Math.sqrt(a*a+b*b)};Aa.prototype={get_hasNext:function(){return this._hasNext},set_samplingDistance:function(a){this._samplingDistance=a;this._samplingDistanceSquared=this._samplingDistance*this._samplingDistance;return a},set_path:function(a){this._path=a;this._preComputed=!1;
this.reset();return a},reset:function(){0<this._path.length?(this._currentX=this._path[0],this._currentY=this._path[1],this._iPrev=0,this._iNext=2,this._hasPrev=!1,this._hasNext=!0,this._count=0,this.updateEntity()):(this._hasNext=this._hasPrev=!1,this._count=0)},next:function(){if(!this._hasNext)return!1;this._hasPrev=!0;if(this._preComputed)return this._count++,this._count==this._preCompX.length-1&&(this._hasNext=!1),this._currentX=this._preCompX[this._count],this._currentY=this._preCompY[this._count],
this.updateEntity(),!0;var a,b;for(a=this._samplingDistance;;)if(b=Aa.pythag(this._currentX-this._path[this._iNext],this._currentY-this._path[this._iNext+1]),b<a){if(a-=b,this._currentX=this._path[this._iNext],this._currentY=this._path[this._iNext+1],this._iPrev+=2,this._iNext+=2,this._iNext==this._path.length)break}else break;this._iNext==this._path.length?(this._currentX=this._path[this._iPrev],this._currentY=this._path[this._iPrev+1],this._hasNext=!1,this._iNext=this._path.length-2,this._iPrev=
this._iNext-2):(this._currentX+=(this._path[this._iNext]-this._currentX)*a/b,this._currentY+=(this._path[this._iNext+1]-this._currentY)*a/b);this.updateEntity();return!0},updateEntity:function(){null!=this.entity&&(Oa.assertFalse(Math.isNaN(this._currentX)&&Math.isNaN(this._currentY),null,{fileName:"LinearPathSampler.hx",lineNumber:228,className:"hxDaedalus.ai.trajectory.LinearPathSampler",methodName:"updateEntity"}),this.entity.x=this._currentX,this.entity.y=this._currentY)},__class__:Aa};var $=
function(){this._id=$.INC;$.INC++;this._edges=[]};$.__name__=!0;$.prototype={addEdge:function(a){-1==this._edges.indexOf(a)&&-1==this._edges.indexOf(a.get_oppositeEdge())&&this._edges.push(a)},get_edges:function(){return this._edges},dispose:function(){this.fromShape=this._edges=null},__class__:$};var ha=function(){this._id=ha.INC;ha.INC++;this.segments=[]};ha.__name__=!0;ha.prototype={dispose:function(){for(;0<this.segments.length;)this.segments.pop().dispose();this.segments=null},__class__:ha};
var q=function(){this._id=q.INC;q.INC++;this.fromConstraintSegments=[]};q.__name__=!0;q.prototype={get_isReal:function(){return this._isReal},get_isConstrained:function(){return this._isConstrained},setDatas:function(a,b,c,d,e,f){null==f&&(f=!1);null==e&&(e=!0);this._isConstrained=f;this._isReal=e;this._originVertex=a;this._oppositeEdge=b;this._nextLeftEdge=c;this._leftFace=d},addFromConstraintSegment:function(a){-1==this.fromConstraintSegments.indexOf(a)&&this.fromConstraintSegments.push(a)},removeFromConstraintSegment:function(a){a=
this.fromConstraintSegments.indexOf(a);-1!=a&&this.fromConstraintSegments.splice(a,1)},set_originVertex:function(a){return this._originVertex=a},set_nextLeftEdge:function(a){return this._nextLeftEdge=a},set_leftFace:function(a){return this._leftFace=a},set_isConstrained:function(a){return this._isConstrained=a},dispose:function(){this.fromConstraintSegments=this._leftFace=this._nextLeftEdge=this._oppositeEdge=this._originVertex=null},get_originVertex:function(){return this._originVertex},get_destinationVertex:function(){return this.get_oppositeEdge().get_originVertex()},
get_oppositeEdge:function(){return this._oppositeEdge},get_nextLeftEdge:function(){return this._nextLeftEdge},get_prevLeftEdge:function(){return this._nextLeftEdge.get_nextLeftEdge()},get_nextRightEdge:function(){return this._oppositeEdge.get_nextLeftEdge().get_nextLeftEdge().get_oppositeEdge()},get_prevRightEdge:function(){return this._oppositeEdge.get_nextLeftEdge().get_oppositeEdge()},get_rotLeftEdge:function(){return this._nextLeftEdge.get_nextLeftEdge().get_oppositeEdge()},get_leftFace:function(){return this._leftFace},
get_rightFace:function(){return this._oppositeEdge.get_leftFace()},__class__:q};var G=function(){this._id=G.INC;G.INC++};G.__name__=!0;G.prototype={get_isReal:function(){return this._isReal},setDatas:function(a,b){null==b&&(b=!0);this._isReal=b;this._edge=a},dispose:function(){this._edge=null},get_edge:function(){return this._edge},__class__:G};var ua=function(a,b){this.__objectsUpdateInProgress=!1;this._vertices=this._edges=this._faces=this._constraintShapes=this._objects=this.__centerVertex=this.__edgesToCheck=
null;this._clipping=!1;this._width=this._height=0;this._id=ua.INC;ua.INC++;this._width=a;this._height=b;this._clipping=!0;this._vertices=[];this._edges=[];this._faces=[];this._constraintShapes=[];this._objects=[];this.__edgesToCheck=[]};ua.__name__=!0;ua.prototype={get_height:function(){return this._height},get_width:function(){return this._width},set_clipping:function(a){return this._clipping=a},get___constraintShapes:function(){return this._constraintShapes},insertObject:function(a){null!=a.get_constraintShape()&&
this.deleteObject(a);var b=new ha,c,d=a.get_coordinates(),e=a.get_matrix();a.updateMatrixFromValues();for(var f,h,g,i,k=0;k<d.length;)f=d[k],h=d[k+1],g=d[k+2],i=d[k+3],c=e.transformX(f,h),f=e.transformY(f,h),h=e.transformX(g,i),g=e.transformY(g,i),c=this.insertConstraintSegment(c,f,h,g),null!=c&&(c.fromShape=b,b.segments.push(c)),k+=4;this._constraintShapes.push(b);a.set_constraintShape(b);this.__objectsUpdateInProgress||this._objects.push(a)},deleteObject:function(a){null!=a.get_constraintShape()&&
(this.deleteConstraintShape(a.get_constraintShape()),a.set_constraintShape(null),this.__objectsUpdateInProgress||this._objects.splice(this._objects.indexOf(a),1))},insertConstraintShape:function(a){for(var b=new ha,c=null,d=0;d<a.length;)c=this.insertConstraintSegment(a[d],a[d+1],a[d+2],a[d+3]),null!=c&&(c.fromShape=b,b.segments.push(c)),d+=4;this._constraintShapes.push(b);return b},deleteConstraintShape:function(a){for(var b=0,c=a.segments.length;b<c;){var d=b++;this.deleteConstraintSegment(a.segments[d])}a.dispose();
this._constraintShapes.splice(this._constraintShapes.indexOf(a),1)},insertConstraintSegment:function(a,b,c,d){var e=this.findPositionFromBounds(a,b),f=this.findPositionFromBounds(c,d),h=a,g=b,i=c,k=d;if(this._clipping&&(0!=e||0!=f)){var l=new A;if(0!=e&&0!=f){if(0>=a&&0>=c||a>=this._width&&c>=this._width||0>=b&&0>=d||b>=this._height&&d>=this._height)return null;if(8==e&&4==f||4==e&&8==f)m.intersections2segments(a,b,c,d,0,0,0,this._height,l),h=l.x,g=l.y,m.intersections2segments(a,b,c,d,this._width,
0,this._width,this._height,l),i=l.x,k=l.y;else if(2==e&&6==f||6==e&&2==f)m.intersections2segments(a,b,c,d,0,0,this._width,0,l),h=l.x,g=l.y,m.intersections2segments(a,b,c,d,0,this._height,this._width,this._height,l),i=l.x,k=l.y;else if(2==e&&8==f||8==e&&2==f)if(m.intersections2segments(a,b,c,d,0,0,this._width,0,l))h=l.x,g=l.y,m.intersections2segments(a,b,c,d,0,0,0,this._height,l),i=l.x,k=l.y;else return null;else if(2==e&&4==f||4==e&&2==f)if(m.intersections2segments(a,b,c,d,0,0,this._width,0,l))h=
l.x,g=l.y,m.intersections2segments(a,b,c,d,this._width,0,this._width,this._height,l),i=l.x,k=l.y;else return null;else if(6==e&&4==f||4==e&&6==f)if(m.intersections2segments(a,b,c,d,0,this._height,this._width,this._height,l))h=l.x,g=l.y,m.intersections2segments(a,b,c,d,this._width,0,this._width,this._height,l),i=l.x,k=l.y;else return null;else if(8==e&&6==f||6==e&&8==f)if(m.intersections2segments(a,b,c,d,0,this._height,this._width,this._height,l))h=l.x,g=l.y,m.intersections2segments(a,b,c,d,0,0,0,
this._height,l),i=l.x,k=l.y;else return null;else if(f=e=!1,m.intersections2segments(a,b,c,d,0,0,this._width,0,l)&&(h=l.x,g=l.y,e=!0),m.intersections2segments(a,b,c,d,this._width,0,this._width,this._height,l)&&(e?(i=l.x,k=l.y,f=!0):(h=l.x,g=l.y,e=!0)),!f&&m.intersections2segments(a,b,c,d,0,this._height,this._width,this._height,l)&&(e?(i=l.x,k=l.y,f=!0):(h=l.x,g=l.y,e=!0)),!f&&m.intersections2segments(a,b,c,d,0,0,0,this._height,l)&&(i=l.x,k=l.y),!e)return null}else 2==e||2==f?m.intersections2segments(a,
b,c,d,0,0,this._width,0,l):4==e||4==f?m.intersections2segments(a,b,c,d,this._width,0,this._width,this._height,l):6==e||6==f?m.intersections2segments(a,b,c,d,0,this._height,this._width,this._height,l):8==e||8==f?m.intersections2segments(a,b,c,d,0,0,0,this._height,l):m.intersections2segments(a,b,c,d,0,0,this._width,0,l)||m.intersections2segments(a,b,c,d,this._width,0,this._width,this._height,l)||m.intersections2segments(a,b,c,d,0,this._height,this._width,this._height,l)||m.intersections2segments(a,
b,c,d,0,0,0,this._height,l),0==e?(h=a,g=b):(h=c,g=d),i=l.x,k=l.y}a=this.insertVertex(h,g);if(null==a)return null;i=this.insertVertex(i,k);if(null==i||a==i)return null;k=new mb;b=new $;c=new q;d=new q;c.setDatas(a,d,null,null,!0,!0);d.setDatas(i,c,null,null,!0,!0);var d=[],h=[],g=[],j,l=new A,o;for(j=w.EVertex(a);;)switch(o=!1,j[1]){case 0:e=j[2];for(k.set_fromVertex(e);null!=(f=k.next());){if(f.get_destinationVertex()==i)return f.get_isConstrained()||(f.set_isConstrained(!0),f.get_oppositeEdge().set_isConstrained(!0)),
f.addFromConstraintSegment(b),f.get_oppositeEdge().fromConstraintSegments=f.fromConstraintSegments,a.addFromConstraintSegment(b),i.addFromConstraintSegment(b),b.addEdge(f),b;if(1.0E-4>=m.distanceSquaredVertexToEdge(f.get_destinationVertex(),c)){f.get_isConstrained()||(f.set_isConstrained(!0),f.get_oppositeEdge().set_isConstrained(!0));f.addFromConstraintSegment(b);f.get_oppositeEdge().fromConstraintSegments=f.fromConstraintSegments;a.addFromConstraintSegment(b);b.addEdge(f);a=f.get_destinationVertex();
c.set_originVertex(a);j=w.EVertex(a);o=!0;break}}if(o)continue;for(k.set_fromVertex(e);null!=(f=k.next());)if(f=f.get_nextLeftEdge(),m.intersections2edges(f,c,l)){if(f.get_isConstrained()){a=this.splitEdge(f,l.x,l.y);for(k.set_fromVertex(e);null!=(f=k.next());)if(f.get_destinationVertex()==a){f.set_isConstrained(!0);f.get_oppositeEdge().set_isConstrained(!0);f.addFromConstraintSegment(b);f.get_oppositeEdge().fromConstraintSegments=f.fromConstraintSegments;b.addEdge(f);break}e.addFromConstraintSegment(b);
c.set_originVertex(a);j=w.EVertex(a)}else d.push(f),h.unshift(f.get_nextLeftEdge()),g.push(f.get_prevLeftEdge()),f=f.get_oppositeEdge(),j=w.EEdge(f);break}break;case 1:f=j[2];e=f.get_nextLeftEdge();if(e.get_destinationVertex()==i)return h.unshift(e.get_nextLeftEdge()),g.push(e),f=new q,j=new q,f.setDatas(a,j,null,null,!0,!0),j.setDatas(i,f,null,null,!0,!0),h.push(f),g.push(j),this.insertNewConstrainedEdge(b,f,d,h,g),b;if(1.0E-4>=m.distanceSquaredVertexToEdge(e.get_destinationVertex(),c))h.unshift(e.get_nextLeftEdge()),
g.push(e),f=new q,j=new q,f.setDatas(a,j,null,null,!0,!0),j.setDatas(e.get_destinationVertex(),f,null,null,!0,!0),h.push(f),g.push(j),this.insertNewConstrainedEdge(b,f,d,h,g),d.splice(0,d.length),h.splice(0,h.length),g.splice(0,g.length),a=e.get_destinationVertex(),c.set_originVertex(a),j=w.EVertex(a);else if(m.intersections2edges(e,c,l))if(e.get_isConstrained()){e=this.splitEdge(e,l.x,l.y);for(k.set_fromVertex(e);null!=(f=k.next());)f.get_destinationVertex()==h[0].get_originVertex()&&h.unshift(f),
f.get_destinationVertex()==g[g.length-1].get_destinationVertex()&&g.push(f.get_oppositeEdge());f=new q;j=new q;f.setDatas(a,j,null,null,!0,!0);j.setDatas(e,f,null,null,!0,!0);h.push(f);g.push(j);this.insertNewConstrainedEdge(b,f,d,h,g);d.splice(0,d.length);h.splice(0,h.length);g.splice(0,g.length);a=e;c.set_originVertex(a);j=w.EVertex(a)}else d.push(e),h.unshift(e.get_nextLeftEdge()),f=e.get_oppositeEdge(),j=w.EEdge(f);else if(e=e.get_nextLeftEdge(),m.intersections2edges(e,c,l),e.get_isConstrained()){e=
this.splitEdge(e,l.x,l.y);for(k.set_fromVertex(e);null!=(f=k.next());)f.get_destinationVertex()==h[0].get_originVertex()&&h.unshift(f),f.get_destinationVertex()==g[g.length-1].get_destinationVertex()&&g.push(f.get_oppositeEdge());f=new q;j=new q;f.setDatas(a,j,null,null,!0,!0);j.setDatas(e,f,null,null,!0,!0);h.push(f);g.push(j);this.insertNewConstrainedEdge(b,f,d,h,g);d.splice(0,d.length);h.splice(0,h.length);g.splice(0,g.length);a=e;c.set_originVertex(a);j=w.EVertex(a)}else d.push(e),g.push(e.get_prevLeftEdge()),
f=e.get_oppositeEdge(),j=w.EEdge(f)}return b},insertNewConstrainedEdge:function(a,b,c,d,e){this._edges.push(b);this._edges.push(b.get_oppositeEdge());b.addFromConstraintSegment(a);b.get_oppositeEdge().fromConstraintSegments=b.fromConstraintSegments;a.addEdge(b);b.get_originVertex().addFromConstraintSegment(a);b.get_destinationVertex().addFromConstraintSegment(a);this.untriangulate(c);this.triangulate(d,!0);this.triangulate(e,!0)},deleteConstraintSegment:function(a){for(var b=[],c=null,d,e=0,f=a.get_edges().length;e<
f;)c=e++,c=a.get_edges()[c],c.removeFromConstraintSegment(a),0==c.fromConstraintSegments.length&&(c.set_isConstrained(!1),c.get_oppositeEdge().set_isConstrained(!1)),d=c.get_originVertex(),d.removeFromConstraintSegment(a),b.push(d);d=c.get_destinationVertex();d.removeFromConstraintSegment(a);b.push(d);e=0;for(f=b.length;e<f;)c=e++,this.deleteVertex(b[c]);a.dispose()},insertVertex:function(a,b){if(0>a||0>b||a>this._width||b>this._height)return null;this.__edgesToCheck.splice(0,this.__edgesToCheck.length);
var c=m.locatePosition(a,b,this),d=null;switch(c[1]){case 0:d=c[2];break;case 1:d=this.splitEdge(c[2],a,b);break;case 2:d=this.splitFace(c[2],a,b)}this.restoreAsDelaunay();return d},flipEdge:function(a){var b=a.get_oppositeEdge(),c=new q,d=new q,e=a.get_nextLeftEdge(),f=e.get_nextLeftEdge(),h=b.get_nextLeftEdge(),g=h.get_nextLeftEdge(),i=a.get_originVertex(),k=b.get_originVertex(),l=f.get_originVertex(),j=g.get_originVertex(),o=a.get_leftFace(),m=b.get_leftFace(),n=new G,p=new G;this._edges.push(c);
this._edges.push(d);this._faces.push(p);this._faces.push(n);c.setDatas(l,d,g,p,a.get_isReal(),a.get_isConstrained());d.setDatas(j,c,f,n,a.get_isReal(),a.get_isConstrained());p.setDatas(c);n.setDatas(d);k.get_edge()==b&&k.setDatas(e);i.get_edge()==a&&i.setDatas(h);e.set_nextLeftEdge(c);e.set_leftFace(p);f.set_nextLeftEdge(h);f.set_leftFace(n);h.set_nextLeftEdge(d);h.set_leftFace(n);g.set_nextLeftEdge(e);g.set_leftFace(p);a.dispose();b.dispose();this._edges.splice(this._edges.indexOf(a),1);this._edges.splice(this._edges.indexOf(b),
1);o.dispose();m.dispose();this._faces.splice(this._faces.indexOf(o),1);this._faces.splice(this._faces.indexOf(m),1);return d},splitEdge:function(a,b,c){this.__edgesToCheck.splice(0,this.__edgesToCheck.length);var d=a.get_oppositeEdge(),e=a.get_nextLeftEdge(),f=e.get_nextLeftEdge(),h=d.get_nextLeftEdge(),g=h.get_nextLeftEdge(),i=f.get_originVertex(),k=a.get_originVertex(),l=g.get_originVertex(),j=d.get_originVertex(),o=a.get_leftFace(),n=d.get_leftFace();if(1.0E-4>=(k.get_pos().x-b)*(k.get_pos().x-
b)+(k.get_pos().y-c)*(k.get_pos().y-c))return k;if(1.0E-4>=(j.get_pos().x-b)*(j.get_pos().x-b)+(j.get_pos().y-c)*(j.get_pos().y-c))return j;var p=new W,r=new q,t=new q,u=new q,y=new q,w=new q,s=new q,v=new q,z=new q,x=new G,A=new G,B=new G,C=new G;this._vertices.push(p);this._edges.push(t);this._edges.push(r);this._edges.push(s);this._edges.push(w);this._edges.push(y);this._edges.push(u);this._edges.push(z);this._edges.push(v);this._faces.push(C);this._faces.push(B);this._faces.push(A);this._faces.push(x);
p.setDatas(o.get_isReal()?t:y);p.get_pos().x=b;p.get_pos().y=c;m.projectOrthogonaly(p.get_pos(),a);t.setDatas(p,r,f,x,o.get_isReal());r.setDatas(i,t,z,C,o.get_isReal());s.setDatas(p,w,h,A,a.get_isReal(),a.get_isConstrained());w.setDatas(k,s,t,x,a.get_isReal(),a.get_isConstrained());y.setDatas(p,u,g,B,n.get_isReal());u.setDatas(l,y,s,A,n.get_isReal());z.setDatas(p,v,e,C,a.get_isReal(),a.get_isConstrained());v.setDatas(j,z,y,B,a.get_isReal(),a.get_isConstrained());x.setDatas(t,o.get_isReal());A.setDatas(s,
n.get_isReal());B.setDatas(y,n.get_isReal());C.setDatas(z,o.get_isReal());k.get_edge()==a&&k.setDatas(w);j.get_edge()==d&&j.setDatas(v);f.set_nextLeftEdge(w);f.set_leftFace(x);h.set_nextLeftEdge(u);h.set_leftFace(A);g.set_nextLeftEdge(v);g.set_leftFace(B);e.set_nextLeftEdge(r);e.set_leftFace(C);if(a.get_isConstrained()){b=a.fromConstraintSegments;w.fromConstraintSegments=b.slice(0);s.fromConstraintSegments=w.fromConstraintSegments;z.fromConstraintSegments=b.slice(0);v.fromConstraintSegments=z.fromConstraintSegments;
c=0;for(i=a.fromConstraintSegments.length;c<i;)k=c++,k=a.fromConstraintSegments[k].get_edges(),l=k.indexOf(a),-1!=l?(k.splice(l,1),k.splice(l,0,w),k.splice(l+1,0,z)):(l=k.indexOf(d),k.splice(l,1),k.splice(l,0,v),k.splice(l,0,s));p.set_fromConstraintSegments(b.slice(0))}a.dispose();d.dispose();this._edges.splice(this._edges.indexOf(a),1);this._edges.splice(this._edges.indexOf(d),1);o.dispose();n.dispose();this._faces.splice(this._faces.indexOf(o),1);this._faces.splice(this._faces.indexOf(n),1);this.__centerVertex=
p;this.__edgesToCheck.push(f);this.__edgesToCheck.push(h);this.__edgesToCheck.push(g);this.__edgesToCheck.push(e);return p},splitFace:function(a,b,c){this.__edgesToCheck.splice(0,this.__edgesToCheck.length);var d=a.get_edge(),e=d.get_nextLeftEdge(),f=e.get_nextLeftEdge(),h=d.get_originVertex(),g=e.get_originVertex(),i=f.get_originVertex(),k=new W,l=new q,j=new q,o=new q,m=new q,n=new q,p=new q,r=new G,t=new G,y=new G;this._vertices.push(k);this._edges.push(l);this._edges.push(j);this._edges.push(o);
this._edges.push(m);this._edges.push(n);this._edges.push(p);this._faces.push(r);this._faces.push(t);this._faces.push(y);k.setDatas(j);k.get_pos().x=b;k.get_pos().y=c;l.setDatas(h,j,p,y);j.setDatas(k,l,d,r);o.setDatas(g,m,j,r);m.setDatas(k,o,e,t);n.setDatas(i,p,m,t);p.setDatas(k,n,f,y);r.setDatas(j);t.setDatas(m);y.setDatas(p);d.set_nextLeftEdge(o);d.set_leftFace(r);e.set_nextLeftEdge(n);e.set_leftFace(t);f.set_nextLeftEdge(l);f.set_leftFace(y);a.dispose();this._faces.splice(this._faces.indexOf(a),
1);this.__centerVertex=k;this.__edgesToCheck.push(d);this.__edgesToCheck.push(e);this.__edgesToCheck.push(f);return k},restoreAsDelaunay:function(){for(var a;0<this.__edgesToCheck.length;)a=this.__edgesToCheck.shift(),a.get_isReal()&&!a.get_isConstrained()&&!m.isDelaunay(a)&&(a.get_nextLeftEdge().get_destinationVertex()==this.__centerVertex?(this.__edgesToCheck.push(a.get_nextRightEdge()),this.__edgesToCheck.push(a.get_prevRightEdge())):(this.__edgesToCheck.push(a.get_nextLeftEdge()),this.__edgesToCheck.push(a.get_prevLeftEdge())),
this.flipEdge(a))},deleteVertex:function(a){var b,c=new mb;c.set_fromVertex(a);c.realEdgesOnly=!1;var d,e=[];b=0==a.get_fromConstraintSegments().length;var f=[],h=!1,g=!1,i=[],k=[];if(b)for(;null!=(d=c.next());)e.push(d),f.push(d.get_nextLeftEdge());else{i=0;for(k=a.get_fromConstraintSegments().length;i<k;)if(h=i++,d=a.get_fromConstraintSegments()[h].get_edges(),d[0].get_originVertex()==a||d[d.length-1].get_destinationVertex()==a)return!1;for(i=0;null!=(d=c.next());)if(e.push(d),d.get_isConstrained()&&
(i++,2<i))return!1;var i=[],k=[],l=c=null,j=new q,o=new q;this._edges.push(j);this._edges.push(o);h=0;for(g=e.length;h<g;)d=h++,d=e[d],d.get_isConstrained()?null==c?(o.setDatas(d.get_destinationVertex(),j,null,null,!0,!0),i.push(j),i.push(d.get_nextLeftEdge()),k.push(o),c=d):null==l&&(j.setDatas(d.get_destinationVertex(),o,null,null,!0,!0),k.push(d.get_nextLeftEdge()),l=d):null==c?k.push(d.get_nextLeftEdge()):null==l?i.push(d.get_nextLeftEdge()):k.push(d.get_nextLeftEdge());h=c.get_leftFace().get_isReal();
g=l.get_leftFace().get_isReal();j.fromConstraintSegments=c.fromConstraintSegments.slice(0);o.fromConstraintSegments=j.fromConstraintSegments;for(var m,n=0,p=a.get_fromConstraintSegments().length;n<p;)d=n++,d=a.get_fromConstraintSegments()[d].get_edges(),m=d.indexOf(c),-1!=m?(d.splice(m-1,2),d.splice(m-1,0,j)):(m=d.indexOf(l)-1,d.splice(m,2),d.splice(m,0,o))}c=0;for(l=e.length;c<l;)j=c++,d=e[j],j=d.get_leftFace(),this._faces.splice(this._faces.indexOf(j),1),j.dispose(),d.get_destinationVertex().set_edge(d.get_nextLeftEdge()),
this._edges.splice(this._edges.indexOf(d.get_oppositeEdge()),1),d.get_oppositeEdge().dispose(),this._edges.splice(this._edges.indexOf(d),1),d.dispose();this._vertices.splice(this._vertices.indexOf(a),1);a.dispose();b?this.triangulate(f,!0):(this.triangulate(i,h),this.triangulate(k,g));return!0},untriangulate:function(a){for(var b=new v,c,d=0,e=a.length;d<e;){var f=d++;c=a[f];if(null==function(){var a=c.get_originVertex();return b.h[a.__id__]}(this)){c.get_originVertex().set_edge(c.get_prevLeftEdge().get_oppositeEdge());
var h=c.get_originVertex();b.set(h,!0);!0}null==function(){var a=c.get_destinationVertex();return b.h[a.__id__]}(this)&&(c.get_destinationVertex().set_edge(c.get_nextLeftEdge()),h=c.get_destinationVertex(),b.set(h,!0),!0);this._faces.splice(this._faces.indexOf(c.get_leftFace()),1);c.get_leftFace().dispose();f==a.length-1&&(this._faces.splice(this._faces.indexOf(c.get_rightFace()),1),c.get_rightFace().dispose())}d=0;for(e=a.length;d<e;)f=d++,c=a[f],this._edges.splice(this._edges.indexOf(c.get_oppositeEdge()),
1),this._edges.splice(this._edges.indexOf(c),1),c.get_oppositeEdge().dispose(),c.dispose()},triangulate:function(a,b){if(!(2>a.length))if(2==a.length)Oa.trace("  - edge0: "+a[0].get_originVertex().get_id()+" -> "+a[0].get_destinationVertex().get_id(),{fileName:"Mesh.hx",lineNumber:1404,className:"hxDaedalus.data.Mesh",methodName:"triangulate"}),Oa.trace("  - edge1: "+a[1].get_originVertex().get_id()+" -> "+a[1].get_destinationVertex().get_id(),{fileName:"Mesh.hx",lineNumber:1405,className:"hxDaedalus.data.Mesh",
methodName:"triangulate"});else if(3==a.length){var c=new G;c.setDatas(a[0],b);this._faces.push(c);a[0].set_leftFace(c);a[1].set_leftFace(c);a[2].set_leftFace(c);a[0].set_nextLeftEdge(a[1]);a[1].set_nextLeftEdge(a[2]);a[2].set_nextLeftEdge(a[0])}else{for(var c=a[0],d=c.get_originVertex(),e=c.get_destinationVertex(),f,h,g=new A,i=!1,k=0,l=2,j=a.length;l<j;){var o=l++;f=a[o].get_originVertex();if(1==m.getRelativePosition2(f.get_pos().x,f.get_pos().y,c)){k=o;i=!0;m.getCircumcenter(d.get_pos().x,d.get_pos().y,
e.get_pos().x,e.get_pos().y,f.get_pos().x,f.get_pos().y,g);f=(d.get_pos().x-g.x)*(d.get_pos().x-g.x)+(d.get_pos().y-g.y)*(d.get_pos().y-g.y);f-=1.0E-4;for(var n=2,p=a.length;n<p;)if(h=n++,h!=o&&(h=a[h].get_originVertex(),h=(h.get_pos().x-g.x)*(h.get_pos().x-g.x)+(h.get_pos().y-g.y)*(h.get_pos().y-g.y),h<f)){i=!1;break}if(i)break}}if(!i){k="";e=0;for(g=a.length;e<g;)i=e++,k+=a[i].get_originVertex().get_pos().x+" , ",k+=a[i].get_originVertex().get_pos().y+" , ",k+=a[i].get_destinationVertex().get_pos().x+
" , ",k+=a[i].get_destinationVertex().get_pos().y+" , ";k=2}g=e=i=null;k<a.length-1&&(i=new q,e=new q,this._edges.push(i),this._edges.push(e),i.setDatas(d,e,null,null,b,!1),e.setDatas(a[k].get_originVertex(),i,null,null,b,!1),d=a.slice(k),d.push(i),this.triangulate(d,b));2<k&&(g=new q,d=new q,this._edges.push(g),this._edges.push(d),g.setDatas(a[1].get_originVertex(),d,null,null,b,!1),d.setDatas(a[k].get_originVertex(),g,null,null,b,!1),i=a.slice(1,k),i.push(d),this.triangulate(i,b));this.triangulate(2==
k?[c,a[1],e]:k==a.length-1?[c,g,a[k]]:[c,g,e],b)}},findPositionFromBounds:function(a,b){return 0>=a?0>=b?1:b>=this._height?7:8:a>=this._width?0>=b?3:b>=this._height?5:4:0>=b?2:b>=this._height?6:0},traverse:function(a,b){var c,d;d=new Nb;d.set_fromMesh(this);var e;e=new Ob;for(var f=new v;null!=(c=d.next());)if(f.set(c,!0),!0,this.vertexIsInsideAABB(c,this)){a(c);for(e.set_fromVertex(c);null!=(c=e.next());){var h=c.get_originVertex();f.h[h.__id__]||b(c)}}},vertexIsInsideAABB:function(a,b){return 0>
a.get_pos().x||a.get_pos().x>b.get_width()||0>a.get_pos().y||a.get_pos().y>b.get_height()?!1:!0},__class__:ua};var va=function(){this._id=va.INC;va.INC++;this._pivotY=this._pivotX=0;this._matrix=new Pb;this._scaleY=this._scaleX=1;this._y=this._x=this._rotation=0;this._coordinates=[];this._hasChanged=!1};va.__name__=!0;va.prototype={updateMatrixFromValues:function(){this._matrix.identity();this._matrix.translate(-this._pivotX,-this._pivotY);this._matrix.scale(this._scaleX,this._scaleY);this._matrix.rotate(this._rotation);
this._matrix.translate(this._x,this._y)},set_x:function(a){this._x!=a&&(this._x=a,this._hasChanged=!0);return a},set_y:function(a){this._y!=a&&(this._y=a,this._hasChanged=!0);return a},get_matrix:function(){return this._matrix},get_coordinates:function(){return this._coordinates},get_constraintShape:function(){return this._constraintShape},set_constraintShape:function(a){this._constraintShape=a;this._hasChanged=!0;return a},__class__:va};var W=function(){this._id=W.INC;W.INC++;this._pos=new A;this._fromConstraintSegments=
[]};W.__name__=!0;W.prototype={get_id:function(){return this._id},get_isReal:function(){return this._isReal},get_pos:function(){return this._pos},get_fromConstraintSegments:function(){return this._fromConstraintSegments},set_fromConstraintSegments:function(a){return this._fromConstraintSegments=a},setDatas:function(a,b){null==b&&(b=!0);this._isReal=b;this._edge=a},addFromConstraintSegment:function(a){-1==this._fromConstraintSegments.indexOf(a)&&this._fromConstraintSegments.push(a)},removeFromConstraintSegment:function(a){a=
this._fromConstraintSegments.indexOf(a);-1!=a&&this._fromConstraintSegments.splice(a,1)},dispose:function(){this._fromConstraintSegments=this._edge=this._pos=null},get_edge:function(){return this._edge},set_edge:function(a){return this._edge=a},__class__:W};var wa=function(){this._id=wa.INC;wa.INC++};wa.__name__=!0;wa.prototype={get_node:function(){return this._node},insertNode:function(){var a=new xa;null!=this._node&&(a.set_next(this._node),this._node.set_prev(a));return this._node=a},insertEdge:function(a,
b){if(null!=a.get_successorNodes().get(b))return null;var c=new ya;null!=this._edge&&(this._edge.set_prev(c),c.set_next(this._edge));this._edge=c;c.set_sourceNode(a);c.set_destinationNode(b);a.get_successorNodes().set(b,c);c;null!=a.get_outgoingEdge()&&(a.get_outgoingEdge().set_rotPrevEdge(c),c.set_rotNextEdge(a.get_outgoingEdge()));a.set_outgoingEdge(c);var d;d=b.get_successorNodes().get(a);null!=d&&(c.set_oppositeEdge(d),d.set_oppositeEdge(c));return c},__class__:wa};var ya=function(){this._id=
ya.INC;ya.INC++};ya.__name__=!0;ya.prototype={set_prev:function(a){return this._prev=a},set_next:function(a){return this._next=a},set_rotPrevEdge:function(a){return this._rotPrevEdge=a},get_rotNextEdge:function(){return this._rotNextEdge},set_rotNextEdge:function(a){return this._rotNextEdge=a},set_oppositeEdge:function(a){return this._oppositeEdge=a},set_sourceNode:function(a){return this._sourceNode=a},get_destinationNode:function(){return this._destinationNode},set_destinationNode:function(a){return this._destinationNode=
a},get_data:function(){return this._data},set_data:function(a){return this._data=a},__class__:ya};var xa=function(){this._id=xa.INC;xa.INC++;this._successorNodes=new v};xa.__name__=!0;xa.prototype={set_prev:function(a){return this._prev=a},get_next:function(){return this._next},set_next:function(a){return this._next=a},get_outgoingEdge:function(){return this._outgoingEdge},set_outgoingEdge:function(a){return this._outgoingEdge=a},get_successorNodes:function(){return this._successorNodes},get_data:function(){return this._data},
set_data:function(a){return this._data=a},__class__:xa};var Qb=function(){};Qb.__name__=!0;Qb.prototype={__class__:Qb};var w={__ename__:!0,__constructs__:["EVertex","EEdge","EFace","ENull"]};w.EVertex=function(a){a=["EVertex",0,a];a.__enum__=w;return a};w.EEdge=function(a){a=["EEdge",1,a];a.__enum__=w;return a};w.EFace=function(a){a=["EFace",2,a];a.__enum__=w;return a};w.ENull=["ENull",3];w.ENull.__enum__=w;var A=function(a,b){null==b&&(b=0);null==a&&(a=0);this.x=a;this.y=b};A.__name__=!0;A.prototype=
{setXY:function(a,b){this.x=a;this.y=b},get_length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},distanceTo:function(a){var b=this.x-a.x,a=this.y-a.y;return Math.sqrt(b*b+a*a)},__class__:A};var m=function(){};m.__name__=!0;m.locatePosition=function(a,b,c){null==m._randGen&&(m._randGen=new Rb);m._randGen.set_seed(10*a+4*b|0);m.__samples.splice(0,m.__samples.length);var d=N["int"](Math.pow(c._vertices.length,0.3333333333333333));m._randGen.rangeMin=0;m._randGen.rangeMax=c._vertices.length-
1;for(var e=0;e<d;){e++;var f=m._randGen.next();m.__samples.push(c._vertices[f])}for(var h,g,e=Math.POSITIVE_INFINITY,c=null,f=0;f<d;)h=f++,h=m.__samples[h],g=h.get_pos(),g=(g.x-a)*(g.x-a)+(g.y-b)*(g.y-b),g<e&&(e=g,c=h);var i,d=new Sb;d.set_fromVertex(c);i=d.next();var d=new v,e=new lb,k=w.ENull;for(h=0;d.h[i.__id__]||function(){var c;switch((k=m.isInFace(a,b,i))[1]){case 3:c=!0;break;default:c=!1}return c}(this);){d.h[i.__id__];h++;50==h&&null;e.set_fromFace(i);do{c=e.next();if(null==c)return w.ENull;
f=m.getRelativePosition(a,b,c)}while(1==f||0==f);i=c.get_rightFace()}return k};m.isCircleIntersectingAnyConstraint=function(a,b,c,d){if(0>=a||a>=d.get_width()||0>=b||b>=d.get_height())return!0;var d=m.locatePosition(a,b,d),e;switch(d[1]){case 0:e=d[2].get_edge().get_leftFace();break;case 1:e=d[2].get_leftFace();break;case 2:e=d[2];break;case 3:e=null}var d=c*c,f;f=e.get_edge().get_originVertex().get_pos();f=(f.x-a)*(f.x-a)+(f.y-b)*(f.y-b);if(f<=d)return!0;f=e.get_edge().get_nextLeftEdge().get_originVertex().get_pos();
f=(f.x-a)*(f.x-a)+(f.y-b)*(f.y-b);if(f<=d)return!0;f=e.get_edge().get_nextLeftEdge().get_nextLeftEdge().get_originVertex().get_pos();f=(f.x-a)*(f.x-a)+(f.y-b)*(f.y-b);if(f<=d)return!0;d=[];d.push(e.get_edge());d.push(e.get_edge().get_nextLeftEdge());d.push(e.get_edge().get_nextLeftEdge().get_nextLeftEdge());for(var h,g=new v;0<d.length;)if(h=d.pop(),g.set(h,!0),!0,e=h.get_originVertex().get_pos(),f=h.get_destinationVertex().get_pos(),e=m.intersectionsSegmentCircle(e.x,e.y,f.x,f.y,a,b,c)){if(h.get_isConstrained())return!0;
h=h.get_oppositeEdge().get_nextLeftEdge();!g.h[h.__id__]&&!function(){var a=h.get_oppositeEdge();return g.h[a.__id__]}(this)&&-1==d.indexOf(h)&&-1==d.indexOf(h.get_oppositeEdge())&&d.push(h);h=h.get_nextLeftEdge();!g.h[h.__id__]&&!function(){var a=h.get_oppositeEdge();return g.h[a.__id__]}(this)&&-1==d.indexOf(h)&&-1==d.indexOf(h.get_oppositeEdge())&&d.push(h)}return!1};m.getDirection=function(a,b,c,d,e,f){a=(e-a)*(d-b)+(f-b)*(-c+a);return 0==a?0:0<a?1:-1};m.getDirection2=function(a,b,c,d,e,f){var h=
(e-a)*(d-b)+(f-b)*(-c+a);if(0!=h)if(0<h){if(!(1.0E-4>=m.distanceSquaredPointToLine(e,f,a,b,c,d)))return 1}else if(!(1.0E-4>=m.distanceSquaredPointToLine(e,f,a,b,c,d)))return-1;return 0};m.getRelativePosition=function(a,b,c){return m.getDirection(c.get_originVertex().get_pos().x,c.get_originVertex().get_pos().y,c.get_destinationVertex().get_pos().x,c.get_destinationVertex().get_pos().y,a,b)};m.getRelativePosition2=function(a,b,c){return m.getDirection2(c.get_originVertex().get_pos().x,c.get_originVertex().get_pos().y,
c.get_destinationVertex().get_pos().x,c.get_destinationVertex().get_pos().y,a,b)};m.isInFace=function(a,b,c){var d=w.ENull,e=c.get_edge(),f=e.get_nextLeftEdge(),h=f.get_nextLeftEdge();if(0<=m.getRelativePosition(a,b,e)&&0<=m.getRelativePosition(a,b,f)&&0<=m.getRelativePosition(a,b,h))var d=e.get_originVertex(),g=f.get_originVertex(),i=h.get_originVertex(),k=d.get_pos().x,l=d.get_pos().y,j=g.get_pos().x,o=g.get_pos().y,n=i.get_pos().x,p=i.get_pos().y,q=(a-k)*(j-k)+(b-l)*(o-l),r=(a-j)*(n-j)+(b-o)*(p-
o),t=(a-n)*(k-n)+(b-p)*(l-p),r=1.0E-4>=(j-a)*(j-a)+(o-b)*(o-b)-r*r/((n-j)*(n-j)+(p-o)*(p-o)),n=1.0E-4>=(n-a)*(n-a)+(p-b)*(p-b)-t*t/((k-n)*(k-n)+(l-p)*(l-p)),d=1.0E-4>=(k-a)*(k-a)+(l-b)*(l-b)-q*q/((j-k)*(j-k)+(o-l)*(o-l))?n?w.EVertex(d):r?w.EVertex(g):w.EEdge(e):r?n?w.EVertex(i):w.EEdge(f):n?w.EEdge(h):w.EFace(c);return d};m.isDelaunay=function(a){var b=a.get_originVertex(),c=a.get_destinationVertex(),d=a.get_nextLeftEdge().get_destinationVertex(),a=a.get_nextRightEdge().get_destinationVertex();m.getCircumcenter(d.get_pos().x,
d.get_pos().y,b.get_pos().x,b.get_pos().y,c.get_pos().x,c.get_pos().y,m.__circumcenter);b=(d.get_pos().x-m.__circumcenter.x)*(d.get_pos().x-m.__circumcenter.x)+(d.get_pos().y-m.__circumcenter.y)*(d.get_pos().y-m.__circumcenter.y);return(a.get_pos().x-m.__circumcenter.x)*(a.get_pos().x-m.__circumcenter.x)+(a.get_pos().y-m.__circumcenter.y)*(a.get_pos().y-m.__circumcenter.y)>=b};m.getCircumcenter=function(a,b,c,d,e,f,h){null==h&&(h=new A);var g=(a+c)/2,i=(b+d)/2,e=(g*(a-e)+(i-(b+f)/2)*(b-f)+(a+e)/2*
(e-a))/(a*(f-d)+c*(b-f)+e*(d-b));h.x=g+e*(d-b);h.y=i-e*(c-a);return h};m.intersections2segments=function(a,b,c,d,e,f,h,g,i,k,l){null==l&&(l=!1);var j=0,m=0,n,p=(a-c)*(f-g)+(d-b)*(e-h);if(0==p)n=!1;else if(n=!0,!l||null!=i||null!=k)j=(a*(f-g)+b*(h-e)+e*g-f*h)/p,m=(a*(f-d)+b*(c-e)-c*f+d*e)/p,!l&&!(0<=j&&1>=j&&0<=m&&1>=m)&&(n=!1);n&&(null!=i&&(i.x=a+j*(c-a),i.y=b+j*(d-b)),null!=k&&(k.push(j),k.push(m)));return n};m.intersections2edges=function(a,b,c,d,e){null==e&&(e=!1);return m.intersections2segments(a.get_originVertex().get_pos().x,
a.get_originVertex().get_pos().y,a.get_destinationVertex().get_pos().x,a.get_destinationVertex().get_pos().y,b.get_originVertex().get_pos().x,b.get_originVertex().get_pos().y,b.get_destinationVertex().get_pos().x,b.get_destinationVertex().get_pos().y,c,d,e)};m.projectOrthogonaly=function(a,b){var c=b.get_originVertex().get_pos().x,d=b.get_originVertex().get_pos().y,e=b.get_destinationVertex().get_pos().x,f=b.get_destinationVertex().get_pos().y,h=a.x,g=a.y,h=(c*c-c*e-c*h+d*d-d*f-d*g+e*h+f*g)/(c*c-
2*c*e+d*d-2*d*f+e*e+f*f);a.x=c+h*(e-c);a.y=d+h*(f-d)};m.intersections2Circles=function(a,b,c,d,e,f,h){var g=(d-a)*(d-a)+(e-b)*(e-b);if((a!=d||b!=e)&&g<=(c+f)*(c+f)&&g>=(c-f)*(c-f)){var i=Math.sqrt(((c+f)*(c+f)-g)*(g-(f-c)*(f-c))),k=(a+d)/2+(d-a)*(c*c-f*f)/(2*g),c=(b+e)/2+(e-b)*(c*c-f*f)/(2*g),b=(e-b)/(2*g),d=(d-a)/(2*g);if(null!=h){a=0;for(i=[k+b*i,c-d*i,k-b*i,c+d*i];a<i.length;)k=i[a],++a,h.push(k)}return!0}return!1};m.intersectionsSegmentCircle=function(a,b,c,d,e,f,h,g){var i=a*a,k=b*b,l=d*d-2*
d*b+k+c*c-2*c*a+i,j=2*b*f-2*i+2*d*b-2*k+2*c*a-2*c*e+2*a*e-2*d*f,e=j*j-4*l*(k+f*f+e*e-2*b*f-2*a*e+i-h*h);if(0>e)return!1;if(0==e){e=-j/(2*l);if(0>e||1<e)return!1;if(null!=g){l=0;for(a=[a+e*(c-a),b+e*(d-b),e];l<a.length;)b=a[l],++l,g.push(b)}return!0}f=Math.sqrt(e);e=(-j+f)/(2*l);l=(-j-f)/(2*l);j=!1;if(0<=e&&1>=e){if(null!=g){j=0;for(e=[a+e*(c-a),b+e*(d-b),e];j<e.length;)f=e[j],++j,g.push(f)}j=!0}if(0<=l&&1>=l){if(null!=g){j=0;for(a=[a+l*(c-a),b+l*(d-b),l];j<a.length;)b=a[j],++j,g.push(b)}j=!0}return j};
m.tangentsPointToCircle=function(a,b,c,d,e,f){var h=(a+c)/2,g=(b+d)/2,a=0.5*Math.sqrt((a-c)*(a-c)+(b-d)*(b-d));return m.intersections2Circles(h,g,a,c,d,e,f)};m.tangentsCrossCircleToCircle=function(a,b,c,d,e,f){var h=Math.sqrt((b-d)*(b-d)+(c-e)*(c-e));if(m.intersections2Circles(b,c,a,b+(d-b)/4,c+(e-c)/4,h/4,f)){for(var a=f[0],g=f[1],i=(b+d)/2,k=(c+e)/2,h=((a-i)*(e-c)+(g-k)*(-d+b))/(h*h),c=2*(i+h*(e-c))-a,d=2*(k-h*(d-b))-g,b=0,a=[c+f[2]-a,f[3]+d-g,c,d];b<a.length;)g=a[b],++b,f.push(g);return!0}return!1};
m.tangentsParalCircleToCircle=function(a,b,c,d,e,f){for(var h=Math.sqrt((b-d)*(b-d)+(c-e)*(c-e)),g=b+a*(e-c)/h,h=c+a*(-d+b)/h,i=2*b-g,k=2*c-h,a=0,b=[g,h,i,k,i+d-b,k+e-c,g+d-b,h+e-c];a<b.length;)c=b[a],++a,f.push(c)};m.distanceSquaredPointToLine=function(a,b,c,d,e,f){var h=(a-c)*(e-c)+(b-d)*(f-d);return(c-a)*(c-a)+(d-b)*(d-b)-h*h/((e-c)*(e-c)+(f-d)*(f-d))};m.distanceSquaredPointToSegment=function(a,b,c,d,e,f){var h=(e-c)*(e-c)+(f-d)*(f-d),g=((a-c)*(e-c)+(b-d)*(f-d))/h;return 0>g?(a-c)*(a-c)+(b-d)*
(b-d):1>=g?(c-a)*(c-a)+(d-b)*(d-b)-g*g*h:(a-e)*(a-e)+(b-f)*(b-f)};m.distanceSquaredVertexToEdge=function(a,b){return m.distanceSquaredPointToSegment(a.get_pos().x,a.get_pos().y,b.get_originVertex().get_pos().x,b.get_originVertex().get_pos().y,b.get_destinationVertex().get_pos().x,b.get_destinationVertex().get_pos().y)};var Pb=function(a,b,c,d,e,f){null==f&&(f=0);null==e&&(e=0);null==d&&(d=1);null==c&&(c=0);null==b&&(b=0);null==a&&(a=1);this.a=a;this.b=b;this.c=c;this.d=d;this.e=e;this.f=f};Pb.__name__=
!0;Pb.prototype={identity:function(){this.a=1;this.c=this.b=0;this.d=1;this.f=this.e=0},translate:function(a,b){this.e+=a;this.f+=b},scale:function(a,b){this.a*=a;this.b*=b;this.c*=a;this.d*=b;this.e*=a;this.f*=b},rotate:function(a){var b=Math.cos(a),a=Math.sin(a),c=this.a*a+this.b*b,d=this.c*b+this.d*-a,e=this.c*a+this.d*b,f=this.e*b+this.f*-a,h=this.e*a+this.f*b;this.a=this.a*b+this.b*-a;this.b=c;this.c=d;this.d=e;this.e=f;this.f=h},transformX:function(a,b){return this.a*a+this.c*b+this.e},transformY:function(a,
b){return this.b*a+this.d*b+this.f},__class__:Pb};var Tb=function(){};Tb.__name__=!0;Tb.prototype={__class__:Tb};var aa=function(){};aa.__name__=!0;aa.buildShapes=function(a,b,c){for(var d=[],e=new ba,f=1,h=a.height-1;f<h;)for(var g=f++,i=0,k=a.width-1;i<k;){var l=i++;16777215==function(){var b=g*a.width+l<<2;return a.bytes.b[b+a.format.channelMap[1]]<<16|a.bytes.b[b+a.format.channelMap[2]]<<8|a.bytes.b[b+a.format.channelMap[3]]}(this)&&16777215>function(){var b=g*a.width+(l+1)<<2;return a.bytes.b[b+
a.format.channelMap[1]]<<16|a.bytes.b[b+a.format.channelMap[2]]<<8|a.bytes.b[b+a.format.channelMap[3]]}(this)&&(e.get(l+1+"_"+g)||d.push(aa.buildShape(a,g,l+1,e,b,c)))}return d};aa.buildShape=function(a,b,c,d,e,f){var h=c,g=b,i=[h,g];d.set(h+"_"+g,!0);!0;for(var k=new A(0,1),l=new A,j,m,n=-1;;){if(null!=e){var p=b*e.width+c<<2;e.bytes.b[p+e.format.channelMap[0]]=255;e.bytes.b[p+e.format.channelMap[1]]=255;e.bytes.b[p+e.format.channelMap[2]]=0;e.bytes.b[p+e.format.channelMap[3]]=0}j=b+k.x+k.y|0;m=
c+k.x-k.y|0;16777215>function(){var b=j*a.width+m<<2;return a.bytes.b[b+a.format.channelMap[1]]<<16|a.bytes.b[b+a.format.channelMap[2]]<<8|a.bytes.b[b+a.format.channelMap[3]]}(this)?(l.x=-k.y,l.y=k.x):(j=b+k.y|0,m=c+k.x|0,16777215>function(){var b=j*a.width+m<<2;return a.bytes.b[b+a.format.channelMap[1]]<<16|a.bytes.b[b+a.format.channelMap[2]]<<8|a.bytes.b[b+a.format.channelMap[3]]}(this)?(l.x=k.x,l.y=k.y):(j=b,m=c,l.x=k.y,l.y=-k.x));h+=k.x;g+=k.y;if(h==i[0]&&g==i[1])break;else i.push(h),i.push(g),
d.set(h+"_"+g,!0),!0,b=j,c=m,k.x=l.x,k.y=l.y;n--;if(0==n)break}if(null!=f){f.graphics.lineStyle(0.5,65280,1);f.graphics.moveTo(i[0],i[1]);for(b=2;b<i.length;)f.graphics.lineTo(i[b],i[b+1]),b+=2;f.graphics.lineTo(i[0],i[1])}return i};aa.buildGraph=function(a){var b,c=new wa,d;for(b=0;b<a.length;)d=c.insertNode(),d.set_data(new Tb),d.get_data().index=b,d.get_data().point=new A(a[b],a[b+1]),b+=2;for(var e,f,h,g,a=c.get_node();null!=a;){for(b=null!=a.get_next()?a.get_next():c.get_node();b!=a;){g=!0;e=
null!=a.get_next()?a.get_next():c.get_node();h=2;for(d=0;e!=b;){f=m.distanceSquaredPointToSegment(e.get_data().point.x,e.get_data().point.y,a.get_data().point.x,a.get_data().point.y,b.get_data().point.x,b.get_data().point.y);0>f&&(f=0);if(f>=aa.maxDistance){g=!1;break}h++;d+=f;e=null!=e.get_next()?e.get_next():c.get_node()}if(!g)break;e=c.insertEdge(a,b);f=new Qb;f.sumDistancesSquared=d;f.length=a.get_data().point.distanceTo(b.get_data().point);f.nodesCount=h;e.set_data(f);b=null!=b.get_next()?b.get_next():
c.get_node()}a=a.get_next()}return c};aa.buildPolygon=function(a,b){var c=[],d,e=2147483647,f,h,g=null;for(d=a.get_node();d.get_data().index<e;){e=d.get_data().index;c.push(d.get_data().point.x);c.push(d.get_data().point.y);h=0;for(d=d.get_outgoingEdge();null!=d;)f=d.get_data().nodesCount-d.get_data().length*Math.sqrt(d.get_data().sumDistancesSquared/d.get_data().nodesCount),f>h&&(h=f,g=d),d=d.get_rotNextEdge();d=g.get_destinationNode()}0==m.getDirection(c[c.length-2],c[c.length-1],c[0],c[1],c[2],
c[3])&&(c.shift(),c.shift());if(null!=b){b.graphics.lineStyle(0.5,255);b.graphics.moveTo(c[0],c[1]);for(e=2;e<c.length;)b.graphics.lineTo(c[e],c[e+1]),e+=2;b.graphics.lineTo(c[0],c[1])}return c};var Rb=function(a,b,c){null==c&&(c=1);null==b&&(b=0);null==a&&(a=1234);this._originalSeed=this._currSeed=a;this.rangeMin=b;this.rangeMax=c;this._numIter=0};Rb.__name__=!0;Rb.prototype={set_seed:function(a){return this._originalSeed=this._currSeed=a},reset:function(){this._currSeed=this._originalSeed;this._numIter=
0},next:function(){var a=1*this._currSeed;for(this._tempString=N.string(a*a);8>this._tempString.length;)this._tempString="0"+this._tempString;this._currSeed=N.parseInt(D.substr(this._tempString,1,5));a=Math.round(this.rangeMin+this._currSeed/99999*(this.rangeMax-this.rangeMin));0==this._currSeed&&(this._currSeed=this._originalSeed+this._numIter);this._numIter++;200==this._numIter&&this.reset();return a},__class__:Rb};var nb=function(){};nb.__name__=!0;nb.simplify=function(a,b){null==b&&(b=1);var c=
a.length;if(4>=c)return[].concat(a);for(var d=a[0],e=a[1],f=a[c-2],h=a[c-1],g=-1,i=0,k=1,c=c>>1;k<c;){var l=k++,j=m.distanceSquaredPointToSegment(a[l<<1],a[(l<<1)+1],d,e,f,h);j>i&&(i=j,g=l)}return i>b*b?(d=a.slice(0,(g<<1)+2),g=a.slice(g<<1),d=nb.simplify(d,b),g=nb.simplify(g,b),d.slice(0,d.length-2).concat(g)):[d,e,f,h]};var Oa=function(){};Oa.__name__=!0;Oa.assertFalse=function(){};Oa.trace=function(){};var Xb=function(){};Xb.__name__=!0;Xb.buildFromBmpData=function(a,b,c,d){null==b&&(b=1);a=aa.buildShapes(a,
c,d);if(1<=b)for(var c=0,e=a.length;c<e;){var f=c++;a[f]=nb.simplify(a[f],b)}b=[];c=0;for(e=a.length;c<e;)f=c++,b.push(aa.buildGraph(a[f]));a=[];c=0;for(e=b.length;c<e;)f=c++,a.push(aa.buildPolygon(b[f],d));b=new va;c=0;for(e=a.length;c<e;){f=c++;for(d=0;d<a[f].length-2;)b.get_coordinates().push(a[f][d]),b.get_coordinates().push(a[f][d+1]),b.get_coordinates().push(a[f][d+2]),b.get_coordinates().push(a[f][d+3]),d+=2;b.get_coordinates().push(a[f][0]);b.get_coordinates().push(a[f][1]);b.get_coordinates().push(a[f][d]);
b.get_coordinates().push(a[f][d+1])}return b};var Wb=function(){};Wb.__name__=!0;Wb.buildRectangle=function(a,b){var c=new W,d=new W,e=new W,f=new W,h=new q,g=new q,i=new q,k=new q,l=new q,j=new q,m=new q,n=new q,p=new q,r=new q,t=new q,w=new q,y=new G,s=new G,u=new G,z=new G,v=new ha,x=new $,A=new $,B=new $,C=new $,D=new ua(a,b);c.get_pos().setXY(-10,-10);d.get_pos().setXY(a+10,-10);e.get_pos().setXY(a+10,b+10);f.get_pos().setXY(-10,b+10);c.setDatas(h);d.setDatas(i);e.setDatas(l);f.setDatas(m);h.setDatas(c,
g,i,z,!0,!0);g.setDatas(d,h,n,y,!0,!0);i.setDatas(d,k,w,z,!0,!0);k.setDatas(e,i,p,s,!0,!0);l.setDatas(e,j,m,u,!0,!0);j.setDatas(f,l,k,s,!0,!0);m.setDatas(f,n,t,u,!0,!0);n.setDatas(c,m,r,y,!0,!0);p.setDatas(d,r,j,s,!0,!1);r.setDatas(f,p,g,y,!0,!1);t.setDatas(c,w,l,u,!1,!1);w.setDatas(e,t,h,z,!1,!1);y.setDatas(r);s.setDatas(p);u.setDatas(l,!1);z.setDatas(i,!1);c.set_fromConstraintSegments([x,C]);d.set_fromConstraintSegments([x,A]);e.set_fromConstraintSegments([A,B]);f.set_fromConstraintSegments([B,
C]);h.fromConstraintSegments.push(x);g.fromConstraintSegments.push(x);i.fromConstraintSegments.push(A);k.fromConstraintSegments.push(A);l.fromConstraintSegments.push(B);j.fromConstraintSegments.push(B);m.fromConstraintSegments.push(C);n.fromConstraintSegments.push(C);x.get_edges().push(h);A.get_edges().push(i);B.get_edges().push(l);C.get_edges().push(m);x.fromShape=v;A.fromShape=v;B.fromShape=v;C.fromShape=v;for(var F=0,x=[x,A,B,C];F<x.length;)A=x[F],++F,v.segments.push(A);F=0;for(c=[c,d,e,f];F<c.length;)d=
c[F],++F,D._vertices.push(d);c=0;for(h=[h,g,i,k,l,j,m,n,p,r,t,w];c<h.length;)g=h[c],++c,D._edges.push(g);h=0;for(y=[y,s,u,z];h<y.length;)s=y[h],++h,D._faces.push(s);D.get___constraintShapes().push(v);v=[];y=0;for(s=[0,0,a,0];y<s.length;)u=s[y],++y,v.push(u);y=0;for(s=[a,0,a,b];y<s.length;)u=s[y],++y,v.push(u);y=0;for(s=[a,b,0,b];y<s.length;)u=s[y],++y,v.push(u);y=0;for(s=[0,b,0,0];y<s.length;)u=s[y],++y,v.push(u);D.set_clipping(!1);D.insertConstraintShape(v);D.set_clipping(!0);return D};var hc=function(){};
hc.__name__=!0;var pb=function(){};pb.__name__=!0;pb.fromFlambeTexture=function(a){var b;b=a.get_width();var c=a.get_height();b=new Ub(b,c,!1);b.format=ia.RGBA;I.log("read px from flambe texture");b.bytes=a.readPixels(0,0,a.get_width(),a.get_height());I.log("read px from flambe texture");return b};var Ub=function(a,b,c,d){null==c&&(c=!0);this.count=a*b;c&&(this.bytes=da.alloc(this.count<<2));this.width=a;this.height=b;this.format=null!=d?d:ia.ARGB};Ub.__name__=!0;Ub.prototype={__class__:Ub};var ia=
function(a,b,c,d,e){null==e&&(e="PixelFormat");this.channelMap=[a,b,c,d];this.name=e};ia.__name__=!0;ia.prototype={__class__:ia};var za=function(a,b,c){null==c&&(c=1);null==b&&(b=0);null==a&&(a=1);this._prevX=this._prevY=0;x.call(this);this.lineStyle(a,b,c);a=new u;a.set_pointerEnabled(!1);this._container=(new X).add(a)};za.__name__=!0;za.__super__=x;za.prototype=s(x.prototype,{get_name:function(){return"GraphicsComponent_1"},onStart:function(){this.owner.addChild(this._container)},lineStyle:function(a,
b,c){null==c&&(c=1);null==b&&(b=0);null==a&&(a=1);this._color=b;this._thickness=a;this._alpha=c},drawCircle:function(a,b,c,d){null==d&&(d=45);for(var e=0,f=d+1;e<f;){var h=e++,g=6.283185307179586*(h/d);0==h?this.moveTo(a+Math.cos(g)*c,b+Math.sin(g)*c):this.lineTo(a+Math.cos(g)*c,b+Math.sin(g)*c)}},lineTo:function(a,b){var c=this._prevX-a,d=this._prevY-b,e=Math.sqrt(c*c+d*d),c=Math.atan2(d,c),e=(new Xa(this._color,e,this._thickness)).setRotation(180*c/3.141592653589793).setXY(a,b).setAnchor(0,this._thickness/
2).setAlpha(this._alpha);e.set_pixelSnapping(!1);this._container.addChild((new X).add(e));this._prevX=a;this._prevY=b},moveTo:function(a,b){this._prevX=a;this._prevY=b},clear:function(){this._container.disposeChildren();this._prevY=this._prevX=0},dispose:function(){this._container.dispose();this._container=null;x.prototype.dispose.call(this)},__class__:za});var ob=function(a){this.savedColor=a._color;this.savedAlpha=a._alpha;this.inFillingMode=!1;this.graphics=a};ob.__name__=!0;ob.__interfaces__=
[hc];ob.prototype={beginFill:function(a,b){null==b&&(b=1);this.inFillingMode||(this.savedColor=this.graphics._color,this.savedAlpha=this.graphics._alpha);this.graphics.lineStyle(this.graphics._thickness,a,b);this.inFillingMode=!0},endFill:function(){this.graphics.lineStyle(this.graphics._thickness,this.savedColor,this.savedAlpha);this.inFillingMode=!1},drawCircle:function(a,b,c){this.graphics.drawCircle(a,b,c)},__class__:ob};var lb=function(){};lb.__name__=!0;lb.prototype={set_fromFace:function(a){this._fromFace=
a;this._nextEdge=this._fromFace.get_edge();return a},next:function(){null!=this._nextEdge?(this._resultEdge=this._nextEdge,this._nextEdge=this._nextEdge.get_nextLeftEdge(),this._nextEdge==this._fromFace.get_edge()&&(this._nextEdge=null)):this._resultEdge=null;return this._resultEdge},__class__:lb};var Nb=function(){};Nb.__name__=!0;Nb.prototype={set_fromMesh:function(a){this._fromMesh=a;this._currIndex=0;return a},next:function(){do if(this._currIndex<this._fromMesh._vertices.length)this._resultVertex=
this._fromMesh._vertices[this._currIndex],this._currIndex++;else{this._resultVertex=null;break}while(!this._resultVertex.get_isReal());return this._resultVertex},__class__:Nb};var Sb=function(){};Sb.__name__=!0;Sb.prototype={set_fromVertex:function(a){this._fromVertex=a;this._nextEdge=this._fromVertex.get_edge();return a},next:function(){if(null!=this._nextEdge){do if(this._resultFace=this._nextEdge.get_leftFace(),this._nextEdge=this._nextEdge.get_rotLeftEdge(),this._nextEdge==this._fromVertex.get_edge()){this._nextEdge=
null;this._resultFace.get_isReal()||(this._resultFace=null);break}while(!this._resultFace.get_isReal())}else this._resultFace=null;return this._resultFace},__class__:Sb};var Ob=function(){};Ob.__name__=!0;Ob.prototype={set_fromVertex:function(a){this._fromVertex=a;for(this._nextEdge=this._fromVertex.get_edge();!this._nextEdge.get_isReal();)this._nextEdge=this._nextEdge.get_rotLeftEdge();return a},next:function(){if(null!=this._nextEdge){this._resultEdge=this._nextEdge.get_oppositeEdge();do if(this._nextEdge=
this._nextEdge.get_rotLeftEdge(),this._nextEdge==this._fromVertex.get_edge()){this._nextEdge=null;break}while(!this._nextEdge.get_isReal())}else this._resultEdge=null;return this._resultEdge},__class__:Ob};var mb=function(){this.realEdgesOnly=!0};mb.__name__=!0;mb.prototype={set_fromVertex:function(a){this._fromVertex=a;for(this._nextEdge=this._fromVertex.get_edge();this.realEdgesOnly&&!this._nextEdge.get_isReal();)this._nextEdge=this._nextEdge.get_rotLeftEdge();return a},next:function(){if(null!=
this._nextEdge){this._resultEdge=this._nextEdge;do if(this._nextEdge=this._nextEdge.get_rotLeftEdge(),this._nextEdge==this._fromVertex.get_edge()){this._nextEdge=null;break}while(this.realEdgesOnly&&!this._nextEdge.get_isReal())}else this._resultEdge=null;return this._resultEdge},__class__:mb};var Ra=function(a){this.entitiesAlpha=0.75;this.entitiesWidth=1;this.entitiesColor=65280;this.pathsAlpha=0.75;this.pathsWidth=1.5;this.pathsColor=16760848;this.verticesAlpha=0.25;this.verticesRadius=0.5;this.verticesColor=
255;this.constraintsAlpha=1;this.constraintsWidth=2;this.constraintsColor=16711680;this.edgesAlpha=0.25;this.edgesWidth=1;this.edgesColor=10066329;this.graphics=new ob(a)};Ra.__name__=!0;Ra.prototype={drawVertex:function(a){this.graphics.graphics.lineStyle(this.verticesRadius,this.verticesColor,this.verticesAlpha);this.graphics.beginFill(this.verticesColor,this.verticesAlpha);this.graphics.graphics.drawCircle(a.get_pos().x,a.get_pos().y,this.verticesRadius);this.graphics.endFill()},drawEdge:function(a){a.get_isConstrained()?
this.graphics.graphics.lineStyle(this.constraintsWidth,this.constraintsColor,this.constraintsAlpha):this.graphics.graphics.lineStyle(this.edgesWidth,this.edgesColor,this.edgesAlpha);this.graphics.graphics.moveTo(a.get_originVertex().get_pos().x,a.get_originVertex().get_pos().y);this.graphics.graphics.lineTo(a.get_destinationVertex().get_pos().x,a.get_destinationVertex().get_pos().y)},drawMesh:function(a,b){null==b&&(b=!1);b&&this.graphics.graphics.clear();a.traverse(V(this,this.drawVertex),V(this,
this.drawEdge))},drawEntity:function(a,b){null==b&&(b=!1);b&&this.graphics.graphics.clear();this.graphics.graphics.lineStyle(this.entitiesWidth,this.entitiesColor,this.entitiesAlpha);this.graphics.beginFill(this.entitiesColor,this.entitiesAlpha);this.graphics.drawCircle(a.x,a.y,a.get_radius());this.graphics.endFill()},drawPath:function(a,b){null==b&&(b=!1);b&&this.graphics.graphics.clear();if(0!=a.length){this.graphics.graphics.lineStyle(this.pathsWidth,this.pathsColor,this.pathsAlpha);this.graphics.graphics.moveTo(a[0],
a[1]);for(var c=2;c<a.length;)this.graphics.graphics.lineTo(a[c],a[c+1]),this.graphics.graphics.moveTo(a[c],a[c+1]),c+=2}},__class__:Ra};var K=function(){};K.__name__=!0;K.getClass=function(a){return a instanceof Array&&null==a.__enum__?Array:a.__class__};K.__string_rec=function(a,b){if(null==a)return"null";if(5<=b.length)return"<...>";var c=typeof a;if("function"==c&&(a.__name__||a.__ename__))c="object";switch(c){case "object":if(a instanceof Array){if(a.__enum__){if(2==a.length)return a[0];for(var c=
a[0]+"(",b=b+"\t",d=2,e=a.length;d<e;)var f=d++,c=2!=f?c+(","+K.__string_rec(a[f],b)):c+K.__string_rec(a[f],b);return c+")"}c=a.length;d="[";b+="\t";for(e=0;e<c;)f=e++,d+=(0<f?",":"")+K.__string_rec(a[f],b);return d+"]"}try{d=a.toString}catch(h){return"???"}if(null!=d&&d!=Object.toString&&(c=a.toString(),"[object Object]"!=c))return c;c=null;d="{\n";b+="\t";e=null!=a.hasOwnProperty;for(c in a)if(!e||a.hasOwnProperty(c))"prototype"==c||"__class__"==c||"__super__"==c||"__interfaces__"==c||"__properties__"==
c||(2!=d.length&&(d+=", \n"),d+=b+c+" : "+K.__string_rec(a[c],b));b=b.substring(1);return d+("\n"+b+"}");case "function":return"<function>";case "string":return a;default:return""+a}};K.__interfLoop=function(a,b){if(null==a)return!1;if(a==b)return!0;var c=a.__interfaces__;if(null!=c)for(var d=0,e=c.length;d<e;){var f=d++,f=c[f];if(f==b||K.__interfLoop(f,b))return!0}return K.__interfLoop(a.__super__,b)};K.__instanceof=function(a,b){if(null==b)return!1;switch(b){case lc:return(a|0)===a;case ic:return"number"==
typeof a;case jc:return"boolean"==typeof a;case String:return"string"==typeof a;case Array:return a instanceof Array&&null==a.__enum__;case mc:return!0;default:if(null!=a){if("function"==typeof b&&(a instanceof b||K.__interfLoop(K.getClass(a),b)))return!0}else return!1;return b==nc&&null!=a.__name__||b==oc&&null!=a.__ename__?!0:a.__enum__==b}};var Zb=function(){};Zb.__name__=!0;Zb.getContextWebGL=function(a,b){for(var c=0,d=["webgl","experimental-webgl"];c<d.length;){var e=d[c];++c;e=a.getContext(e,
b);if(null!=e)return e}return null};var kc=0;Math.NaN=Number.NaN;Math.NEGATIVE_INFINITY=Number.NEGATIVE_INFINITY;Math.POSITIVE_INFINITY=Number.POSITIVE_INFINITY;Math.isFinite=function(a){return isFinite(a)};Math.isNaN=function(a){return isNaN(a)};String.prototype.__class__=String;String.__name__=!0;Array.__name__=!0;Date.prototype.__class__=Date;Date.__name__=["Date"];var lc={__name__:["Int"]},mc={__name__:["Dynamic"]},ic=Number;ic.__name__=["Float"];var jc=Boolean;jc.__ename__=["Bool"];var nc={__name__:["Class"]},
oc={};ia.ARGB=new ia(0,1,2,3,"ARGB");ia.RGBA=new ia(3,0,1,2,"RGBA");na.instance=new na;C.DISPATCHING_SENTINEL=new ra(null,null);r.root=new X;r.uncaughtError=new B;r.hidden=new O(!1);r.volume=new L(1);r._platform=na.instance;r._calledInit=!1;R.__meta__={obj:{assets:[{images:[{bytes:22820,md5:"06ee1a5fa58ae73072f1533a0d471230",name:"galapagosBW.png"},{bytes:262914,md5:"180676ea0db7d664d4399a024b28b621",name:"galapagosColor.png"}]}]}};R._supportsCrossOrigin=function(){var a;a=0<=window.navigator.userAgent.indexOf("Linux; U; Android")?
!1:null!=(new XMLHttpRequest).withCredentials;a||null;return a}();u._scratchPoint=new xb;Q._sharedEvent=new Ab;J._sharedEvent=new Bb;qa.CANVAS_TEXTURES=(new ma("(iPhone|iPod|iPad)","")).match(window.navigator.userAgent);t._mediaRefCount=0;t._detectBlobSupport=!0;p.VENDOR_PREFIXES=["webkit","moz","ms","o","khtml"];p.SHOULD_HIDE_MOBILE_BROWSER=window.top==window&&(new ma("Mobile(/.*)? Safari","")).match(window.navigator.userAgent);z._detectSupport=!0;U._scratchMatrix=new Y;v.count=0;$.INC=0;ha.INC=
0;q.INC=0;G.INC=0;ua.INC=0;va.INC=0;W.INC=0;wa.INC=0;ya.INC=0;xa.INC=0;m.__samples=[];m.__circumcenter=new A;aa.maxDistance=1;I.main()})();
